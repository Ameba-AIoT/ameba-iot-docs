

<!DOCTYPE html>
<html class="writer-html5" lang="en" data-content_root="../../">
<head>
  <meta charset="utf-8" /><meta name="viewport" content="width=device-width, initial-scale=1" />

  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Introduction &mdash; Ameba IoT Docs  documentation</title>
      <link rel="stylesheet" type="text/css" href="../../_static/pygments.css?v=80d5e7a1" />
      <link rel="stylesheet" type="text/css" href="../../_static/css/theme.css?v=19f00094" />
      <link rel="stylesheet" type="text/css" href="../../_static/togglebutton.css?v=13237357" />
      <link rel="stylesheet" type="text/css" href="../../_static/custom.css?v=c12c2b39" />
      <link rel="stylesheet" type="text/css" href="../../_static/tabs.css?v=a5c4661c" />
      <link rel="stylesheet" type="text/css" href="../../_static/custom.css?v=c12c2b39" />

  
    <link rel="shortcut icon" href="../../_static/favicon.ico"/>
  <!--[if lt IE 9]>
    <script src="../../_static/js/html5shiv.min.js"></script>
  <![endif]-->
  
        <script src="../../_static/jquery.js?v=5d32c60e"></script>
        <script src="../../_static/_sphinx_javascript_frameworks_compat.js?v=2cd50e6c"></script>
        <script src="../../_static/documentation_options.js?v=5929fcd5"></script>
        <script src="../../_static/doctools.js?v=9a2dae69"></script>
        <script src="../../_static/sphinx_highlight.js?v=dc90522c"></script>
        <script src="../../_static/toggleprompt.js?v=d7ede5d2"></script>
        <script src="https://cdn.jsdelivr.net/npm/sweetalert2@11"></script>
        <script src="../../_static/tabs.js?v=3030b3cb"></script>
        <script>let toggleHintShow = 'Click to show';</script>
        <script>let toggleHintHide = 'Click to hide';</script>
        <script>let toggleOpenOnPrint = 'true';</script>
        <script src="../../_static/togglebutton.js?v=4a39c7ea"></script>
        <script>var togglebuttonSelector = '.toggle, .admonition.dropdown';</script>
        <script>var togglebuttonSelector = '.toggle, .admonition.dropdown';</script>
    <script src="../../_static/js/theme.js"></script>
    <link rel="index" title="Index" href="../../genindex.html" />
    <link rel="search" title="Search" href="../../search.html" />
    <link rel="next" title="Thermal Senor" href="../8_thermal/0_thermal_index.html" />
    <link rel="prev" title="Pseudo-Static Random Access Memory (PSRAM)" href="0_psram_index.html" />
     

    <!-- NDAæ–‡æ¡£è¾“å…¥å¯†ç çš„æ¡† -->
    
<script>
// â–¼â–¼â–¼â–¼â–¼â–¼â–¼â–¼â–¼â–¼â–¼â–¼â–¼â–¼â–¼â–¼â–¼â–¼ å¤šè¯­è¨€é…ç½® â–¼â–¼â–¼â–¼â–¼â–¼â–¼â–¼â–¼â–¼â–¼â–¼â–¼â–¼â–¼â–¼â–¼â–¼
const lang = 'en';  // ä½¿ç”¨ Python å­—ç¬¦ä¸²åˆ‡ç‰‡
const i18n = {
    zh: {
        title: 'è®¿é—®æˆæƒ',
        username: 'ç”¨æˆ·å',
        password: 'å¯†ç ',
        confirm: 'ç¡®è®¤',
        cancel: 'å–æ¶ˆ',
        usernameError: 'ç”¨æˆ·åé”™è¯¯',
        userNotExist: 'è¯¥ç”¨æˆ·ä¸å­˜åœ¨',
        passwordError: 'å¯†ç é”™è¯¯',
        wrongPassword: 'è¯·è¾“å…¥æ­£ç¡®çš„å¯†ç ',
        accessDenied: 'æ— è®¿é—®æƒé™',
        noPermission: 'æ‚¨æ— æƒæŸ¥çœ‹æ­¤å†…å®¹',
        expiredTitle: 'è®¿é—®å·²è¿‡æœŸ',
        expiredMsg: 'æ‚¨çš„æƒé™å·²å¤±æ•ˆ<br>æœ‰æ•ˆæœŸï¼š%s è‡³ %s',
        deniedTitle: 'âš ï¸ æ— è®¿é—®æƒé™',
        contact: 'è¯·è”ç³» claire_wang@realsil.com.cn è·å–æƒé™'
    },
    en: {
        title: 'Access Required',
        username: 'Username',
        password: 'Password',
        confirm: 'Confirm',
        cancel: 'Cancel',
        usernameError: 'Invalid Username',
        userNotExist: 'User does not exist',
        passwordError: 'Wrong Password',
        wrongPassword: 'Please enter correct password',
        accessDenied: 'Access Denied',
        noPermission: 'You have no permission to view this content',
        expiredTitle: 'Authorization Expired',
        expiredMsg: 'Your access has expired<br>Valid period: %s to %s',
        deniedTitle: 'âš ï¸ Access Denied',
        contact: 'Please contact claire_wang@realsil.com.cn for access'
    }
};
// â–²â–²â–²â–²â–²â–²â–²â–²â–²â–²â–²â–²â–²â–²â–²â–²â–²â–² å¤šè¯­è¨€é…ç½®ç»“æŸ â–²â–²â–²â–²â–²â–²â–²â–²â–²â–²â–²â–²â–²â–²â–²â–²â–²â–²
</script>

    <!-- æ ·å¼æ¨¡æ¿ -->
    

<style>
    .wy-nav-content {
        max-width: 1100px;
         
    }
    
    .auth-denied {
        padding: 20px;
        background: #f8f9fa;
        border-radius: 4px;
        border: 1px solid #dee2e6;
        text-align: center;
        color: #721c24;
        margin-top: 20px;
    }
    .auth-denied h3 {
        margin-bottom: 10px;
        color: #dc3545;
    }
    
    #report-button {
        position: fixed;
        top: 10px;
        left: 1270px;
        padding: 1px 15px; /* è°ƒæ•´å†…è¾¹è·ï¼š1px ä¸ºä¸Šä¸‹ï¼Œ5px ä¸ºå·¦å³ */
        height: 30px; /* è®¾ç½®å›ºå®šé«˜åº¦ */
        background-color: #2ecc71;
        color: white;
        border: none;
        border-radius: 5px;
        cursor: pointer;
        z-index: 1000;
    }
    #report-button:hover {
        background-color: #2ecc71;
    }
    
    .feedback-dialog {
        position: fixed;
        top: 50%;
        left: 50%;
        transform: translate(-50%, -50%);
        background: white;
        padding: 20px;
        border-radius: 8px;
        box-shadow: 0 4px 10px rgba(0, 0, 0, 0.2);
        z-index: 1001;
        width: 600px;
    }
    .feedback-dialog textarea {
        width: 100%;
        height: 150px;
        margin-top: 10px;
        padding: 10px;
        border: 1px solid #ccc;
        border-radius: 4px;
        resize: vertical;
    }
    .feedback-dialog button {
        margin-top: 10px;
        padding: 8px 16px;
        background-color: #007bff;
        color: white;
        border: none;
        border-radius: 4px;
        cursor: pointer;
    }
    .feedback-dialog button:hover {
        background-color: #0056b3;
    }

    
    
</style>


    <style>
    /* ====================== é€‰æ‹©å™¨æ ·å¼ ====================== */
    /* é€‰æ‹©å™¨å®¹å™¨ */
    .selector-container {
        margin: 8px 0;
        display: flex;
        justify-content: flex-start;
        align-items: center;
    }
    
    /* ç‰ˆæœ¬é€‰æ‹©å™¨ç‰¹æ®Šè¾¹è· */
    .version-selector-container {
        margin-bottom: 8px !important;
    }
    
    /* é€‰æ‹©å™¨æ ‡ç­¾ */
    .selector-label {
        color: white;
        margin-right: 10px;
        width: 80px;
        text-align: right;
        font-size: 0.9em;
    }
    
    /* ä¸‹æ‹‰é€‰æ‹©æ¡† */
    .selector-dropdown {
        width: 120px;
        border-radius: 2px;
        padding: 4px 8px;
        border: 1px solid #405261;
        background: #2c3e50;
        color: white;
        font-size: 0.9em;
    }
    
    /* ä¸‹æ‹‰é€‰æ‹©æ¡†æ‚¬åœæ•ˆæœ */
    .selector-dropdown:hover {
        border-color: #3498db;
        transition: border-color 0.3s;
    }
    
    /* é€‰æ‹©å™¨å“åº”å¼å¸ƒå±€ */
    @media (max-width: 768px) {
        .selector-container {
            flex-direction: column;
            align-items: flex-start;
        }
        
        .selector-label {
            width: 100%;
            text-align: left;
            margin-bottom: 4px;
        }
        
        .selector-dropdown {
            width: 100%;
        }
    }
</style>
    <style>
/* =============== å·¦ä¸Šè§’ç™»å½•åŒºåŸŸ  =============== */
/* ================= ç”¨æˆ·é¢æ¿ ================= */
.user-panel {
    padding: 15px;
    background: #34495e;
    border-radius: 8px;
    margin-bottom: 20px;
}

.username {
    color: #fff;
    font-weight: 500;
    font-size: 1.1em;
    text-align: center;
    margin: 10px 0;
}

/* ================= æŒ‰é’®å®¹å™¨ ================= */
.button-row {
    display: flex;
    gap: 8px;
    width: 100%;
    margin: 10px 0;
}

/* é€šç”¨æŒ‰é’®æ ·å¼ */
.auth-btn, .forum-btn, .official-btn {
    flex: 1;
    padding: 8px;
    border: none;
    border-radius: 4px;
    cursor: pointer;
    transition: opacity 0.3s;
    text-align: center;
    color: white !important;
}

/* è®¤è¯æŒ‰é’® */
.auth-btn {
    background: #3498db;
}

/* è®ºå›æŒ‰é’® */
.forum-btn {
    background: #9b59b6; /* ä¸å‚è€ƒä»£ç çš„å®˜æ–¹æŒ‰é’®åŒè‰² */
}

/* å®˜ç½‘æŒ‰é’® */
.official-btn {
    background: #2ecc71; /* ä¸å‚è€ƒä»£ç æ–‡æ¡£æŒ‰é’®åŒè‰² */
}
/* =============== å·¦ä¸Šè§’ç™»å½•åŒºåŸŸ  =============== */
</style>

    <!-- æ³¨å…¥ TOC æ˜ å°„å’Œå½“å‰é¡µé¢ä¿¡æ¯ -->
    

<!-- TOC æ˜ å°„å’Œå½“å‰æ–‡æ¡£ä¿¡æ¯ -->
<script>
// å°† Python å­—å…¸è½¬æ¢ä¸º JS å¯¹è±¡
const TOC_TITLE_MAP = {"rst_rtos/0_ameba_product": "Products Center", "rst_rtos/0_ameba_product/0_ameba_product_center_index": "Products Center", "rst_rtos/0_ameba_sdk": "Ameba SDK", "rst_rtos/0_ameba_sdk/0_ameba_sdks_index": "Ameba SDK", "rst_rtos/0_ameba_solutions": "Ameba Solutions", "rst_rtos/0_ameba_solutions/0_ameba_solutions_index": "Ameba Solutions", "rst_rtos/0_at_command": "0.8 AT Commands", "rst_rtos/0_at_command/0_at_command_index": "0.8 AT Commands", "rst_rtos/0_file_system": "0.9 Virtual File System", "rst_rtos/0_file_system/0_vfs_index": "0.9 Virtual File System", "rst_rtos/0_ftl": "0.a Flash Translation Layer", "rst_rtos/0_ftl/0_ftl_index": "0.a Flash Translation Layer", "rst_rtos/0_gcc_build_environment": "0.1 GCC Build Environment", "rst_rtos/0_gcc_build_environment/0_gcc_build_index": "0.1 GCC Build Environment", "rst_rtos/0_gcc_build_library": "0.3 GCC Build Library", "rst_rtos/0_gcc_build_library/0_gcc_build_library_index": "0.3 GCC Build Library", "rst_rtos/0_gdb_debug": "0.2 GDB Debug", "rst_rtos/0_gdb_debug/0_gdb_debug_index": "0.2 GDB Debug", "rst_rtos/0_memory_layout": "0.5 Flash \u0026 RAM Layout", "rst_rtos/0_memory_layout/0_layout_index": "0.5 Flash \u0026 RAM Layout", "rst_rtos/0_sdk_example": "0.4 SDK Example", "rst_rtos/0_sdk_example/0_sdk_example_index": "0.4 SDK Example", "rst_rtos/0_tools": "0.7 Tools", "rst_rtos/0_tools/0_tools_index": "0.7 Tools", "rst_rtos/0_user_config": "0.6 User Config", "rst_rtos/0_user_config/0_usrcfg_index": "0.6 User Config", "rst_rtos/10_api_docs": "10.0 API Reference", "rst_rtos/10_api_docs/0_api_index": "10.0 API Reference", "rst_rtos/1_boot_process": "1.1 BOOT Process", "rst_rtos/1_boot_process/0_boot_index": "1.1 BOOT Process", "rst_rtos/1_chipen": "1.4 Chip Enable", "rst_rtos/1_chipen/0_chipen_index": "1.4 Chip Enable", "rst_rtos/1_gpio": "1.7 GPIO \u0026 Pin Control", "rst_rtos/1_gpio/0_gpio_index": "1.7 GPIO \u0026 Pin Control", "rst_rtos/1_ipc": "1.5 Inter Processor Communication", "rst_rtos/1_ipc/0_ipc_index": "1.5 Inter Processor Communication", "rst_rtos/1_mpu_cache": "1.0 MPU and Cache", "rst_rtos/1_mpu_cache/0_mpu_cache_index": "1.0 MPU and Cache", "rst_rtos/1_ota": "1.2 OTA", "rst_rtos/1_ota/0_ota_index": "1.2 OTA", "rst_rtos/1_otpc": "1.3 OTPC", "rst_rtos/1_otpc/0_otpc_index": "1.3 OTPC", "rst_rtos/1_pinmux": "1.6 Pin Multiplexing", "rst_rtos/1_pinmux/0_pinmux_index": "1.6 Pin Multiplexing", "rst_rtos/1_power_save": "1.9 Power Save", "rst_rtos/1_power_save/0_ps_index": "1.9 Power Save", "rst_rtos/2_whc_fullmac": "2.1 WHC FullMAC", "rst_rtos/2_whc_fullmac/0_fullmac_index": "2.1 WHC FullMAC", "rst_rtos/2_whc_wifi_bridge": "2.0 WHC Bridge", "rst_rtos/2_whc_wifi_bridge/0_wifi_bridge_index": "2.0 WHC Bridge", "rst_rtos/2_wifi_adaptivity_test": "2.4 Wi-Fi Adaptivity Test", "rst_rtos/2_wifi_adaptivity_test/0_wifi_adaptivity_index": "2.4 Wi-Fi Adaptivity Test", "rst_rtos/2_wifi_csi": "2.3 Wi-Fi CSI", "rst_rtos/2_wifi_csi/0_wifi_csi_index": "2.3 Wi-Fi CSI", "rst_rtos/2_wifi_tunnel": "2.2 Wi-Fi R-Mesh", "rst_rtos/2_wifi_tunnel/0_wifi_tunnel_index": "2.2 Wi-Fi R-Mesh", "rst_rtos/3_ap_trustzone": "3.d AP Secure Service", "rst_rtos/3_ap_trustzone/0_ap_tz_index": "3.d AP Secure Service", "rst_rtos/3_crypto_engine": "3.9 Crypto Engine", "rst_rtos/3_crypto_engine/0_crypto_engine_index": "3.9 Crypto Engine", "rst_rtos/3_ecdsa_engine": "3.a ECDSA Engine", "rst_rtos/3_ecdsa_engine/0_ecdsa_index": "3.a ECDSA Engine", "rst_rtos/3_eddsa_engine": "3.b EDDSA Engine", "rst_rtos/3_eddsa_engine/0_eddsa_index": "3.b EDDSA Engine", "rst_rtos/3_nda_huk_derivation": "3.3 HUK Derivation \ud83d\udd12", "rst_rtos/3_nda_huk_derivation/0_huk_derivation_index_nda": "3.3 HUK Derivation \ud83d\udd12", "rst_rtos/3_nda_rdp": "3.4 RDP \ud83d\udd12", "rst_rtos/3_nda_rdp/0_rdp_index_nda": "3.4 RDP \ud83d\udd12", "rst_rtos/3_nda_rsip": "3.5 RSIP \ud83d\udd12", "rst_rtos/3_nda_rsip/0_rsip_index_nda": "3.5 RSIP \ud83d\udd12", "rst_rtos/3_nda_secure_boot": "3.6 Secure Boot \ud83d\udd12", "rst_rtos/3_nda_secure_boot/0_secure_boot_index_nda": "3.6 Secure Boot \ud83d\udd12", "rst_rtos/3_nda_swd_protection": "3.7 SWD Protection \ud83d\udd12", "rst_rtos/3_nda_swd_protection/0_swd_protection_index_nda": "3.7 SWD Protection \ud83d\udd12", "rst_rtos/3_nda_tfm": "3.8 Trusted Firmware-M (TF-M) \ud83d\udd12", "rst_rtos/3_nda_tfm/0_tfm_index_nda": "3.8 Trusted Firmware-M (TF-M) \ud83d\udd12", "rst_rtos/3_rsa_engine": "3.c RSA Engine", "rst_rtos/3_rsa_engine/0_rsa_index": "3.c RSA Engine", "rst_rtos/3_security": "3.1 Security \u0026 Encryption", "rst_rtos/3_security/0_security_index": "3.1 Security \u0026 Encryption", "rst_rtos/3_trng": "3.2 True Random Number Generator", "rst_rtos/3_trng/0_trng_index": "3.2 True Random Number Generator", "rst_rtos/4_ai": "4.1 AI", "rst_rtos/4_ai/0_ai_index": "4.1 AI", "rst_rtos/4_ai_voice": "4.2 AIVoice", "rst_rtos/4_ai_voice/0_ai_voice_index": "4.2 AIVoice", "rst_rtos/4_dsp": "4.4 DSP", "rst_rtos/4_dsp/0_dsp_index": "4.4 DSP", "rst_rtos/4_multimedia": "4.3 Multimedia", "rst_rtos/4_multimedia/0_multimedia_index": "4.3 Multimedia", "rst_rtos/6_mass_production": "6.1 Mass Production", "rst_rtos/6_mass_production/0_mp_index": "6.1 Mass Production", "rst_rtos/6_mptools": "6.2 MP Tools", "rst_rtos/6_mptools/0_mptools_index": "6.2 MP Tools", "rst_rtos/7_usb": "7.1 USB Host \u0026 Device", "rst_rtos/7_usb/0_usb_index": "7.1 USB Host \u0026 Device", "rst_rtos/8_adc": "8.4 ADC", "rst_rtos/8_adc/0_adc_index": "8.4 ADC", "rst_rtos/8_cap_touch": "8.7 Cap-Touch", "rst_rtos/8_cap_touch/0_cap_touch_index": "8.7 Cap-Touch", "rst_rtos/8_dmac": "8.1 DMA Controller", "rst_rtos/8_dmac/0_dmac_index": "8.1 DMA Controller", "rst_rtos/8_ir": "8.5 IR", "rst_rtos/8_ir/0_ir_index": "8.5 IR", "rst_rtos/8_key_scan": "8.8 Key-Scan", "rst_rtos/8_key_scan/0_key_scan_index": "8.8 Key-Scan", "rst_rtos/8_lcdc": "8.a LCD Controller", "rst_rtos/8_lcdc/0_lcdc_index": "8.a LCD Controller", "rst_rtos/8_ledc": "8.6 LED Controller", "rst_rtos/8_ledc/0_ledc_index": "8.6 LED Controller", "rst_rtos/8_psram": "8.2 PSRAM", "rst_rtos/8_psram/0_psram_index": "8.2 PSRAM", "rst_rtos/8_rtc_io": "8.9 RTC-IO", "rst_rtos/8_rtc_io/0_rtc_io_index": "8.9 RTC-IO", "rst_rtos/8_thermal": "8.3 Thermal Meter", "rst_rtos/8_thermal/0_thermal_index": "8.3 Thermal Meter"};
console.log("TOC_TITLE_MAP:", TOC_TITLE_MAP);

// è·å–å½“å‰é¡µé¢çš„æ–‡æ¡£å (ä¾‹å¦‚ 'rst_rtos/3_nda_secure_boot/0_secure_boot_index_nda')
const CURRENT_DOCNAME = 'rst_rtos/8_psram/1_psram_toprst';

// åŠ¨æ€æŸ¥æ‰¾é¡¶çº§åˆ†ç±»å‡½æ•°ï¼ˆå®šä¹‰ä¸ºå…¨å±€å‡½æ•°ï¼‰
window.findTopLevelChapter = function(docname) {
    console.log("Attempting to find top-level chapter for:", docname);
    let bestMatch = "";
    let bestTitle = "Unknown Chapter";

    // æŒ‰è·¯å¾„é•¿åº¦é™åºæ’åºä»¥ç¡®ä¿æœ€é•¿åŒ¹é…
    const sortedPaths = Object.keys(TOC_TITLE_MAP).sort((a, b) => b.length - a.length);

    for (const path of sortedPaths) {
        console.log("Checking path:", path);
        if (docname === path || docname.startsWith(path + '/')) { // å­é¡µé¢
            bestMatch = path;
            bestTitle = TOC_TITLE_MAP[path];
            console.log("Matched path:", path, "with title:", bestTitle);
            break;
        }
    }

    // å¦‚æœæ²¡æœ‰æ‰¾åˆ°ä»»ä½•åŒ¹é…é¡¹ï¼Œåˆ™å°è¯•æ›´çŸ­çš„è·¯å¾„
    if (bestMatch === "") {
        const pathSegments = docname.split('/');
        while (pathSegments.length > 1) { // è‡³å°‘ä¿ç•™æ ¹è·¯å¾„
            const candidate = pathSegments.join('/');
            console.log("Checking shorter path:", candidate);
            if (TOC_TITLE_MAP[candidate]) {
                bestTitle = TOC_TITLE_MAP[candidate];
                console.log("Matched shorter path:", candidate, "with title:", bestTitle);
                break;
            }
            pathSegments.pop();
        }
    }

    console.log("Final top-level chapter:", bestTitle);
    return bestTitle;
}

// åˆå§‹åŒ–æ—¶è°ƒç”¨
document.addEventListener('DOMContentLoaded', function() {
    const topLevelChapter = findTopLevelChapter(CURRENT_DOCNAME);
    console.log("Top Level Chapter:", topLevelChapter);

    // å°†é¡¶çº§åˆ†ç±»æ’å…¥åˆ°DOMä¸­ï¼ˆæ ¹æ®éœ€è¦ï¼‰
    const chapterElement = document.createElement('div');
    chapterElement.className = 'top-level-chapter';
    chapterElement.innerHTML = `<strong>Top Level Chapter: </strong>${topLevelChapter}`;
    document.body.appendChild(chapterElement);
});
</script>

    <!-- é—®é¢˜å›æŠ¥ -->
    <!-- source/_templates/_layout_issue_report.html -->
<div id="prompt-box" style="
    display: none;
    position: fixed;
    top: 20px;
    left: 50%;
    transform: translateX(-50%);
    background: rgba(0,0,0,0.8);
    color: white;
    padding: 10px 20px;
    border-radius: 5px;
    z-index: 9999;
    text-align: center;
    font-size: 14px;
"></div>

<script>
document.addEventListener('DOMContentLoaded', function() {
    'use strict'; // æ·»åŠ ä¸¥æ ¼æ¨¡å¼

    // è·å–æ‰€æœ‰DOMå…ƒç´ å¼•ç”¨
    const reportButton = document.getElementById('report-button');
    const feedbackDialog = document.getElementById('feedback-dialog');
    const feedbackText = document.getElementById('inquire_input');
    const submitButton = document.getElementById('submit-feedback');
    const cancelButton = document.getElementById('cancel-feedback');
    const promptBox = document.getElementById('prompt-box');
    const chapterSelect = document.getElementById('chapter-select');
    const paragraphInput = document.getElementById('paragraph-input');
    const postTypeSelect = document.getElementById('post-type');
    console.log('å¸–å­ç±»å‹(postTypeSelect)DOMå…ƒç´ :', postTypeSelect); // åº”è¾“å‡º<select>å…ƒç´ 

    // çŠ¶æ€å˜é‡
    let hasUserInput = false; // è·Ÿè¸ªç”¨æˆ·æ˜¯å¦ä¸»åŠ¨è¾“å…¥
    let selectedText = '';
    const language = 'en'; // ä»æ¨¡æ¿å¼•æ“è·å–è¯­è¨€å˜é‡

    // åˆå§‹åŒ–æ—¶è®¾ç½®placeholder
    paragraphInput.placeholder = language === 'zh_CN' 
        ? 'ä½ å¯ä»¥å…ˆé€‰æ‹©æœ‰é—®é¢˜çš„æ®µè½æˆ–æ‰‹åŠ¨è¾“å…¥...'
        : 'You can select text or type directly here...';

    // è·å–å½“å‰æ¿€æ´»çš„ç« èŠ‚
    function getCurrentChapter() {
        try {
            // é€šè¿‡æ¿€æ´»çš„èœå•é¡¹è·å–å½“å‰ç« èŠ‚
            const currentLink = document.querySelector('.wy-menu .toctree-l1.current > a');
            if (currentLink) {
                return currentLink.textContent.replace('Â¶', '').trim();
            }

            // å¦‚æœæ²¡æœ‰æ‰¾åˆ°æ¿€æ´»çš„é“¾æ¥ï¼Œå°è¯•é€šè¿‡é¡µé¢æ ‡é¢˜è·å–
            const pageTitle = document.querySelector('h1');
            if (pageTitle) {
                return pageTitle.textContent.split('\n')[0].trim();
            }

            // å¦‚æœä»¥ä¸Šæ–¹æ³•éƒ½å¤±è´¥ï¼Œå°è¯•é€šè¿‡URLè·¯å¾„æ¨æ–­ç« èŠ‚
            const pathParts = window.location.pathname.split('/');
            if (pathParts.length > 2) {
                return decodeURIComponent(pathParts[pathParts.length - 2]);
            }

            return null;
        } catch (error) {
            console.error('è·å–å½“å‰ç« èŠ‚å¤±è´¥:', error);
            return null;
        }
    }

    // å¡«å……ç« èŠ‚é€‰æ‹©æ¡†
    function populateChapters() {
        const chapterElements = document.querySelectorAll('.wy-menu .toctree-l1 > a');
        const chapters = Array.from(chapterElements).map(el => el.textContent.replace('Â¶', '').trim());
        const currentChapter = getCurrentChapter();

        console.log('æå–å…¨éƒ¨ç« èŠ‚:', chapters);
        console.log('å½“å‰é¡µé¢ç« èŠ‚:', currentChapter);

        if (chapters.length === 0) {
            console.error('æœªæ‰¾åˆ°ç« èŠ‚é“¾æ¥');
            return;
        }

        chapterSelect.innerHTML = '';

        // æ·»åŠ é»˜è®¤é€‰é¡¹
        const defaultOption = document.createElement('option');
        defaultOption.value = '';
        defaultOption.textContent = language === 'zh_CN' ? '-- è¯·é€‰æ‹©ç« èŠ‚ --' : '-- Select Chapter --';
        chapterSelect.appendChild(defaultOption);

        // æ·»åŠ ç« èŠ‚é€‰é¡¹
        chapters.forEach(chapter => {
            const option = document.createElement('option');
            option.value = chapter;
            option.textContent = chapter;
            if (chapter === currentChapter) {
                option.selected = true;
            }
            chapterSelect.appendChild(option);
        });
    }

    // åˆå§‹åŒ–ç« èŠ‚é€‰æ‹©æ¡†
    populateChapters();

    // æŠ¥å‘ŠæŒ‰é’®ç‚¹å‡»äº‹ä»¶ï¼ˆå¤„ç†æ–‡æœ¬é€‰æ‹©ï¼‰
    reportButton.addEventListener('click', function() {
        // é‡ç½®æ‰€æœ‰è¾“å…¥å­—æ®µï¼Œæ¯æ¬¡é‡æ–°inquireåº”è¯¥è®©å¯¹è¯æ¡†å¤„äºé»˜è®¤çŠ¶æ€
        feedbackText.value = '';          // æ¸…ç©ºé—®é¢˜è¾“å…¥æ¡†
        paragraphInput.value = '';        // æ¸…ç©ºæ®µè½è¾“å…¥æ¡†
        selectedText = '';                // æ¸…é™¤ä¹‹å‰é€‰æ‹©çš„æ–‡æœ¬

        const selection = window.getSelection().toString().trim();
        if (selection) {
            paragraphInput.value = selection;
        } else {
            // ä¿æŒplaceholderæç¤º
            if (!paragraphInput.value.trim()) {
                paragraphInput.value = '';
            }
        }
        feedbackDialog.style.display = 'block';
    });

    // ç›‘å¬è¾“å…¥äº‹ä»¶
    paragraphInput.addEventListener('input', function() {
        // æ ‡è®°ç”¨æˆ·å·²ç»è¾“å…¥
        this.placeholder = '';
    });

    // æäº¤æŒ‰é’®ç‚¹å‡»äº‹ä»¶
    submitButton.addEventListener('click', function() {
        const userQuestion = feedbackText.value.trim();
        const selectedChapter = chapterSelect.value;
        const selectedPostType = postTypeSelect.value;
        const paragraphContent = paragraphInput.value.trim() || 'null';

        // åœ¨æäº¤äº‹ä»¶é¡¶éƒ¨æ·»åŠ è¯¦ç»†æ—¥å¿—
        console.group('=== æäº¤è°ƒè¯•ä¿¡æ¯ ===');
        console.log('ç« èŠ‚é€‰æ‹©å€¼:', chapterSelect.value);
        console.log('å¸–å­ç±»å‹postTypeSelect DOMå…ƒç´ :', postTypeSelect);
        console.log('å¸–å­ç±»å‹postTypeSelect é€‰ä¸­çš„é€‰é¡¹:', postTypeSelect.options[postTypeSelect.selectedIndex]);
        console.log('å¸–å­ç±»å‹postTypeSelect å®é™…å€¼:', postTypeSelect.value); // åº”è¾“å‡º'doc_correction' å¯¹åº”æ–‡æ¡£çº é”™
          console.groupEnd();

        // éªŒè¯è¾“å…¥
        if (!userQuestion) {
            alert(language === 'zh_CN' ? 'é—®é¢˜æè¿°ä¸ºç©º' : 'Issue description cannot be empty');
            return;
        }
        if (!selectedChapter) {
            alert(language === 'zh_CN' ? 'è¯·é€‰æ‹©ç›¸å…³ç« èŠ‚' : 'Please select a related chapter');
            return;
        }

        if (!selectedPostType) {
            alert(language === 'zh_CN' ? 'è¯·é€‰æ‹©å¸–å­ç±»å‹' : 'Please select a post type');
            return;
        }

        // è·å–ç”¨æˆ·å
        const username = localStorage.getItem('username') || 'Anonymous';

        // æ„å»ºæäº¤æ•°æ®
        const feedbackData = {
            user: username,
            chapters: selectedChapter,
            post_type: selectedPostType,
            paragraph: paragraphContent,
            question: userQuestion
        };

        console.log('å®Œæ•´æäº¤æ•°æ®:', feedbackData);

        // å‘é€åˆ°åç«¯
        fetch('http://172.29.57.206:5000/submit', {
            method: 'POST',
            headers: { 'Content-Type': 'application/json' },
            body: JSON.stringify(feedbackData)
        })
        .then(response => {
            if (!response.ok) throw new Error('Network response was not ok');
            return response.json();
        })
        .then(data => {
            console.log('æäº¤æˆåŠŸ:', data);
            promptBox.textContent = language === 'zh_CN' ? 'é—®é¢˜å·²æˆåŠŸæäº¤' : 'Issue submitted successfully';
            promptBox.style.display = 'block';
            setTimeout(() => promptBox.style.display = 'none', 5000);
        })
        .catch(error => {
            console.error('æäº¤å¤±è´¥:', error);
            promptBox.textContent = language === 'zh_CN' ? 'æäº¤å¤±è´¥ï¼Œè¯·æ£€æŸ¥ç½‘ç»œè¿æ¥' : 'Submission failed, check your network';
            promptBox.style.display = 'block';
            setTimeout(() => promptBox.style.display = 'none', 5000);
        });

        // å…³é—­å¯¹è¯æ¡†
        feedbackDialog.style.display = 'none';
    });


    // å–æ¶ˆæŒ‰é’®ç‚¹å‡»äº‹ä»¶
    cancelButton.addEventListener('click', function() {
        feedbackDialog.style.display = 'none';
    });

    // åˆå§‹åŒ–æ£€æŸ¥
    console.log('é—®é¢˜åé¦ˆç³»ç»Ÿå·²åŠ è½½');
    console.log('å½“å‰è¯­è¨€:', language);
    console.log('æ£€æµ‹åˆ°ç« èŠ‚æ•°é‡:', chapterSelect.options.length - 1);
});
</script>

    <style>
        /* éšè—æ•´ä¸ªæœç´¢æ å®¹å™¨ */
        .wy-side-nav-search > div[role="search"] {
            display: none !important;
        }

        /* æˆ–è€…æ›´ç²¾ç¡®åœ°éšè—è¡¨å• */
        form#rtd-search-form {
            display: none !important;
        }
    </style>

    <!-- å¼•å…¥åŠŸèƒ½æ¨¡å— -->
    
<script>
    /* ====================== åµŒå…¥å¼é…ç½®å¼€å§‹ ====================== */
    const embeddedConfig = {
        "freertos": {
            "name": "FreeRTOS",
            "languages": {
                "en": ["latest"],
                "cn": ["latest"]
            }
        },
        "linux": {
            "name": "Linux",
            "languages": {
                "en": ["latest"],
                "cn": ["latest"]
            }
        }
    };
    /* ====================== åµŒå…¥å¼é…ç½®ç»“æŸ ====================== */
</script>
    
<script>
    // è·å–åŸºç¡€URLè·¯å¾„
    function getBaseURL() {
        const url = new URL(window.location.href);
        if (url.protocol === 'file:') {
            // æœ¬åœ°è·¯å¾„å¤„ç†
            const pathParts = url.pathname.split('/').filter(part => part !== '');
            const index = pathParts.indexOf('build');
            return `file://${pathParts.slice(0, index + 1).join('/')}/`;
        } else {
            // ç½‘ç»œè·¯å¾„å¤„ç†
            return `${url.origin}/${url.pathname.split('/').slice(1, 3).join('/')}/`;
        }
    }

    // è·å–å½“å‰URLè·¯å¾„åˆ†æ®µ
    function getCurrentSegments() {
        const url = new URL(window.location.href);
        let segments = url.pathname.split('/').filter(segment => segment);

        if (url.protocol === 'file:') {
            // æœ¬åœ°è·¯å¾„å¤„ç†
            const index = segments.indexOf('build');
            segments = segments.slice(index + 1); // å»æ‰ build åŠä¹‹å‰çš„è·¯å¾„
        } else {
            // ç½‘ç»œè·¯å¾„å¤„ç†
            segments = segments.slice(3); // å»æ‰ ameba-iot-docs/
        }

        return {
            osKey: segments[0] || 'freertos', // é»˜è®¤ä¸º freertos
            language: segments[1] || 'en',   // é»˜è®¤ä¸º en
            version: segments[2] || 'latest' // é»˜è®¤ä¸º latest
        };
    }
</script>
    
<script>
    // è·å–OSæ˜¾ç¤ºåç§°åˆ—è¡¨
    function getOSNames(data) {
        return Object.keys(data).map(key => data[key].name);
    }

    // è·å–æŒ‡å®šOSçš„è¯­è¨€åˆ—è¡¨
    function getLanguages(data, osKey) {
        return Object.keys(data[osKey]?.languages || {});
    }

    // è·å–æŒ‡å®šOSå’Œè¯­è¨€çš„ç‰ˆæœ¬åˆ—è¡¨
    function getVersions(data, osKey, language) {
        return data[osKey]?.languages?.[language] || ['latest'];
    }

    // æ ¹æ®æ˜¾ç¤ºåç§°æŸ¥æ‰¾OSé”®
    function findOSKey(data, displayName) {
        return Object.keys(data).find(key => data[key].name === displayName);
    }
</script>
    
<script>
    // éªŒè¯å¹¶ä¿®æ­£è·¯å¾„å‚æ•°
    function validateSegments(segments) {
        const currentOSName = embeddedConfig[segments.osKey]?.name;

        // å¦‚æœ OS æ— æ•ˆï¼Œé»˜è®¤è®¾ç½®ä¸º FreeRTOS
        if (!currentOSName) {
            console.warn("Invalid OS key, defaulting to FreeRTOS");
            segments.osKey = 'freertos';
        }

        // å¦‚æœè¯­è¨€æ— æ•ˆï¼Œé»˜è®¤è®¾ç½®ä¸º en
        if (!getLanguages(embeddedConfig, segments.osKey).includes(segments.language)) {
            console.warn("Invalid language, defaulting to en");
            segments.language = 'en';
        }

        return segments;
    }

    // ç”Ÿæˆé€‰æ‹©å™¨HTML
    function generateSelectorsHTML(segments) {
        return `
            <div id="custom-selectors" style="padding: 0; background: none; border: none;">
                <!-- ç³»ç»Ÿé€‰æ‹©å™¨ -->
                <div class="selector-container">
                    <label class="selector-label">
                        ${segments.language === 'cn' ? 'ç³»ç»Ÿ' : 'OS'}:
                    </label>
                    <select id="os-selector" class="selector-dropdown">
                        ${Object.keys(embeddedConfig).map(key => `
                            <option value="${key}">${embeddedConfig[key].name}</option>
                        `).join('')}
                    </select>
                </div>

                <!-- è¯­è¨€é€‰æ‹©å™¨ -->
                <div class="selector-container">
                    <label class="selector-label">
                        ${segments.language === 'cn' ? 'è¯­è¨€' : 'Language'}:
                    </label>
                    <select id="language-selector" class="selector-dropdown">
                        ${getLanguages(embeddedConfig, segments.osKey).map(lang => `
                            <option value="${lang}">${lang}</option>
                        `).join('')}
                    </select>
                </div>

                <!-- ç‰ˆæœ¬é€‰æ‹©å™¨ -->
                <div class="selector-container version-selector-container">
                    <label class="selector-label">
                        ${segments.language === 'cn' ? 'ç‰ˆæœ¬' : 'Version'}:
                    </label>
                    <select id="version-selector" class="selector-dropdown">
                        ${getVersions(embeddedConfig, segments.osKey, segments.language).map(ver => `
                            <option value="${ver}">${ver}</option>
                        `).join('')}
                    </select>
                </div>

                ${generateUserPanelHTML(segments)}
            </div>`;
    }

    // ç”Ÿæˆç”¨æˆ·é¢æ¿HTML
    function generateUserPanelHTML(segments) {
        return `
            <div class="user-panel">
                <!-- ç”¨æˆ·åæ˜¾ç¤ºï¼ˆç™»å½•åå¯è§ï¼‰ -->
                <div id="user-info" style="display: ${localStorage.getItem('isLoggedIn') ? 'block' : 'none'}">
                    <span id="username-display" class="username">${localStorage.getItem('username') || ''}</span>
                </div>

                <!-- ç™»å½•æ³¨å†ŒæŒ‰é’®ï¼ˆæœªç™»å½•æ—¶å¯è§ï¼‰ -->
                <div id="auth-buttons" class="button-row" style="display: ${localStorage.getItem('isLoggedIn') ? 'none' : 'flex'}">
                    <button class="auth-btn" id="register-button">${segments.language === 'cn' ? 'æ³¨å†Œ' : 'Register'}</button>
                    <button class="auth-btn" id="login-button">${segments.language === 'cn' ? 'ç™»å½•' : 'Login'}</button>
                </div>

                <!-- å¤–é“¾æŒ‰é’®ï¼ˆå§‹ç»ˆå¯è§ï¼‰ -->
                <div class="button-row">
                    <button class="official-btn" onclick="window.open('https://www.realmcu.com/', '_blank')">
                        ${segments.language === 'cn' ? 'å®˜ç½‘' : 'Official'}
                    </button>
                    <button class="forum-btn" onclick="window.open('http://172.29.57.206:5000/view', '_blank')">
                        ${segments.language === 'cn' ? 'è®ºå›' : 'Forum'}
                    </button>
                </div>
            </div>
        `;
    }

    // è®¾ç½®åˆå§‹é€‰ä¸­å€¼
    function setInitialValues(segments) {
        document.getElementById('os-selector').value = segments.osKey;
        document.getElementById('language-selector').value = segments.language;

        const versionSelector = document.getElementById('version-selector');
        const availableVersions = getVersions(embeddedConfig, segments.osKey, segments.language);
        versionSelector.value = availableVersions.includes(segments.version) ? segments.version : availableVersions[0] || 'latest';
    }
</script>
    
<script>
    // ç»‘å®šäº‹ä»¶ç›‘å¬
    function bindEvents(baseURL, segments) {
        document.getElementById('os-selector').addEventListener('change', () => {
            const newOSKey = document.getElementById('os-selector').value;
            const availableLangs = getLanguages(embeddedConfig, newOSKey);
            const defaultLang = availableLangs[0] || 'en';
            const defaultVersion = getVersions(embeddedConfig, newOSKey, defaultLang)[0] || 'latest';
            redirectTo(`${baseURL}${newOSKey}/${defaultLang}/${defaultVersion}/`);
        });

        document.getElementById('language-selector').addEventListener('change', () => {
            const newLang = document.getElementById('language-selector').value;
            const defaultVersion = getVersions(embeddedConfig, segments.osKey, newLang)[0] || 'latest';
            redirectTo(`${baseURL}${segments.osKey}/${newLang}/${defaultVersion}/`);
        });

        document.getElementById('version-selector').addEventListener('change', () => {
            const newVer = document.getElementById('version-selector').value;
            redirectTo(`${baseURL}${segments.osKey}/${segments.language}/${newVer}/`);
        });
    }

    // è·³è½¬å‡½æ•°
    function redirectTo(path) {
        const url = new URL(path, window.location.href);
        if (url.protocol === 'file:') {
            url.pathname += 'index.html';
        }
        window.location.href = url.href;
    }
</script>
    
<script>
    // åˆå§‹åŒ–è®¤è¯å¯¹è¯æ¡†
    function initAuthDialogs() {
        function createAuthDialog(type) {
            const lang = document.getElementById('language-selector').value === 'cn' ? 'cn' : 'en';

            const dialog = document.createElement('div');
            dialog.style.cssText = `
                position: fixed;
                top: 0;
                left: 0;
                width: 100%;
                height: 100%;
                background: rgba(0,0,0,0.5);
                display: flex;
                justify-content: center;
                align-items: center;
                z-index: 9999;
            `;

            // å¼¹çª—å†…å®¹
            const content = document.createElement('div');
            content.style.cssText = `
                background: white;
                padding: 20px;
                border-radius: 8px;
                min-width: 300px;
            `;

            // æ ‡é¢˜
            const title = document.createElement('h3');
            title.textContent = type === 'register' 
                ? (lang === 'cn' ? 'æ³¨å†Œ' : 'Register') 
                : (lang === 'cn' ? 'ç™»å½•' : 'Login');
            content.appendChild(title);

            // ç”¨æˆ·åè¾“å…¥
            const usernameLabel = document.createElement('label');
            usernameLabel.textContent = lang === 'cn' ? 'ç”¨æˆ·åï¼š' : 'Username:';
            const usernameInput = document.createElement('input');
            usernameInput.style.cssText = 'width: 100%; margin-bottom: 10px; padding: 5px;';
            content.appendChild(usernameLabel);
            content.appendChild(usernameInput);

            // å¯†ç è¾“å…¥
            const passwordLabel = document.createElement('label');
            passwordLabel.textContent = lang === 'cn' ? 'å¯†ç ï¼š' : 'Password:';
            const passwordInput = document.createElement('input');
            passwordInput.type = 'password';
            passwordInput.style.cssText = 'width: 100%; margin-bottom: 10px; padding: 5px;';
            content.appendChild(passwordLabel);
            content.appendChild(passwordInput);

            // æ³¨å†Œæ—¶éœ€è¦ç¡®è®¤å¯†ç 
            let confirmPasswordInput;
            if (type === 'register') {
                const confirmLabel = document.createElement('label');
                confirmLabel.textContent = lang === 'cn' ? 'ç¡®è®¤å¯†ç ï¼š' : 'Confirm Password:';
                confirmPasswordInput = document.createElement('input');
                confirmPasswordInput.type = 'password';
                confirmPasswordInput.style.cssText = 'width: 100%; margin-bottom: 10px; padding: 5px;';
                content.appendChild(confirmLabel);
                content.appendChild(confirmPasswordInput);
            }

            // æŒ‰é’®å®¹å™¨
            const buttonContainer = document.createElement('div');
            buttonContainer.style.cssText = 'display: flex; gap: 10px; margin-top: 10px;';

            // ç¡®è®¤æŒ‰é’®
            const confirmBtn = document.createElement('button');
            confirmBtn.textContent = lang === 'cn' ? 'ç¡®è®¤' : 'Confirm';
            confirmBtn.onclick = () => {
                const username = usernameInput.value.trim();
                const password = passwordInput.value.trim();
                const confirmPassword = confirmPasswordInput ? confirmPasswordInput.value.trim() : null;

                // éªŒè¯è¾“å…¥
                if (!username || !password) {
                    alert(lang === 'cn' ? 'ç”¨æˆ·åå’Œå¯†ç ä¸èƒ½ä¸ºç©ºï¼' : 'Username and password are required!');
                    return;
                }

                if (type === 'register' && password !== confirmPassword) {
                    alert(lang === 'cn' ? 'ä¸¤æ¬¡è¾“å…¥çš„å¯†ç ä¸ä¸€è‡´ï¼' : 'Passwords do not match!');
                    return;
                }

                // flask å‘é€è¯·æ±‚
                fetch('http://172.29.57.206:5000/auth', {
                    method: 'POST',
                    headers: { 'Content-Type': 'application/json' },
                    body: JSON.stringify({
                        action: type,
                        username,
                        password
                    })
                })
                .then(response => response.json())
                .then(data => {
                    if (data.success) {
                        alert(lang === 'cn' ? 'æ“ä½œæˆåŠŸï¼' : 'Success!');
                        // æ›´æ–°æœ¬åœ°å­˜å‚¨å’ŒUI
                        localStorage.setItem('isLoggedIn', 'true');
                        localStorage.setItem('username', username);
                        // å¼ºåˆ¶åˆ·æ–°æ˜¾ç¤ºçŠ¶æ€
                        document.getElementById('auth-buttons').style.display = 'none';
                        document.getElementById('user-info').style.display = 'block';
                        document.getElementById('username-display').textContent = username;
                        document.body.removeChild(dialog);
                    } else {
                        alert(lang === 'cn' ? 'å¤±è´¥ï¼š' + data.message : 'Failed: ' + data.message);
                    }
                })
                .catch(error => {
                    console.error('Error:', error);
                    alert(lang === 'cn' ? 'ç½‘ç»œé”™è¯¯' : 'Network error');
                });
            };

            // å–æ¶ˆæŒ‰é’®
            const cancelBtn = document.createElement('button');
            cancelBtn.textContent = lang === 'cn' ? 'å–æ¶ˆ' : 'Cancel';
            cancelBtn.onclick = () => document.body.removeChild(dialog);

            buttonContainer.appendChild(confirmBtn);
            buttonContainer.appendChild(cancelBtn);
            content.appendChild(buttonContainer);
            dialog.appendChild(content);
            document.body.appendChild(dialog);
        }

        document.getElementById('register-button').addEventListener('click', () => createAuthDialog('register'));
        document.getElementById('login-button').addEventListener('click', () => createAuthDialog('login'));
    }

    // åŒæ­¥ç™»å½•çŠ¶æ€
    function syncLoginState() {
        const isLoggedIn = localStorage.getItem('isLoggedIn') === 'true';
        document.getElementById('auth-buttons').style.display = isLoggedIn ? 'none' : 'flex';
        document.getElementById('user-info').style.display = isLoggedIn ? 'block' : 'none';
        if (isLoggedIn) {
            document.getElementById('username-display').textContent = localStorage.getItem('username') || '';
        }
    }
</script>

</head>

<body class="wy-body-for-nav"> 
  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >
    

          
          
          <a href="../../index.html" class="icon icon-home">
            Ameba IoT Docs
          </a>
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" aria-label="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

    
    <div id="custom-selectors" style="display: block !important; padding: 0; background: none; border: none;">
    </div>

    <script>
    document.addEventListener('DOMContentLoaded', () => {
        try {
            const segments = validateSegments(getCurrentSegments());
            const baseURL = getBaseURL();

            // æ¸²æŸ“HTML
            document.getElementById('custom-selectors').innerHTML = generateSelectorsHTML(segments);

            // è®¾ç½®åˆå§‹å€¼
            setInitialValues(segments);

            // ç»‘å®šäº‹ä»¶
            bindEvents(baseURL, segments);

            // åˆå§‹åŒ–è®¤è¯é€»è¾‘
            initAuthDialogs();
            syncLoginState();
        } catch (error) {
            console.error("Error initializing selectors:", error);
        }
    });
</script>

        </div><div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
              <ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../0_ameba_product/0_ameba_product_center_index.html">Products Center</a></li>
<li class="toctree-l1"><a class="reference internal" href="../0_ameba_sdk/0_ameba_sdks_index.html">Ameba SDK</a></li>
<li class="toctree-l1"><a class="reference internal" href="../0_ameba_solutions/0_ameba_solutions_index.html">Ameba Solutions</a></li>
<li class="toctree-l1"><a class="reference internal" href="../0_gcc_build_environment/0_gcc_build_index.html">0.1 GCC Build Environment</a></li>
<li class="toctree-l1"><a class="reference internal" href="../0_gdb_debug/0_gdb_debug_index.html">0.2 GDB Debug</a></li>
<li class="toctree-l1"><a class="reference internal" href="../0_gcc_build_library/0_gcc_build_library_index.html">0.3 GCC Build Library</a></li>
<li class="toctree-l1"><a class="reference internal" href="../0_sdk_example/0_sdk_example_index.html">0.4 SDK Example</a></li>
<li class="toctree-l1"><a class="reference internal" href="../0_memory_layout/0_layout_index.html">0.5 Flash &amp; RAM Layout</a></li>
<li class="toctree-l1"><a class="reference internal" href="../0_user_config/0_usrcfg_index.html">0.6 User Config</a></li>
<li class="toctree-l1"><a class="reference internal" href="../0_tools/0_tools_index.html">0.7 Tools</a></li>
<li class="toctree-l1"><a class="reference internal" href="../0_at_command/0_at_command_index.html">0.8 AT Commands</a></li>
<li class="toctree-l1"><a class="reference internal" href="../0_file_system/0_vfs_index.html">0.9 Virtual File System</a></li>
<li class="toctree-l1"><a class="reference internal" href="../0_ftl/0_ftl_index.html">0.a Flash Translation Layer</a></li>
<li class="toctree-l1"><a class="reference internal" href="../1_mpu_cache/0_mpu_cache_index.html">1.0 MPU and Cache</a></li>
<li class="toctree-l1"><a class="reference internal" href="../1_boot_process/0_boot_index.html">1.1 BOOT Process</a></li>
<li class="toctree-l1"><a class="reference internal" href="../1_ota/0_ota_index.html">1.2 OTA</a></li>
<li class="toctree-l1"><a class="reference internal" href="../1_otpc/0_otpc_index.html">1.3 OTPC</a></li>
<li class="toctree-l1"><a class="reference internal" href="../1_chipen/0_chipen_index.html">1.4 Chip Enable</a></li>
<li class="toctree-l1"><a class="reference internal" href="../1_ipc/0_ipc_index.html">1.5 Inter Processor Communication</a></li>
<li class="toctree-l1"><a class="reference internal" href="../1_pinmux/0_pinmux_index.html">1.6 Pin Multiplexing</a></li>
<li class="toctree-l1"><a class="reference internal" href="../1_gpio/0_gpio_index.html">1.7 GPIO &amp; Pin Control</a></li>
<li class="toctree-l1"><a class="reference internal" href="../1_power_save/0_ps_index.html">1.9 Power Save</a></li>
<li class="toctree-l1"><a class="reference internal" href="../2_whc_wifi_bridge/0_wifi_bridge_index.html">2.0 WHC Bridge</a></li>
<li class="toctree-l1"><a class="reference internal" href="../2_whc_fullmac/0_fullmac_index.html">2.1 WHC FullMAC</a></li>
<li class="toctree-l1"><a class="reference internal" href="../2_wifi_tunnel/0_wifi_tunnel_index.html">2.2 Wi-Fi R-Mesh</a></li>
<li class="toctree-l1"><a class="reference internal" href="../2_wifi_csi/0_wifi_csi_index.html">2.3 Wi-Fi CSI</a></li>
<li class="toctree-l1"><a class="reference internal" href="../2_wifi_adaptivity_test/0_wifi_adaptivity_index.html">2.4 Wi-Fi Adaptivity Test</a></li>
<li class="toctree-l1"><a class="reference internal" href="../3_security/0_security_index.html">3.1 Security &amp; Encryption</a></li>
<li class="toctree-l1"><a class="reference internal" href="../3_trng/0_trng_index.html">3.2 True Random Number Generator</a></li>
<li class="toctree-l1"><a class="reference internal" href="../3_nda_huk_derivation/0_huk_derivation_index_nda.html">3.3 HUK Derivation ğŸ”’</a></li>
<li class="toctree-l1"><a class="reference internal" href="../3_nda_rdp/0_rdp_index_nda.html">3.4 RDP ğŸ”’</a></li>
<li class="toctree-l1"><a class="reference internal" href="../3_nda_rsip/0_rsip_index_nda.html">3.5 RSIP ğŸ”’</a></li>
<li class="toctree-l1"><a class="reference internal" href="../3_nda_secure_boot/0_secure_boot_index_nda.html">3.6 Secure Boot ğŸ”’</a></li>
<li class="toctree-l1"><a class="reference internal" href="../3_nda_swd_protection/0_swd_protection_index_nda.html">3.7 SWD Protection ğŸ”’</a></li>
<li class="toctree-l1"><a class="reference internal" href="../3_nda_tfm/0_tfm_index_nda.html">3.8 Trusted Firmware-M (TF-M) ğŸ”’</a></li>
<li class="toctree-l1"><a class="reference internal" href="../3_crypto_engine/0_crypto_engine_index.html">3.9 Crypto Engine</a></li>
<li class="toctree-l1"><a class="reference internal" href="../3_ecdsa_engine/0_ecdsa_index.html">3.a ECDSA Engine</a></li>
<li class="toctree-l1"><a class="reference internal" href="../3_eddsa_engine/0_eddsa_index.html">3.b EDDSA Engine</a></li>
<li class="toctree-l1"><a class="reference internal" href="../3_rsa_engine/0_rsa_index.html">3.c RSA Engine</a></li>
<li class="toctree-l1"><a class="reference internal" href="../3_ap_trustzone/0_ap_tz_index.html">3.d AP Secure Service</a></li>
<li class="toctree-l1"><a class="reference internal" href="../4_ai/0_ai_index.html">4.1 AI</a></li>
<li class="toctree-l1"><a class="reference internal" href="../4_ai_voice/0_ai_voice_index.html">4.2 AIVoice</a></li>
<li class="toctree-l1"><a class="reference internal" href="../4_multimedia/0_multimedia_index.html">4.3 Multimedia</a></li>
<li class="toctree-l1"><a class="reference internal" href="../4_dsp/0_dsp_index.html">4.4 DSP</a></li>
<li class="toctree-l1"><a class="reference internal" href="../6_mass_production/0_mp_index.html">6.1 Mass Production</a></li>
<li class="toctree-l1"><a class="reference internal" href="../6_mptools/0_mptools_index.html">6.2 MP Tools</a></li>
<li class="toctree-l1"><a class="reference internal" href="../7_usb/0_usb_index.html">7.1 USB Host &amp; Device</a></li>
<li class="toctree-l1"><a class="reference internal" href="../8_dmac/0_dmac_index.html">8.1 DMA Controller</a></li>
<li class="toctree-l1 current"><a class="reference internal" href="0_psram_index.html">8.2 PSRAM</a><ul class="current">
<li class="toctree-l2 current"><a class="current reference internal" href="#">Introduction</a></li>
<li class="toctree-l2"><a class="reference internal" href="#throughput">Throughput</a></li>
<li class="toctree-l2"><a class="reference internal" href="#boot-from-psram">Boot from PSRAM</a></li>
<li class="toctree-l2"><a class="reference internal" href="#psram-cache-write-back-policy">PSRAM Cache â€œWrite Backâ€ Policy</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#row-hammer">Row Hammer</a></li>
<li class="toctree-l3"><a class="reference internal" href="#notice">Notice</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#cache-operation">Cache Operation</a></li>
<li class="toctree-l4"><a class="reference internal" href="#dma-operation">DMA Operation</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#tcem-setting">TCEM Setting</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../8_thermal/0_thermal_index.html">8.3 Thermal Meter</a></li>
<li class="toctree-l1"><a class="reference internal" href="../8_adc/0_adc_index.html">8.4 ADC</a></li>
<li class="toctree-l1"><a class="reference internal" href="../8_ir/0_ir_index.html">8.5 IR</a></li>
<li class="toctree-l1"><a class="reference internal" href="../8_ledc/0_ledc_index.html">8.6 LED Controller</a></li>
<li class="toctree-l1"><a class="reference internal" href="../8_cap_touch/0_cap_touch_index.html">8.7 Cap-Touch</a></li>
<li class="toctree-l1"><a class="reference internal" href="../8_key_scan/0_key_scan_index.html">8.8 Key-Scan</a></li>
<li class="toctree-l1"><a class="reference internal" href="../8_rtc_io/0_rtc_io_index.html">8.9 RTC-IO</a></li>
<li class="toctree-l1"><a class="reference internal" href="../8_lcdc/0_lcdc_index.html">8.a LCD Controller</a></li>
<li class="toctree-l1"><a class="reference internal" href="../10_api_docs/0_api_index.html">10.0 API Reference</a></li>
</ul>

        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap"><nav class="wy-nav-top" aria-label="Mobile navigation menu" >
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../../index.html">Ameba IoT Docs</a>
      </nav>

      <div class="wy-nav-content">
    
        <div class="rst-content">
          <div role="navigation" aria-label="Page navigation">
  <ul class="wy-breadcrumbs">
      <li><a href="../../index.html" class="icon icon-home" aria-label="Home"></a></li>
          <li class="breadcrumb-item"><a href="0_psram_index.html">Pseudo-Static Random Access Memory (PSRAM)</a></li>
      <li class="breadcrumb-item active">Introduction</li>
      <li class="wy-breadcrumbs-aside">
      </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
             
  <span class="target" id="psram"></span><!-- ä¸‹æ‹‰èœå• -->
<div style="margin: 20px 0; text-align: left;">
    <div style="display: flex; align-items: center; gap: 10px;">
        <span style="font-size: 14px;">IC: </span>
        <select class="tab-selector" style="height: 22px; padding: 2px 8px; font-size: 13px;">
            <option value="RTL8721Dx">RTL8721Dx</option>
            <option value="RTL8720E">RTL8720E</option>
            <option value="RTL8726E">RTL8726E</option>
            <option value="RTL8730E">RTL8730E</option>
        </select>
    </div>
</div>

<!-- ä¿®å¤åçš„ JavaScript -->
<script>
document.addEventListener("DOMContentLoaded", function() {
    const selector = document.querySelector('.tab-selector');

    selector.addEventListener('change', function() {
        const targetTab = this.value;
        const tabs = document.querySelectorAll('.sphinx-tabs-tab');
        let found = false;

        tabs.forEach(tab => {
            const tabText = tab.textContent.trim();
            if (tabText === targetTab) {
                tab.click();
                window.dispatchEvent(new Event('resize')); // è§¦å‘æ’ä»¶æ›´æ–°
                found = true;
            }
        });

        if (!found) {
            console.error("æœªæ‰¾åˆ°é€‰é¡¹å¡:", targetTab);
        }
    });
});
</script><section id="introduction">
<h1>Introduction<a class="headerlink" href="#introduction" title="Link to this heading">ïƒ</a></h1>
<div class="sphinx-tabs docutils container">
<div aria-label="Tabbed content" class="closeable" role="tablist"><button aria-controls="panel-0-0-0" aria-selected="true" class="sphinx-tabs-tab" id="tab-0-0-0" name="0-0" role="tab" tabindex="0">RTL8721Dx</button><button aria-controls="panel-0-0-1" aria-selected="false" class="sphinx-tabs-tab" id="tab-0-0-1" name="0-1" role="tab" tabindex="-1">RTL8720E</button><button aria-controls="panel-0-0-2" aria-selected="false" class="sphinx-tabs-tab" id="tab-0-0-2" name="0-2" role="tab" tabindex="-1">RTL8726E</button><button aria-controls="panel-0-0-3" aria-selected="false" class="sphinx-tabs-tab" id="tab-0-0-3" name="0-3" role="tab" tabindex="-1">RTL8730E</button></div><div aria-labelledby="tab-0-0-0" class="sphinx-tabs-panel" id="panel-0-0-0" name="0-0" role="tabpanel" tabindex="0"><p>Pseudo-Static Random Access Memory (PSRAM) is used for high-speed transmission of the data stream. This chip communicates with PSRAM via PSRAM controller (PSRAMC). PSRAM can be accessed by KM4 and KM0, and supports execution on PSRAM.</p>
<p>The features of PSRAM are:</p>
<ul class="simple">
<li><p>Clock rate: up to 200MHz</p></li>
<li><p>Double Data Rate (DDR)</p></li>
<li><p>Read-Write Data Strobe (DQS)</p></li>
<li><p>Supports Half sleep and deep power-down mode</p></li>
<li><p>Programmable drive strength</p></li>
<li><p>Temperature Compensated Refresh</p></li>
<li><p>16/32/64/128 bytes wrap burst access</p></li>
<li><p>Distributed refresh interval varies with temperature</p></li>
<li><p>Address mapping: 0x6000_0000~0x6040_0000</p></li>
</ul>
</div><div aria-labelledby="tab-0-0-1" class="sphinx-tabs-panel" hidden="true" id="panel-0-0-1" name="0-1" role="tabpanel" tabindex="0"><p>Pseudo-Static Random Access Memory (PSRAM) is used for high-speed transmission of the data stream. This chip communicates with PSRAM via PSRAM controller (PSRAMC). PSRAM can be accessed by KM4 and KR4, and supports execution on PSRAM.</p>
<p>The features of PSRAM are:</p>
<ul class="simple">
<li><p>Clock rate: 150MHz</p></li>
<li><p>Double Data Rate (DDR)</p></li>
<li><p>Read-Write Data Strobe (DQS)</p></li>
<li><p>Supports Half sleep and deep power-down mode</p></li>
<li><p>Programmable drive strength</p></li>
<li><p>Configurable refresh rate</p></li>
<li><p>Temperature Compensated Refresh</p></li>
<li><p>16/32/64/1024 bytes wrap burst access</p></li>
</ul>
</div><div aria-labelledby="tab-0-0-2" class="sphinx-tabs-panel" hidden="true" id="panel-0-0-2" name="0-2" role="tabpanel" tabindex="0"><p>Pseudo-Static Random Access Memory (PSRAM) is used for high-speed transmission of the data stream. This chip communicates with PSRAM via PSRAM controller (PSRAMC). PSRAM can be accessed by KM4, KR4 and DSP, and supports execution on PSRAM.</p>
<p>The features of PSRAM are:</p>
<ul class="simple">
<li><p>Clock rate: 250MHz</p></li>
<li><p>Double Data Rate (DDR)</p></li>
<li><p>Read-Write Data Strobe (DQS)</p></li>
<li><p>Supports Half sleep and deep power-down mode</p></li>
<li><p>Programmable drive strength</p></li>
<li><p>Configurable refresh rate</p></li>
<li><p>Temperature Compensated Refresh</p></li>
<li><p>16/32/64/1024 bytes wrap burst access</p></li>
</ul>
</div><div aria-labelledby="tab-0-0-3" class="sphinx-tabs-panel" hidden="true" id="panel-0-0-3" name="0-3" role="tabpanel" tabindex="0"><p>Pseudo-Static Random Access Memory (PSRAM) is used for high-speed transmission of the data stream. This chip communicates with PSRAM via PSRAM controller (PSRAMC). PSRAM can be accessed by NP, LP and AP, and supports execution on PSRAM.</p>
<p>The features of PSRAM are:</p>
<ul class="simple">
<li><p>Clock rate: 250MHz</p></li>
<li><p>Density: 64M bits</p></li>
<li><p>Double Data Rate (DDR)</p></li>
<li><p>Read-Write Data Strobe (DQS)</p></li>
<li><p>Supports Half sleep and deep power-down mode</p></li>
<li><p>Programmable drive strength</p></li>
<li><p>Configurable refresh rate</p></li>
<li><p>Temperature Compensated Refresh</p></li>
<li><p>16/32/64/1024 bytes wrap burst access</p></li>
<li><p>Address mapping: 0x6000_0000~0x6080_0000</p></li>
</ul>
</div></div>
</section>
<section id="throughput">
<h1>Throughput<a class="headerlink" href="#throughput" title="Link to this heading">ïƒ</a></h1>
<div class="sphinx-tabs docutils container">
<div aria-label="Tabbed content" class="closeable" role="tablist"><button aria-controls="panel-1-1-0" aria-selected="true" class="sphinx-tabs-tab" id="tab-1-1-0" name="1-0" role="tab" tabindex="0">RTL8721Dx</button><button aria-controls="panel-1-1-1" aria-selected="false" class="sphinx-tabs-tab" id="tab-1-1-1" name="1-1" role="tab" tabindex="-1">RTL8720E</button><button aria-controls="panel-1-1-2" aria-selected="false" class="sphinx-tabs-tab" id="tab-1-1-2" name="1-2" role="tab" tabindex="-1">RTL8726E</button><button aria-controls="panel-1-1-3" aria-selected="false" class="sphinx-tabs-tab" id="tab-1-1-3" name="1-3" role="tab" tabindex="-1">RTL8730E</button></div><div aria-labelledby="tab-1-1-0" class="sphinx-tabs-panel" id="panel-1-1-0" name="1-0" role="tabpanel" tabindex="0"><p>PSRAM supports direct access and DMA access. The throughput of PSRAM is listed in the following table.</p>
<table class="docutils align-default" id="id1" style="width: 100%">
<caption><span class="caption-text">Throughput of PSRAM (200MHz)</span><a class="headerlink" href="#id1" title="Link to this table">ïƒ</a></caption>
<tbody>
<tr class="row-odd"><td rowspan="2"><p>Access mode</p></td>
<td colspan="2"><p>Writing 32 bytes</p></td>
<td colspan="2"><p>Reading 32 bytes</p></td>
</tr>
<tr class="row-even"><td><p>Theory</p></td>
<td><p>Test on the KM4</p></td>
<td><p>Theory</p></td>
<td><p>Test on the KM4</p></td>
</tr>
<tr class="row-odd"><td><p>Direct access</p>
<p>(write back)</p>
</td>
<td><p>1523.81Mbps</p></td>
<td><p>(32*8)/(199.68ns)=1282.05Mbps</p></td>
<td><p>1454.55Mbps</p></td>
<td><p>(32*8)/(212.16ns)=1204.14Mbps</p></td>
</tr>
<tr class="row-even"><td><p>DMA access</p></td>
<td><p>2206.9Mbps</p></td>
<td><p>1641.03Mbps</p></td>
<td><p>2133.33Mbps</p></td>
<td><p>1172.16Mbps</p></td>
</tr>
</tbody>
</table>
<div class="admonition note">
<p class="admonition-title">Note</p>
<ul>
<li><p>Throughput theoretical calculation:</p>
<blockquote>
<div><ul class="simple">
<li><p>The test data above takes variable initial latency, so there will be 1 or 2 times initial latency depending on RWDS.</p></li>
<li><p>The header overlaps with delay by 1T.</p></li>
<li><p>Since it is DDR PSRAM, 16T is used to transmit 32 bytes.</p></li>
</ul>
</div></blockquote>
</li>
<li><p>Direct access:</p>
<blockquote>
<div><ul class="simple">
<li><p>By default, we will assign the cache attribute to PSRAM. Therefore, when testing the access performance of PSRAM, we need to consider the cache attribute comprehensively.</p></li>
<li><p>In the operation of reading 4 bytes, if read hit (that is, the address data is stored in the cache), the CPU directly reads 4bytes from the cache. If read miss (the address data is not in the cache), it needs to read a cache line size data from PSRAM to the cache.</p></li>
<li><p>In the operation of writing 4 bytes, if write hit (the address data exists in the cache), the content of the address in the cache will be updated, and then a cacheline size will be updated to PSRAM when the cache flush. If write miss (the address to be written is not in the cache), based on the write allocate policy, the CPU will first read a cacheline size data from PSRAM to the cache, and then update the content in the cache.</p></li>
<li><p>The read / write throughput data in the table is measured based on read miss / cache flush, which requires access to PSRAM. TP of write allocate is equal to TP of read miss.</p></li>
<li><p>Instruction execution time also needs to be taken into consideration.</p></li>
</ul>
</div></blockquote>
</li>
</ul>
</div>
<table class="docutils align-default" id="id2" style="width: 100%">
<caption><span class="caption-text">PSRAM throughput theoretical calculation</span><a class="headerlink" href="#id2" title="Link to this table">ïƒ</a></caption>
<thead>
<tr class="row-odd"><th class="head"><p>Item</p></th>
<th class="head"><p>Writing 32 bits</p></th>
<th class="head"><p>Reading 32 bits</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>Header + delay</p></td>
<td><p>[3 +22] * 4ns = 100ns</p></td>
<td><p>[3 + 23] * 4ns = 104ns</p></td>
</tr>
<tr class="row-odd"><td><p>Data transmit period</p></td>
<td><p>2 * 4ns =8ns</p></td>
<td><p>16 * 4ns = 64ns</p></td>
</tr>
<tr class="row-even"><td><p>Hardware hold</p></td>
<td><p>1 * 4ns =4ns</p></td>
<td><p>2 * 4ns = 8ns</p></td>
</tr>
<tr class="row-odd"><td><p>Total without considering instruction execution time</p></td>
<td><p>100ns + 8ns + 4ns = 112ns</p></td>
<td><p>104ns + 64ns + 8ns = 176ns</p></td>
</tr>
<tr class="row-even"><td><p>Throughput theoretical value</p></td>
<td><p>32/112ns = 285.71Mbps</p></td>
<td><p>(32x8)/176ns = 1454.55Mbps</p></td>
</tr>
</tbody>
</table>
</div><div aria-labelledby="tab-1-1-1" class="sphinx-tabs-panel" hidden="true" id="panel-1-1-1" name="1-1" role="tabpanel" tabindex="0"><div class="admonition note">
<p class="admonition-title">Note</p>
<ul>
<li><p>Throughput theoretical calculation:</p>
<blockquote>
<div><ul class="simple">
<li><p>The test data above takes variable initial latency, so there will be 1 or 2 times initial latency depending on RWDS.</p></li>
<li><p>The header overlaps with delay by 1T.</p></li>
<li><p>Since it is DDR PSRAM, 16T is used to transmit 32 bytes.</p></li>
</ul>
</div></blockquote>
</li>
<li><p>Direct access:</p>
<blockquote>
<div><ul class="simple">
<li><p>By default, we will assign the cache attribute to PSRAM. Therefore, when testing the access performance of PSRAM, we need to consider the cache attribute comprehensively.</p></li>
<li><p>In the operation of reading 4 bytes, if read hit (that is, the address data is stored in the cache), the CPU directly reads 4bytes from the cache. If read miss (the address data is not in the cache), it needs to read a cache line size data from PSRAM to the cache.</p></li>
<li><p>In the operation of writing 4 bytes, if write hit (the address data exists in the cache), the content of the address in the cache will be updated, and then a cacheline size will be updated to PSRAM when the cache flush. If write miss (the address to be written is not in the cache), based on the write allocate policy, the CPU will first read a cacheline size data from PSRAM to the cache, and then update the content in the cache.</p></li>
<li><p>The read / write throughput data in the table is measured based on read miss / cache flush, which requires access to PSRAM. TP of write allocate is equal to TP of read miss.</p></li>
<li><p>Instruction execution time also needs to be taken into consideration.</p></li>
</ul>
</div></blockquote>
</li>
</ul>
<table class="docutils align-default" id="id4" style="width: 100%">
<caption><span class="caption-text">PSRAM throughput theoretical calculation</span><a class="headerlink" href="#id4" title="Link to this table">ïƒ</a></caption>
<thead>
<tr class="row-odd"><th class="head"><p>Item</p></th>
<th class="head"><p>Writing 32 bits</p></th>
<th class="head"><p>Reading 32 bits</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>Header + delay</p></td>
<td><p>[3 + (6 or 12) -1] * (1000/150)ns</p></td>
<td><p>[3 + (6 or 12) -1] * (1000/150)ns</p></td>
</tr>
<tr class="row-odd"><td><p>Data transmit period</p></td>
<td><p>16 * (1000/150)ns</p></td>
<td><p>16 * (1000/150)ns</p></td>
</tr>
<tr class="row-even"><td><p>Hardware hold</p></td>
<td><p>1 * (1000/150)ns</p></td>
<td><p>2 * (1000/150)ns</p></td>
</tr>
<tr class="row-odd"><td><p>Total without considering</p>
<p>instruction execution time</p>
</td>
<td><p>[(8 or 14) + 16 +1] * (1000/150)ns = (166.667 or 206.667)ns</p></td>
<td><p>[(8 or 14) + 16 +2] * (1000/150)ns = (173.333 or 213.333)ns</p></td>
</tr>
<tr class="row-even"><td><p>Throughput theoretical value</p></td>
<td><p>32*8/(166.667 or 206.667)ns = (1536 or 1238.71)Mbps</p></td>
<td><p>(32*8)/(173.333 or 213.333)ns = (1476.923 or 1200)Mbps</p></td>
</tr>
</tbody>
</table>
</div>
</div><div aria-labelledby="tab-1-1-2" class="sphinx-tabs-panel" hidden="true" id="panel-1-1-2" name="1-2" role="tabpanel" tabindex="0"><div class="admonition note">
<p class="admonition-title">Note</p>
<ul>
<li><p>Throughput theoretical calculation:</p>
<blockquote>
<div><ul class="simple">
<li><p>The test data above takes variable initial latency, so there will be 1 or 2 times initial latency depending on RWDS.</p></li>
<li><p>The header overlaps with delay by 1T.</p></li>
<li><p>Since it is DDR PSRAM, 16T is used to transmit 32 bytes.</p></li>
</ul>
</div></blockquote>
</li>
<li><p>Direct access:</p>
<blockquote>
<div><ul class="simple">
<li><p>By default, we will assign the cache attribute to PSRAM. Therefore, when testing the access performance of PSRAM, we need to consider the cache attribute comprehensively.</p></li>
<li><p>In the operation of reading 4 bytes, if read hit (that is, the address data is stored in the cache), the CPU directly reads 4bytes from the cache. If read miss (the address data is not in the cache), it needs to read a cache line size data from PSRAM to the cache.</p></li>
<li><p>In the operation of writing 4 bytes, if write hit (the address data exists in the cache), the content of the address in the cache will be updated, and then a cacheline size will be updated to PSRAM when the cache flush. If write miss (the address to be written is not in the cache), based on the write allocate policy, the CPU will first read a cacheline size data from PSRAM to the cache, and then update the content in the cache.</p></li>
<li><p>The read / write throughput data in the table is measured based on read miss / cache flush, which requires access to PSRAM. TP of write allocate is equal to TP of read miss.</p></li>
<li><p>Instruction execution time also needs to be taken into consideration.</p></li>
</ul>
</div></blockquote>
</li>
</ul>
<table class="docutils align-default" id="id6" style="width: 100%">
<caption><span class="caption-text">PSRAM throughput theoretical calculation</span><a class="headerlink" href="#id6" title="Link to this table">ïƒ</a></caption>
<thead>
<tr class="row-odd"><th class="head"><p>Item</p></th>
<th class="head"><p>Writing 32 bits</p></th>
<th class="head"><p>Reading 32 bits</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>Header + delay</p></td>
<td><p>[3 +(7 or 14)-1] * 4ns = 36 or 64ns</p></td>
<td><p>[3 + (7 or 14)-1] * 4ns = 36 or 64ns</p></td>
</tr>
<tr class="row-odd"><td><p>Data transmit period</p></td>
<td><p>16 * 4ns =64ns</p></td>
<td><p>16 * 4ns = 64ns</p></td>
</tr>
<tr class="row-even"><td><p>Hardware hold</p></td>
<td><p>1 * 4ns =4ns</p></td>
<td><p>2 * 4ns = 8ns</p></td>
</tr>
<tr class="row-odd"><td><p>Total without considering</p>
<p>instruction execution time</p>
</td>
<td><p>36 or 64ns + 64ns + 4ns = 104 or 132ns</p></td>
<td><p>36 or 64ns + 64ns + 8ns = 108 or 136ns</p></td>
</tr>
<tr class="row-even"><td><p>Throughput theoretical value</p></td>
<td><p>32*8/104 or 132ns =2461.538 or 1939.394Mbps</p></td>
<td><p>(32*8)/108 or 136ns = 2370.37 or 1882.353Mbps</p></td>
</tr>
</tbody>
</table>
</div>
</div><div aria-labelledby="tab-1-1-3" class="sphinx-tabs-panel" hidden="true" id="panel-1-1-3" name="1-3" role="tabpanel" tabindex="0"><p>PSRAM supports direct access and DMA access. The throughput of PSRAM is listed in the following table.</p>
<table class="docutils align-default" id="id7" style="width: 100%">
<caption><span class="caption-text">Throughput of PSRAM (250MHz)</span><a class="headerlink" href="#id7" title="Link to this table">ïƒ</a></caption>
<thead>
<tr class="row-odd"><th class="head" rowspan="2"><p>Access mode</p></th>
<th class="head" colspan="2"><p>Writing 32 bytes</p></th>
<th class="head" colspan="2"><p>Reading 32 bytes</p></th>
</tr>
<tr class="row-even"><th class="head"><p>Theory (Mbps)</p></th>
<th class="head"><p>Test on NP (Mbps)</p></th>
<th class="head"><p>Theory (Mbps)</p></th>
<th class="head"><p>Test on NP (Mbps)</p></th>
</tr>
</thead>
<tbody>
<tr class="row-odd"><td><p>Direct access</p>
<p>(write back)</p>
</td>
<td rowspan="2"><p>1939.394</p></td>
<td><p>(32*8)/(123ns)=2081.30</p></td>
<td rowspan="2"><p>1882.353</p></td>
<td><p>(32*8)/(152ns)=1684.21</p></td>
</tr>
<tr class="row-even"><td><p>DMA access</p></td>
<td><p>(32*8)/(180ns)=1422.22</p></td>
<td><p>(32*8)/(175.60ns)=1457.85</p></td>
</tr>
</tbody>
</table>
<div class="admonition note">
<p class="admonition-title">Note</p>
<ul class="simple">
<li><p>Throughput theoretical calculation:</p></li>
<li><p>The test data above takes fixed initial latency, so there will be 2 times initial latency depending on RWDS.</p></li>
<li><p>The header overlaps with delay by 1T.</p></li>
<li><p>Since it is DDR PSRAM, 16T is used to transmit 32 bytes.</p></li>
<li><p>Direct access:</p></li>
<li><p>By default, we will assign the cache attribute to PSRAM. Therefore, when testing the access performance of PSRAM, we need to consider the cache attribute comprehensively.</p></li>
<li><p>In the operation of reading 4 bytes, if read hit (that is, the address data is stored in the cache), the CPU directly reads 4bytes from the cache. If read miss (the address data is not in the cache), it needs to read a cache line size data from PSRAM to the cache.</p></li>
<li><p>In the operation of writing 4 bytes, if write hit (the address data exists in the cache), the content of the address in the cache will be updated, and then a cacheline size will be updated to PSRAM when the cache flush. If write miss ( the address to be written is not in the cache), based on the write allocate policy, the CPU will first read a cacheline size data from PSRAM to the cache, and then update the content in the cache.</p></li>
<li><p>The read / write throughput data in the table is measured based on read miss / cache flush, which requires access to PSRAM. TP of write allocate is equal to TP of read miss.</p></li>
<li><p>Instruction execution time also needs to be taken into consideration.</p></li>
</ul>
</div>
<table class="docutils align-default" id="id8" style="width: 100%">
<caption><span class="caption-text">PSRAM throughput theoretical calculation</span><a class="headerlink" href="#id8" title="Link to this table">ïƒ</a></caption>
<thead>
<tr class="row-odd"><th class="head"><p>Item</p></th>
<th class="head"><p>Writing 32 bits (In fact, writing 32 bytes)</p></th>
<th class="head"><p>Reading 32 bits (In fact, reading 32 bytes)</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>Header + delay</p></td>
<td><p>[3 +(14-1)] * 4ns = 64ns</p></td>
<td><p>[3 + (14-1)] * 4ns = 64ns</p></td>
</tr>
<tr class="row-odd"><td><p>Data transmit period</p></td>
<td><p>16 * 4ns =64ns</p></td>
<td><p>16 * 4ns = 64ns</p></td>
</tr>
<tr class="row-even"><td><p>Hardware hold</p></td>
<td><p>1 * 4ns =4ns</p></td>
<td><p>2 * 4ns = 8ns</p></td>
</tr>
<tr class="row-odd"><td><p>Total without considering</p>
<p>instruction execution time</p>
</td>
<td><p>64ns + 64ns + 4ns = 132ns</p></td>
<td><p>64ns + 64ns + 8ns = 136ns</p></td>
</tr>
<tr class="row-even"><td><p>Throughput theoretical value</p></td>
<td><p>(32*8) / 132ns = 1939.394Mbps</p></td>
<td><p>(32*8) / 136ns = 1882.353Mbps</p></td>
</tr>
</tbody>
</table>
</div></div>
</section>
<section id="boot-from-psram">
<h1>Boot from PSRAM<a class="headerlink" href="#boot-from-psram" title="Link to this heading">ïƒ</a></h1>
<p>If the PSRAM is embedded in the chip, follow these steps to boot from PSRAM in the SDK.</p>
<ol class="arabic simple">
<li><p>Enable the power supply of PSRAM in the bootloader</p></li>
<li><p>Initialize the PSRAM controller, PSRAM PHY and PSRAM device to synchronize the relevant parameters</p></li>
<li><p>Calibrate the PSRAM</p></li>
</ol>
<div class="highlight-C notranslate"><div class="highlight"><pre><span></span><span class="n">RCC_PeriphClockCmd</span><span class="p">(</span><span class="n">APBPeriph_PSRAM</span><span class="p">,</span><span class="w"> </span><span class="n">APBPeriph_PSRAM_CLOCK</span><span class="p">,</span><span class="w"> </span><span class="n">ENABLE</span><span class="p">);</span>
<span class="n">DBG_PRINT</span><span class="p">(</span><span class="n">MODULE_BOOT</span><span class="p">,</span><span class="w"> </span><span class="n">LEVEL_INFO</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;Init PSRAM</span><span class="se">\r\n</span><span class="s">&quot;</span><span class="p">);</span>
<span class="n">BOOT_PSRAM_Init</span><span class="p">();</span>
</pre></div>
</div>
</section>
<section id="psram-cache-write-back-policy">
<h1>PSRAM Cache â€œWrite Backâ€ Policy<a class="headerlink" href="#psram-cache-write-back-policy" title="Link to this heading">ïƒ</a></h1>
<p>When a cache hit occurs on a store access, the data is only written to the cache. Data in the cache can therefore be more up-to-date than data in memory. Any such data is written back to memory when the cache line is cleaned or reallocated. Another common term for a write-back cache is a copy-back cache.
By default, we will assign the cache attribute to PSRAM. For CPU, only when read miss/cache flush/write allocate will access PSRAM, one cache line at a time.</p>
<section id="row-hammer">
<h2>Row Hammer<a class="headerlink" href="#row-hammer" title="Link to this heading">ïƒ</a></h2>
<div class="sphinx-tabs docutils container">
<div aria-label="Tabbed content" class="closeable" role="tablist"><button aria-controls="panel-2-2-0" aria-selected="true" class="sphinx-tabs-tab" id="tab-2-2-0" name="2-0" role="tab" tabindex="0">RTL8721Dx</button><button aria-controls="panel-2-2-1" aria-selected="false" class="sphinx-tabs-tab" id="tab-2-2-1" name="2-1" role="tab" tabindex="-1">RTL8720E</button><button aria-controls="panel-2-2-2" aria-selected="false" class="sphinx-tabs-tab" id="tab-2-2-2" name="2-2" role="tab" tabindex="-1">RTL8726E</button><button aria-controls="panel-2-2-3" aria-selected="false" class="sphinx-tabs-tab" id="tab-2-2-3" name="2-3" role="tab" tabindex="-1">RTL8730E</button></div><div aria-labelledby="tab-2-2-0" class="sphinx-tabs-panel" id="panel-2-2-0" name="2-0" role="tabpanel" tabindex="0"><p>With the increasing density of DRAM, its memory cells become smaller and smaller, and the stored charge decreases. As a result, the noise tolerance between memory cells is reduced, resulting in the interaction of charges between two independent memory cells. Row hammer is caused by this defect in the design of memory hardware chip. Its principle is to repeatedly read and write the peer address in DRAM memory unit, so that the charge leakage occurs in adjacent rows, and the bit reversal phenomenon occurs in adjacent rows, that is, 0 is reversed to 1, and 1 is reversed to 0.</p>
<p>Therefore, when a large number of accesses are made to PSRAM in a short time, if the refresh frequency is not enough, the MEM space of every 2K (i.e. two rows) will affect each other. When we perform a large number of continuous write operations on a line, the charges of adjacent lines will be affected and the value will change.</p>
</div><div aria-labelledby="tab-2-2-1" class="sphinx-tabs-panel" hidden="true" id="panel-2-2-1" name="2-1" role="tabpanel" tabindex="0"><p>With the increasing density of DRAM, its memory cells become smaller and smaller, and the stored charge decreases. As a result, the noise tolerance between memory cells is reduced, resulting in the interaction of charges between two independent memory cells. Row hammer is caused by this defect in the design of memory hardware chip. Its principle is to repeatedly read and write the peer address in DRAM memory unit, so that the charge leakage occurs in adjacent rows, and the bit reversal phenomenon occurs in adjacent rows, that is, 0 is reversed to 1, and 1 is reversed to 0.</p>
<p>Therefore, when a large number of accesses are made to PSRAM in a short time, if the refresh frequency is not enough, the MEM space of every 2K (i.e. two rows) will affect each other. When we perform a large number of continuous write operations on a line, the charges of adjacent lines will be affected and the value will change.</p>
</div><div aria-labelledby="tab-2-2-2" class="sphinx-tabs-panel" hidden="true" id="panel-2-2-2" name="2-2" role="tabpanel" tabindex="0"><p>With the increasing density of DRAM, its memory cells become smaller and smaller, and the stored charge decreases. As a result, the noise tolerance between memory cells is reduced, resulting in the interaction of charges between two independent memory cells. Row hammer is caused by this defect in the design of memory hardware chip. Its principle is to repeatedly read and write the peer address in DRAM memory unit, so that the charge leakage occurs in adjacent rows, and the bit reversal phenomenon occurs in adjacent rows, that is, 0 is reversed to 1, and 1 is reversed to 0.</p>
<p>Therefore, when a large number of accesses are made to PSRAM in a short time, if the refresh frequency is not enough, the MEM space of every 2K (i.e. two rows) will affect each other. When we perform a large number of continuous write operations on a line, the charges of adjacent lines will be affected and the value will change.</p>
</div><div aria-labelledby="tab-2-2-3" class="sphinx-tabs-panel" hidden="true" id="panel-2-2-3" name="2-3" role="tabpanel" tabindex="0"><p>With the increasing density of DRAM, its memory cells become smaller and smaller, and the stored charge decreases. As a result, the noise tolerance between memory cells is reduced, resulting in the interaction of charges between two independent memory cells. Row hammer is caused by this defect in the design of memory hardware chip. Its principle is to repeatedly read and write the peer address in DRAM memory unit, so that the charge leakage occurs in adjacent rows, and the bit reversal phenomenon occurs in adjacent rows, that is, 0 is reversed to 1, and 1 is reversed to 0.</p>
<p>Therefore, when a large number of accesses are made to PSRAM in a short time, if the refresh frequency is not enough, the MEM space of every 2K (i.e. two rows) will affect each other. When we perform a large number of continuous write operations on a line, the charges of adjacent lines will be affected and the value will change.</p>
<p>Row hammer is an inherent weakness of PSRAM. If the cache is not turned on, it may be hit by excessive load. When the cache is turned on, we have tested that APM PSRAM is safe on AP. The test conditions are as follows:</p>
<ol class="arabic simple">
<li><p>AP clock is 1.2GHz.</p></li>
<li><p>In write back mode.</p></li>
<li><p>Every 4K bytes of memory is a group, write the first 800 bytes 8W times (cache flush for each 800 bytes), and then check whether the values of other unwritten memories have changed by reading.</p></li>
</ol>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>If you want to set memory to non-cache attribute through MMU or MPU, take the boundary of row hammer into consideration.</p>
</div>
</div></div>
</section>
<section id="notice">
<h2>Notice<a class="headerlink" href="#notice" title="Link to this heading">ïƒ</a></h2>
<section id="cache-operation">
<h3>Cache Operation<a class="headerlink" href="#cache-operation" title="Link to this heading">ïƒ</a></h3>
<p>On the â€œWrite Backâ€ policy, the synchronization operations need to be taken between cache and PSRAM to keep content consistency, especially for multiple access by different sources, e.g. CPU, serial ports and peripherals.</p>
<div class="sphinx-tabs docutils container">
<div aria-label="Tabbed content" class="closeable" role="tablist"><button aria-controls="panel-3-3-0" aria-selected="true" class="sphinx-tabs-tab" id="tab-3-3-0" name="3-0" role="tab" tabindex="0">RTL8721Dx</button><button aria-controls="panel-3-3-1" aria-selected="false" class="sphinx-tabs-tab" id="tab-3-3-1" name="3-1" role="tab" tabindex="-1">RTL8720E</button><button aria-controls="panel-3-3-2" aria-selected="false" class="sphinx-tabs-tab" id="tab-3-3-2" name="3-2" role="tab" tabindex="-1">RTL8726E</button><button aria-controls="panel-3-3-3" aria-selected="false" class="sphinx-tabs-tab" id="tab-3-3-3" name="3-3" role="tab" tabindex="-1">RTL8730E</button></div><div aria-labelledby="tab-3-3-0" class="sphinx-tabs-panel" id="panel-3-3-0" name="3-0" role="tabpanel" tabindex="0"><p>As the cache line of KM4/KM0 cache is 32 bytes, and cache operations are all based on the cache line. So the buffer size and buffer starting address are recommended to be 32/64 bytes aligned to avoid synchronization issues.</p>
</div><div aria-labelledby="tab-3-3-1" class="sphinx-tabs-panel" hidden="true" id="panel-3-3-1" name="3-1" role="tabpanel" tabindex="0"><p>As the cache line of KM4/KR4 cache line is 32 bytes, and cache operations are all based on the cache line. So the buffer size and buffer starting address are recommended to be 32 bytes aligned to avoid synchronization issues.</p>
</div><div aria-labelledby="tab-3-3-2" class="sphinx-tabs-panel" hidden="true" id="panel-3-3-2" name="3-2" role="tabpanel" tabindex="0"><p>As the cache line of KM4/KR4 cache line is 32 bytes, DSP cache line is 128 bytes, and cache operations are all based on the cache line. So the buffer size and buffer starting address are recommended to be 32/128 bytes aligned to avoid synchronization issues.</p>
</div><div aria-labelledby="tab-3-3-3" class="sphinx-tabs-panel" hidden="true" id="panel-3-3-3" name="3-3" role="tabpanel" tabindex="0"><p>As the cache lines of NP/LP cache are 32 bytes, AP cache is 64 bytes, and cache operations are all based on the cache line. So the buffer size and buffer starting address are recommended to be 64 bytes aligned to avoid synchronization issues.</p>
</div></div>
</section>
<section id="dma-operation">
<h3>DMA Operation<a class="headerlink" href="#dma-operation" title="Link to this heading">ïƒ</a></h3>
<p>The following steps should be added when executing DMA Rx/Tx.</p>
<table class="docutils align-default" style="width: 100%">
<thead>
<tr class="row-odd"><th class="head"><p>Operation</p></th>
<th class="head"><p>Step</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>DMA Rx</p></td>
<td><ol class="arabic">
<li><p>Prepare Rx buffer</p></li>
<li><p>Do <code class="xref py py-func docutils literal notranslate"><span class="pre">DCache_CleanInvalidate()</span></code> to avoid cache data write back during DMA Rx</p></li>
<li><p>Do DMA Rx config</p></li>
<li><p>Trigger DMA Rx interrupt</p></li>
<li><p>Do <code class="xref py py-func docutils literal notranslate"><span class="pre">DCache_Invalidate()</span></code> in Rx Done Handler to clean the old data</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>During GDMA transmission, it is forbidden to write or cache flush DST buffer.
(Taking <code class="file docutils literal notranslate"><em><span class="pre">SDK</span></em><span class="pre">\component\example\peripheral\raw\uart\uart_dma_stream\src\main.c</span></code> for example,
<code class="xref py py-mod docutils literal notranslate"><span class="pre">uart_recv_string_done</span></code> is DMA Rx Done Interrupt Handler)</p>
<div class="highlight-c notranslate"><div class="highlight"><pre><span></span><span class="n">u32</span><span class="w"> </span><span class="nf">uart_recv_string_done</span><span class="p">(</span><span class="kt">void</span><span class="w"> </span><span class="o">*</span><span class="n">data</span><span class="p">)</span>
<span class="p">{</span>
<span class="w">  </span><span class="n">UNUSED</span><span class="p">(</span><span class="n">data</span><span class="p">);</span>
<span class="w">  </span><span class="cm">/* To solve the cache consistency problem, DMA mode needs it */</span>
<span class="w">  </span><span class="n">DCache_Invalidate</span><span class="p">((</span><span class="n">u32</span><span class="p">)</span><span class="n">rx_buf</span><span class="p">,</span><span class="w"> </span><span class="n">SRX_BUF_SZ</span><span class="p">);</span>
<span class="w">  </span><span class="n">dma_free</span><span class="p">();</span>
<span class="w">  </span><span class="n">rx_done</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">1</span><span class="p">;</span>
<span class="w">  </span><span class="k">return</span><span class="w"> </span><span class="mi">0</span><span class="p">;</span>
<span class="w"> </span><span class="p">}</span>
</pre></div>
</div>
</div>
</li>
<li><p>CPU reads Rx buffer</p></li>
</ol>
</td>
</tr>
<tr class="row-odd"><td><p>DMA Tx</p></td>
<td><ol class="arabic simple">
<li><p>CPU prepares Tx buffer data</p></li>
<li><p>Do <code class="xref py py-func docutils literal notranslate"><span class="pre">DCache_CleanInvalidate()</span></code> for Tx buffer to synchronize the data</p></li>
<li><p>Do DMA Tx configuration</p></li>
<li><p>Trigger DMA Tx interrupt</p></li>
</ol>
</td>
</tr>
</tbody>
</table>
<p>In SDK, only the example of one-time xxx_GDMA_Init one-time transmission is illustrated. Step 2 is included in <code class="docutils literal notranslate"><span class="pre">xxx_GDMA_Init</span></code> by default.</p>
<p>If you need multi-time DMA Tx/Rx with only one-time xxx_GDMA_Init, <code class="docutils literal notranslate"><span class="pre">DCache_CleanInvalidate()</span></code> should be called every time before DMA transmission starts.</p>
<div class="sphinx-tabs docutils container">
<div aria-label="Tabbed content" class="closeable" role="tablist"><button aria-controls="panel-4-4-0" aria-selected="true" class="sphinx-tabs-tab" id="tab-4-4-0" name="4-0" role="tab" tabindex="0">RTL8721Dx</button><button aria-controls="panel-4-4-1" aria-selected="false" class="sphinx-tabs-tab" id="tab-4-4-1" name="4-1" role="tab" tabindex="-1">RTL8720E</button><button aria-controls="panel-4-4-2" aria-selected="false" class="sphinx-tabs-tab" id="tab-4-4-2" name="4-2" role="tab" tabindex="-1">RTL8726E</button><button aria-controls="panel-4-4-3" aria-selected="false" class="sphinx-tabs-tab" id="tab-4-4-3" name="4-3" role="tab" tabindex="-1">RTL8730E</button></div><div aria-labelledby="tab-4-4-0" class="sphinx-tabs-panel" id="panel-4-4-0" name="4-0" role="tabpanel" tabindex="0"><table class="docutils align-default" style="width: 100%">
<tbody>
<tr class="row-odd"><td><div class="highlight-c notranslate"><div class="highlight"><pre><span></span><span class="n">BOOL</span><span class="w"> </span><span class="nf">UART_TXGDMA_Init</span><span class="p">(</span>
<span class="w">   </span><span class="n">u8</span><span class="w"> </span><span class="n">UartIndex</span><span class="p">,</span>
<span class="w">   </span><span class="n">GDMA_InitTypeDef</span><span class="w"> </span><span class="o">*</span><span class="w"> </span><span class="n">GDMA_InitStruct</span><span class="p">,</span>
<span class="w">   </span><span class="kt">void</span><span class="w"> </span><span class="o">*</span><span class="n">CallbackData</span><span class="p">,</span>
<span class="w">   </span><span class="n">IRQ_FUN</span><span class="w"> </span><span class="n">CallBackFunc</span><span class="p">,</span>
<span class="w">   </span><span class="n">u8</span><span class="w"> </span><span class="o">*</span><span class="n">pTxBuf</span><span class="p">,</span>
<span class="w">   </span><span class="kt">int</span><span class="w"> </span><span class="n">TxCount</span>
<span class="p">)</span>
<span class="p">{</span>
<span class="w">   </span><span class="n">u8</span><span class="w"> </span><span class="n">GdmaChnl</span><span class="p">;</span>

<span class="w">   </span><span class="n">assert_param</span><span class="p">(</span><span class="n">GDMA_InitStruct</span><span class="w"> </span><span class="o">!=</span><span class="w"> </span><span class="nb">NULL</span><span class="p">);</span>

<span class="w">   </span><span class="n">DCache_CleanInvalidate</span><span class="p">((</span><span class="n">u32</span><span class="p">)</span><span class="n">pTxBuf</span><span class="p">,</span><span class="w"> </span><span class="n">TxCount</span><span class="p">);</span>
<span class="p">}</span>
</pre></div>
</div>
</td>
<td><div class="highlight-c notranslate"><div class="highlight"><pre><span></span><span class="n">BOOL</span><span class="w"> </span><span class="nf">UART_RXGDMA_Init</span><span class="p">(</span>
<span class="w">   </span><span class="n">u8</span><span class="w"> </span><span class="n">UartIndex</span><span class="p">,</span>
<span class="w">   </span><span class="n">GDMA_InitTypeDef</span><span class="w"> </span><span class="o">*</span><span class="w"> </span><span class="n">GDMA_InitStruct</span><span class="p">,</span>
<span class="w">   </span><span class="kt">void</span><span class="w"> </span><span class="o">*</span><span class="n">CallbackData</span><span class="p">,</span>
<span class="w">   </span><span class="n">IRQ_FUN</span><span class="w"> </span><span class="n">CallBackFunc</span><span class="p">,</span>
<span class="w">   </span><span class="n">u8</span><span class="w"> </span><span class="o">*</span><span class="n">pRxBuf</span><span class="p">,</span>
<span class="w">   </span><span class="kt">int</span><span class="w"> </span><span class="n">RxCount</span>
<span class="p">)</span>
<span class="p">{</span>
<span class="w">   </span><span class="n">u8</span><span class="w"> </span><span class="n">GdmaChnl</span><span class="p">;</span>
<span class="w">   </span><span class="n">UART_TypeDef</span><span class="w"> </span><span class="o">*</span><span class="w"> </span><span class="n">UARTx</span><span class="p">;</span>
<span class="w">   </span><span class="n">assert_param</span><span class="p">(</span><span class="n">GDMA_InitStruct</span><span class="w"> </span><span class="o">!=</span><span class="w"> </span><span class="nb">NULL</span><span class="p">);</span>

<span class="w">   </span><span class="n">DCache_CleanInvalidate</span><span class="p">((</span><span class="n">u32</span><span class="p">)</span><span class="n">pRxBuf</span><span class="p">,</span><span class="w"> </span><span class="n">RxCount</span><span class="p">);</span>
<span class="p">}</span>
</pre></div>
</div>
</td>
</tr>
</tbody>
</table>
</div><div aria-labelledby="tab-4-4-1" class="sphinx-tabs-panel" hidden="true" id="panel-4-4-1" name="4-1" role="tabpanel" tabindex="0"><table class="docutils align-default" style="width: 100%">
<tbody>
<tr class="row-odd"><td><div class="highlight-c notranslate"><div class="highlight"><pre><span></span><span class="n">BOOL</span><span class="w"> </span><span class="nf">UART_TXGDMA_Init</span><span class="p">(</span>
<span class="w">   </span><span class="n">u8</span><span class="w"> </span><span class="n">UartIndex</span><span class="p">,</span>
<span class="w">   </span><span class="n">GDMA_InitTypeDef</span><span class="w"> </span><span class="o">*</span><span class="w"> </span><span class="n">GDMA_InitStruct</span><span class="p">,</span>
<span class="w">   </span><span class="kt">void</span><span class="w"> </span><span class="o">*</span><span class="n">CallbackData</span><span class="p">,</span>
<span class="w">   </span><span class="n">IRQ_FUN</span><span class="w"> </span><span class="n">CallBackFunc</span><span class="p">,</span>
<span class="w">   </span><span class="n">u8</span><span class="w"> </span><span class="o">*</span><span class="n">pTxBuf</span><span class="p">,</span>
<span class="w">   </span><span class="kt">int</span><span class="w"> </span><span class="n">TxCount</span>
<span class="p">)</span>
<span class="p">{</span>
<span class="w">   </span><span class="n">u8</span><span class="w"> </span><span class="n">GdmaChnl</span><span class="p">;</span>

<span class="w">   </span><span class="n">assert_param</span><span class="p">(</span><span class="n">GDMA_InitStruct</span><span class="w"> </span><span class="o">!=</span><span class="w"> </span><span class="nb">NULL</span><span class="p">);</span>

<span class="w">   </span><span class="n">DCache_CleanInvalidate</span><span class="p">((</span><span class="n">u32</span><span class="p">)</span><span class="n">pTxBuf</span><span class="p">,</span><span class="w"> </span><span class="n">TxCount</span><span class="p">);</span>
<span class="p">}</span>
</pre></div>
</div>
</td>
<td><div class="highlight-c notranslate"><div class="highlight"><pre><span></span><span class="n">BOOL</span><span class="w"> </span><span class="nf">UART_RXGDMA_Init</span><span class="p">(</span>
<span class="w">   </span><span class="n">u8</span><span class="w"> </span><span class="n">UartIndex</span><span class="p">,</span>
<span class="w">   </span><span class="n">GDMA_InitTypeDef</span><span class="w"> </span><span class="o">*</span><span class="w"> </span><span class="n">GDMA_InitStruct</span><span class="p">,</span>
<span class="w">   </span><span class="kt">void</span><span class="w"> </span><span class="o">*</span><span class="n">CallbackData</span><span class="p">,</span>
<span class="w">   </span><span class="n">IRQ_FUN</span><span class="w"> </span><span class="n">CallBackFunc</span><span class="p">,</span>
<span class="w">   </span><span class="n">u8</span><span class="w"> </span><span class="o">*</span><span class="n">pRxBuf</span><span class="p">,</span>
<span class="w">   </span><span class="kt">int</span><span class="w"> </span><span class="n">RxCount</span>
<span class="p">)</span>
<span class="p">{</span>
<span class="w">   </span><span class="n">u8</span><span class="w"> </span><span class="n">GdmaChnl</span><span class="p">;</span>
<span class="w">   </span><span class="n">UART_TypeDef</span><span class="w"> </span><span class="o">*</span><span class="w"> </span><span class="n">UARTx</span><span class="p">;</span>
<span class="w">   </span><span class="n">assert_param</span><span class="p">(</span><span class="n">GDMA_InitStruct</span><span class="w"> </span><span class="o">!=</span><span class="w"> </span><span class="nb">NULL</span><span class="p">);</span>

<span class="w">   </span><span class="n">DCache_CleanInvalidate</span><span class="p">((</span><span class="n">u32</span><span class="p">)</span><span class="n">pRxBuf</span><span class="p">,</span><span class="w"> </span><span class="n">RxCount</span><span class="p">);</span>
<span class="p">}</span>
</pre></div>
</div>
</td>
</tr>
</tbody>
</table>
</div><div aria-labelledby="tab-4-4-2" class="sphinx-tabs-panel" hidden="true" id="panel-4-4-2" name="4-2" role="tabpanel" tabindex="0"><table class="docutils align-default" style="width: 100%">
<tbody>
<tr class="row-odd"><td><div class="highlight-c notranslate"><div class="highlight"><pre><span></span><span class="n">BOOL</span><span class="w"> </span><span class="nf">UART_TXGDMA_Init</span><span class="p">(</span>
<span class="w">   </span><span class="n">u8</span><span class="w"> </span><span class="n">UartIndex</span><span class="p">,</span>
<span class="w">   </span><span class="n">GDMA_InitTypeDef</span><span class="w"> </span><span class="o">*</span><span class="w"> </span><span class="n">GDMA_InitStruct</span><span class="p">,</span>
<span class="w">   </span><span class="kt">void</span><span class="w"> </span><span class="o">*</span><span class="n">CallbackData</span><span class="p">,</span>
<span class="w">   </span><span class="n">IRQ_FUN</span><span class="w"> </span><span class="n">CallBackFunc</span><span class="p">,</span>
<span class="w">   </span><span class="n">u8</span><span class="w"> </span><span class="o">*</span><span class="n">pTxBuf</span><span class="p">,</span>
<span class="w">   </span><span class="kt">int</span><span class="w"> </span><span class="n">TxCount</span>
<span class="p">)</span>
<span class="p">{</span>
<span class="w">   </span><span class="n">u8</span><span class="w"> </span><span class="n">GdmaChnl</span><span class="p">;</span>

<span class="w">   </span><span class="n">assert_param</span><span class="p">(</span><span class="n">GDMA_InitStruct</span><span class="w"> </span><span class="o">!=</span><span class="w"> </span><span class="nb">NULL</span><span class="p">);</span>

<span class="w">   </span><span class="n">DCache_CleanInvalidate</span><span class="p">((</span><span class="n">u32</span><span class="p">)</span><span class="n">pTxBuf</span><span class="p">,</span><span class="w"> </span><span class="n">TxCount</span><span class="p">);</span>
<span class="p">}</span>
</pre></div>
</div>
</td>
<td><div class="highlight-c notranslate"><div class="highlight"><pre><span></span><span class="n">BOOL</span><span class="w"> </span><span class="nf">UART_RXGDMA_Init</span><span class="p">(</span>
<span class="w">   </span><span class="n">u8</span><span class="w"> </span><span class="n">UartIndex</span><span class="p">,</span>
<span class="w">   </span><span class="n">GDMA_InitTypeDef</span><span class="w"> </span><span class="o">*</span><span class="w"> </span><span class="n">GDMA_InitStruct</span><span class="p">,</span>
<span class="w">   </span><span class="kt">void</span><span class="w"> </span><span class="o">*</span><span class="n">CallbackData</span><span class="p">,</span>
<span class="w">   </span><span class="n">IRQ_FUN</span><span class="w"> </span><span class="n">CallBackFunc</span><span class="p">,</span>
<span class="w">   </span><span class="n">u8</span><span class="w"> </span><span class="o">*</span><span class="n">pRxBuf</span><span class="p">,</span>
<span class="w">   </span><span class="kt">int</span><span class="w"> </span><span class="n">RxCount</span>
<span class="p">)</span>
<span class="p">{</span>
<span class="w">   </span><span class="n">u8</span><span class="w"> </span><span class="n">GdmaChnl</span><span class="p">;</span>
<span class="w">   </span><span class="n">UART_TypeDef</span><span class="w"> </span><span class="o">*</span><span class="w"> </span><span class="n">UARTx</span><span class="p">;</span>
<span class="w">   </span><span class="n">assert_param</span><span class="p">(</span><span class="n">GDMA_InitStruct</span><span class="w"> </span><span class="o">!=</span><span class="w"> </span><span class="nb">NULL</span><span class="p">);</span>

<span class="w">   </span><span class="n">DCache_CleanInvalidate</span><span class="p">((</span><span class="n">u32</span><span class="p">)</span><span class="n">pRxBuf</span><span class="p">,</span><span class="w"> </span><span class="n">RxCount</span><span class="p">);</span>
<span class="p">}</span>
</pre></div>
</div>
</td>
</tr>
</tbody>
</table>
</div><div aria-labelledby="tab-4-4-3" class="sphinx-tabs-panel" hidden="true" id="panel-4-4-3" name="4-3" role="tabpanel" tabindex="0"><table class="docutils align-default" style="width: 100%">
<tbody>
<tr class="row-odd"><td><div class="highlight-c notranslate"><div class="highlight"><pre><span></span><span class="n">BOOL</span><span class="w"> </span><span class="nf">UART_TXGDMA_Init</span><span class="p">(</span>
<span class="w">   </span><span class="n">u8</span><span class="w"> </span><span class="n">UartIndex</span><span class="p">,</span>
<span class="w">   </span><span class="n">GDMA_InitTypeDef</span><span class="w"> </span><span class="o">*</span><span class="w"> </span><span class="n">GDMA_InitStruct</span><span class="p">,</span>
<span class="w">   </span><span class="kt">void</span><span class="w"> </span><span class="o">*</span><span class="n">CallbackData</span><span class="p">,</span>
<span class="w">   </span><span class="n">IRQ_FUN</span><span class="w"> </span><span class="n">CallbackFunc</span><span class="p">,</span>
<span class="w">   </span><span class="n">u8</span><span class="w"> </span><span class="o">*</span><span class="n">pTxBuf</span><span class="p">,</span>
<span class="w">   </span><span class="kt">int</span><span class="w"> </span><span class="n">TxCount</span>
<span class="p">)</span>
<span class="p">{</span>
<span class="w">   </span><span class="n">u8</span><span class="w"> </span><span class="n">GdmaChnl</span><span class="p">;</span>

<span class="w">   </span><span class="n">assert_param</span><span class="p">(</span><span class="n">GDMA_InitStruct</span><span class="w"> </span><span class="o">!=</span><span class="w"> </span><span class="nb">NULL</span><span class="p">);</span>

<span class="w">   </span><span class="n">DCache_CleanInvalidate</span><span class="p">((</span><span class="n">u32</span><span class="p">)</span><span class="n">pTxBuf</span><span class="p">,</span><span class="w"> </span><span class="n">TxCount</span><span class="p">);</span>
<span class="p">}</span>
</pre></div>
</div>
</td>
<td><div class="highlight-c notranslate"><div class="highlight"><pre><span></span><span class="n">BOOL</span><span class="w"> </span><span class="nf">UART_RXGDMA_Init</span><span class="p">(</span>
<span class="w">   </span><span class="n">u8</span><span class="w"> </span><span class="n">UartIndex</span><span class="p">,</span>
<span class="w">   </span><span class="n">GDMA_InitTypeDef</span><span class="w"> </span><span class="o">*</span><span class="w"> </span><span class="n">GDMA_InitStruct</span><span class="p">,</span>
<span class="w">   </span><span class="kt">void</span><span class="w"> </span><span class="o">*</span><span class="n">CallbackData</span><span class="p">,</span>
<span class="w">   </span><span class="n">IRQ_FUN</span><span class="w"> </span><span class="n">CallbackFunc</span><span class="p">,</span>
<span class="w">   </span><span class="n">u8</span><span class="w"> </span><span class="o">*</span><span class="n">pRxBuf</span><span class="p">,</span>
<span class="w">   </span><span class="kt">int</span><span class="w"> </span><span class="n">RxCount</span>
<span class="p">)</span>
<span class="p">{</span>
<span class="w">   </span><span class="n">u8</span><span class="w"> </span><span class="n">GdmaChnl</span><span class="p">;</span>
<span class="w">   </span><span class="n">UART_TypeDef</span><span class="w"> </span><span class="o">*</span><span class="w"> </span><span class="n">UARTx</span><span class="p">;</span>
<span class="w">   </span><span class="n">assert_param</span><span class="p">(</span><span class="n">GDMA_InitStruct</span><span class="w"> </span><span class="o">!=</span><span class="w"> </span><span class="nb">NULL</span><span class="p">);</span>

<span class="w">   </span><span class="n">DCache_CleanInvalidate</span><span class="p">((</span><span class="n">u32</span><span class="p">)</span><span class="n">pRxBuf</span><span class="p">,</span><span class="w"> </span><span class="n">RxCount</span><span class="p">);</span>
<span class="p">}</span>
</pre></div>
</div>
</td>
</tr>
</tbody>
</table>
</div></div>
</section>
</section>
</section>
<section id="tcem-setting">
<h1>TCEM Setting<a class="headerlink" href="#tcem-setting" title="Link to this heading">ïƒ</a></h1>
<div class="sphinx-tabs docutils container">
<div aria-label="Tabbed content" class="closeable" role="tablist"><button aria-controls="panel-5-5-0" aria-selected="true" class="sphinx-tabs-tab" id="tab-5-5-0" name="5-0" role="tab" tabindex="0">RTL8721Dx</button><button aria-controls="panel-5-5-1" aria-selected="false" class="sphinx-tabs-tab" id="tab-5-5-1" name="5-1" role="tab" tabindex="-1">RTL8720E</button><button aria-controls="panel-5-5-2" aria-selected="false" class="sphinx-tabs-tab" id="tab-5-5-2" name="5-2" role="tab" tabindex="-1">RTL8726E</button><button aria-controls="panel-5-5-3" aria-selected="false" class="sphinx-tabs-tab" id="tab-5-5-3" name="5-3" role="tab" tabindex="-1">RTL8730E</button></div><div aria-labelledby="tab-5-5-0" class="sphinx-tabs-panel" id="panel-5-5-0" name="5-0" role="tabpanel" tabindex="0"><p>The <code class="docutils literal notranslate"><span class="pre">TPR0[24:31]</span></code> (CS_TCEM) provides the function that when the CSN low pulse width is equal to <cite>(CS_TCEM * 32)*busclk</cite>, the SPI Flash Controller will automatically chop the current transmission and pull CS up.</p>
<p>Winbond:</p>
<ul class="simple">
<li><p>When the temperature is less than 85Â°C, PSRAM refresh the intern cell array using normal rate (4us).</p></li>
<li><p>When the temperature is greater than 85Â°C and less than 125Â°C, PSRAM refresh the internal cell array using faster rate (1us). This sets an upper limit on the length of read and write transactions so that the automatic distributed refresh operation can be done between transactions. This limit is called the CS# low maximum time (tCSM) and the tCSM will be equal to the maximum distributed refresh interval.</p></li>
<li><p>So when the temperature is less than 85Â°C, for higher performance, we recommend that <code class="docutils literal notranslate"><span class="pre">CS_TCEM</span></code> should be equal to <cite>4us/busclk/32</cite>. When the temperature is greater than 85Â°C, the value should be equal to <cite>1us/busclk/32</cite>.</p></li>
</ul>
<p>APM:</p>
<ul class="simple">
<li><p>APM is in extended mode by default, so it always keeps fast refresh (1us). Here, <code class="docutils literal notranslate"><span class="pre">CS_TCEM</span></code> is recommended equal to <cite>1us/busclk/32</cite>.</p></li>
</ul>
</div><div aria-labelledby="tab-5-5-1" class="sphinx-tabs-panel" hidden="true" id="panel-5-5-1" name="5-1" role="tabpanel" tabindex="0"><p>The <code class="docutils literal notranslate"><span class="pre">TPR0[24:31]</span></code> (CS_TCEM) provides the function that when the CSN low pulse width is equal to <cite>(CS_TCEM * 32)*busclk</cite>, the SPI Flash Controller will automatically chop the current transmission and pull CS up.</p>
<p>Winbond:</p>
<ul class="simple">
<li><p>When the temperature is less than 85Â°C, PSRAM refresh the intern cell array using normal rate (4us).</p></li>
<li><p>When the temperature is greater than 85Â°C and less than 125Â°C, PSRAM refresh the internal cell array using faster rate (1us). This sets an upper limit on the length of read and write transactions so that the automatic distributed refresh operation can be done between transactions. This limit is called the CS# low maximum time (tCSM) and the tCSM will be equal to the maximum distributed refresh interval.</p></li>
<li><p>So when the temperature is less than 85Â°C, for higher performance, we recommend that <code class="docutils literal notranslate"><span class="pre">CS_TCEM</span></code> should be equal to <cite>4us/busclk/32</cite>. When the temperature is greater than 85Â°C, the value should be equal to <cite>1us/busclk/32</cite>.</p></li>
</ul>
<p>APM:</p>
<ul class="simple">
<li><p>APM is in extended mode by default, so it always keeps fast refresh (1us). Here, <code class="docutils literal notranslate"><span class="pre">CS_TCEM</span></code> is recommended equal to <cite>1us/busclk/32</cite>.</p></li>
</ul>
</div><div aria-labelledby="tab-5-5-2" class="sphinx-tabs-panel" hidden="true" id="panel-5-5-2" name="5-2" role="tabpanel" tabindex="0"><p>The <code class="docutils literal notranslate"><span class="pre">TPR0[24:31]</span></code> (CS_TCEM) provides the function that when the CSN low pulse width is equal to <cite>(CS_TCEM * 32)*busclk</cite>, the SPI Flash Controller will automatically chop the current transmission and pull CS up.</p>
<p>Winbond:</p>
<ul class="simple">
<li><p>When the temperature is less than 85Â°C, PSRAM refresh the intern cell array using normal rate (4us).</p></li>
<li><p>When the temperature is greater than 85Â°C and less than 125Â°C, PSRAM refresh the internal cell array using faster rate (1us). This sets an upper limit on the length of read and write transactions so that the automatic distributed refresh operation can be done between transactions. This limit is called the CS# low maximum time (tCSM) and the tCSM will be equal to the maximum distributed refresh interval.</p></li>
<li><p>So when the temperature is less than 85Â°C, for higher performance, we recommend that <code class="docutils literal notranslate"><span class="pre">CS_TCEM</span></code> should be equal to <cite>4us/busclk/32</cite>. When the temperature is greater than 85Â°C, the value should be equal to <cite>1us/busclk/32</cite>.</p></li>
</ul>
<p>APM:</p>
<ul class="simple">
<li><p>APM is in extended mode by default, so it always keeps fast refresh (1us). Here, <code class="docutils literal notranslate"><span class="pre">CS_TCEM</span></code> is recommended equal to <cite>1us/busclk/32</cite>.</p></li>
</ul>
</div><div aria-labelledby="tab-5-5-3" class="sphinx-tabs-panel" hidden="true" id="panel-5-5-3" name="5-3" role="tabpanel" tabindex="0"><p>RTL8730E dont need this.</p>
</div></div>
</section>


           </div>
          </div>
          <footer><div class="rst-footer-buttons" role="navigation" aria-label="Footer">
        <a href="0_psram_index.html" class="btn btn-neutral float-left" title="Pseudo-Static Random Access Memory (PSRAM)" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left" aria-hidden="true"></span> Previous</a>
        <a href="../8_thermal/0_thermal_index.html" class="btn btn-neutral float-right" title="Thermal Senor" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right" aria-hidden="true"></span></a>
    </div>

  <hr/>

  <div role="contentinfo">
    <p>&#169; Copyright 2025, Realsil.</p>
  </div>

  Built with <a href="https://www.sphinx-doc.org/">Sphinx</a> using a
    <a href="https://github.com/readthedocs/sphinx_rtd_theme">theme</a>
    provided by <a href="https://readthedocs.org">Read the Docs</a>.
   

</footer>
        </div>
    <!-- é—®é¢˜åé¦ˆæŒ‰é’®å’Œå¯¹è¯æ¡† -->
    
        <button id="report-button">Inquire</button>
    
    <div id="feedback-dialog" class="feedback-dialog" style="display: none;">
        <div class="form-group">
            <label style="font-weight: bold;">Please select the related chapter:</label>
            <select id="chapter-select">
                <option value="">Select Chapter</option>
                <!-- ç« èŠ‚é€‰é¡¹å°†é€šè¿‡JavaScriptåŠ¨æ€å¡«å…… -->
            </select>
        </div>

        <div class="form-group">
            <label style="font-weight: bold;">Post Type</label>
            <select id="post-type" class="form-control" required>
                <option value="">-- Select Type --</option>
                <option value="doc_correction">Document Correction</option>
                <option value="tech_consult">Technical Consult</option>
                <option value="tech_summary">Technical Summary</option>
                <option value="operation_flow">Operation Flow</option>
            </select>
        </div>

        <div class="form-group">
            <label style="font-weight: bold;">Related Paragraph:</label>
            <textarea
                id="paragraph-input"
                placeholder="{{ 'ä½ å¯ä»¥å…ˆé€‰æ‹©æœ‰é—®é¢˜çš„æ®µè½æˆ–æ‰‹åŠ¨è¾“å…¥...' if language == 'zh_CN' else 'You can select text or type directly here...' }}"
                rows="4"
            ></textarea>
        </div>

        <div class="form-group">
            <label style="font-weight: bold;">Please describe your issue:</label>
            <textarea
                id="inquire_input"
                placeholder="Feature enhancement in progress, please stay tuned...">
            </textarea>
        </div>

        <button id="submit-feedback">Submit</button>
        <button id="cancel-feedback">Cancel</button>
    </div>

    <style>
        .form-group {
            margin: 5px 0;  /* åŸºç¡€é—´è· */
        }

        /* ç›¸é‚»è¡¨å•é¡¹ç¼©å°ä¸Šæ–¹é—´è· */
        .form-group + .form-group {
            margin-top: 10px;
        }

        /* æ®µè½è¾“å…¥æ¡†åº•éƒ¨å¾®è°ƒ */
        #paragraph-input, #inquire_input {
            margin: 2px 0; /* ä¸Šä¸‹é—´è· */
            width: 100%;
            padding: 8px;
            border: 1px solid #ddd;
            border-radius: 4px;
            resize: vertical;
            min-height: 100px;

            /* å ä½ç¬¦æ ·å¼ */
            &::placeholder {
                color: #999;
                font-style: italic;
            }
        }
    </style>

      </div>
    </section>
  </div>
  <script>
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script>
     
    


</body>
</html>