

<!DOCTYPE html>
<html class="writer-html5" lang="en" data-content_root="../../">
<head>
  <meta charset="utf-8" /><meta name="viewport" content="width=device-width, initial-scale=1" />

  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Features &mdash; Ameba IoT Docs  documentation</title>
      <link rel="stylesheet" type="text/css" href="../../_static/pygments.css?v=80d5e7a1" />
      <link rel="stylesheet" type="text/css" href="../../_static/css/theme.css?v=19f00094" />
      <link rel="stylesheet" type="text/css" href="../../_static/togglebutton.css?v=13237357" />
      <link rel="stylesheet" type="text/css" href="../../_static/custom.css?v=536412e7" />
      <link rel="stylesheet" type="text/css" href="../../_static/tabs.css?v=a5c4661c" />
      <link rel="stylesheet" type="text/css" href="../../_static/custom.css?v=536412e7" />

  
    <link rel="shortcut icon" href="../../_static/favicon.ico"/>
  <!--[if lt IE 9]>
    <script src="../../_static/js/html5shiv.min.js"></script>
  <![endif]-->
  
        <script src="../../_static/jquery.js?v=5d32c60e"></script>
        <script src="../../_static/_sphinx_javascript_frameworks_compat.js?v=2cd50e6c"></script>
        <script src="../../_static/documentation_options.js?v=5929fcd5"></script>
        <script src="../../_static/doctools.js?v=9a2dae69"></script>
        <script src="../../_static/sphinx_highlight.js?v=dc90522c"></script>
        <script src="../../_static/toggleprompt.js?v=d7ede5d2"></script>
        <script src="https://cdn.jsdelivr.net/npm/sweetalert2@11"></script>
        <script src="../../_static/tabs.js?v=3030b3cb"></script>
        <script>let toggleHintShow = 'Click to show';</script>
        <script>let toggleHintHide = 'Click to hide';</script>
        <script>let toggleOpenOnPrint = 'true';</script>
        <script src="../../_static/togglebutton.js?v=4a39c7ea"></script>
        <script>var togglebuttonSelector = '.toggle, .admonition.dropdown';</script>
        <script>var togglebuttonSelector = '.toggle, .admonition.dropdown';</script>
    <script src="../../_static/js/theme.js"></script>
    <link rel="index" title="Index" href="../../genindex.html" />
    <link rel="search" title="Search" href="../../search.html" />
    <link rel="next" title="OTA Firmware Update" href="../1_ota/0_ota_index.html" />
    <link rel="prev" title="Boot Process" href="0_boot_index.html" />
     

    <!-- NDAæ–‡æ¡£è¾“å…¥å¯†ç çš„æ¡† -->
    
<script>
// â–¼â–¼â–¼â–¼â–¼â–¼â–¼â–¼â–¼â–¼â–¼â–¼â–¼â–¼â–¼â–¼â–¼â–¼ å¤šè¯­è¨€é…ç½® â–¼â–¼â–¼â–¼â–¼â–¼â–¼â–¼â–¼â–¼â–¼â–¼â–¼â–¼â–¼â–¼â–¼â–¼
const lang = 'en';  // ä½¿ç”¨ Python å­—ç¬¦ä¸²åˆ‡ç‰‡
const i18n = {
    zh: {
        title: 'è®¿é—®æˆæƒ',
        username: 'ç”¨æˆ·å',
        password: 'å¯†ç ',
        confirm: 'ç¡®è®¤',
        cancel: 'å–æ¶ˆ',
        usernameError: 'ç”¨æˆ·åé”™è¯¯',
        userNotExist: 'è¯¥ç”¨æˆ·ä¸å­˜åœ¨',
        passwordError: 'å¯†ç é”™è¯¯',
        wrongPassword: 'è¯·è¾“å…¥æ­£ç¡®çš„å¯†ç ',
        accessDenied: 'æ— è®¿é—®æƒé™',
        noPermission: 'æ‚¨æ— æƒæŸ¥çœ‹æ­¤å†…å®¹',
        expiredTitle: 'è®¿é—®å·²è¿‡æœŸ',
        expiredMsg: 'æ‚¨çš„æƒé™å·²å¤±æ•ˆ<br>æœ‰æ•ˆæœŸï¼š%s è‡³ %s',
        deniedTitle: 'âš ï¸ æ— è®¿é—®æƒé™',
        contact: 'è¯·è”ç³» claire_wang@realsil.com.cn è·å–æƒé™'
    },
    en: {
        title: 'Access Required',
        username: 'Username',
        password: 'Password',
        confirm: 'Confirm',
        cancel: 'Cancel',
        usernameError: 'Invalid Username',
        userNotExist: 'User does not exist',
        passwordError: 'Wrong Password',
        wrongPassword: 'Please enter correct password',
        accessDenied: 'Access Denied',
        noPermission: 'You have no permission to view this content',
        expiredTitle: 'Authorization Expired',
        expiredMsg: 'Your access has expired<br>Valid period: %s to %s',
        deniedTitle: 'âš ï¸ Access Denied',
        contact: 'Please contact claire_wang@realsil.com.cn for access'
    }
};
// â–²â–²â–²â–²â–²â–²â–²â–²â–²â–²â–²â–²â–²â–²â–²â–²â–²â–² å¤šè¯­è¨€é…ç½®ç»“æŸ â–²â–²â–²â–²â–²â–²â–²â–²â–²â–²â–²â–²â–²â–²â–²â–²â–²â–²
</script>

    <!-- æ ·å¼æ¨¡æ¿ -->
    

<style>
    .wy-nav-content {
        max-width: 1000px;
         
    }
    
    .auth-denied {
        padding: 20px;
        background: #f8f9fa;
        border-radius: 4px;
        border: 1px solid #dee2e6;
        text-align: center;
        color: #721c24;
        margin-top: 20px;
    }
    .auth-denied h3 {
        margin-bottom: 10px;
        color: #dc3545;
    }
    
    #report-button {
        position: fixed;
        top: 10px;
        left: 1120px;
        padding: 10px 20px;
        background-color: #ff00a2;
        color: white;
        border: none;
        border-radius: 5px;
        cursor: pointer;
        z-index: 1000;
    }
    #report-button:hover {
        background-color: #0056b3;
    }
    
    .feedback-dialog {
        position: fixed;
        top: 50%;
        left: 50%;
        transform: translate(-50%, -50%);
        background: white;
        padding: 20px;
        border-radius: 8px;
        box-shadow: 0 4px 10px rgba(0, 0, 0, 0.2);
        z-index: 1001;
        width: 600px;
    }
    .feedback-dialog textarea {
        width: 100%;
        height: 150px;
        margin-top: 10px;
        padding: 10px;
        border: 1px solid #ccc;
        border-radius: 4px;
        resize: vertical;
    }
    .feedback-dialog button {
        margin-top: 10px;
        padding: 8px 16px;
        background-color: #007bff;
        color: white;
        border: none;
        border-radius: 4px;
        cursor: pointer;
    }
    .feedback-dialog button:hover {
        background-color: #0056b3;
    }

    
    
</style>
    <style>
    /* ====================== é€‰æ‹©å™¨æ ·å¼ ====================== */
    /* é€‰æ‹©å™¨å®¹å™¨ */
    .selector-container {
        margin: 8px 0;
        display: flex;
        justify-content: flex-start;
        align-items: center;
    }
    
    /* ç‰ˆæœ¬é€‰æ‹©å™¨ç‰¹æ®Šè¾¹è· */
    .version-selector-container {
        margin-bottom: 8px !important;
    }
    
    /* é€‰æ‹©å™¨æ ‡ç­¾ */
    .selector-label {
        color: white;
        margin-right: 10px;
        width: 80px;
        text-align: right;
        font-size: 0.9em;
    }
    
    /* ä¸‹æ‹‰é€‰æ‹©æ¡† */
    .selector-dropdown {
        width: 120px;
        border-radius: 2px;
        padding: 4px 8px;
        border: 1px solid #405261;
        background: #2c3e50;
        color: white;
        font-size: 0.9em;
    }
    
    /* ä¸‹æ‹‰é€‰æ‹©æ¡†æ‚¬åœæ•ˆæœ */
    .selector-dropdown:hover {
        border-color: #3498db;
        transition: border-color 0.3s;
    }
    
    /* é€‰æ‹©å™¨å“åº”å¼å¸ƒå±€ */
    @media (max-width: 768px) {
        .selector-container {
            flex-direction: column;
            align-items: flex-start;
        }
        
        .selector-label {
            width: 100%;
            text-align: left;
            margin-bottom: 4px;
        }
        
        .selector-dropdown {
            width: 100%;
        }
    }
</style>
    <style>
/* =============== å·¦ä¸Šè§’ç™»å½•åŒºåŸŸ  =============== */
/* ================= ç”¨æˆ·é¢æ¿ ================= */
.user-panel {
    padding: 15px;
    background: #34495e;
    border-radius: 8px;
    margin-bottom: 20px;
}

.username {
    color: #fff;
    font-weight: 500;
    font-size: 1.1em;
    text-align: center;
    margin: 10px 0;
}

/* ================= æŒ‰é’®å®¹å™¨ ================= */
.button-row {
    display: flex;
    gap: 8px;
    width: 100%;
    margin: 10px 0;
}

/* é€šç”¨æŒ‰é’®æ ·å¼ */
.auth-btn, .forum-btn, .official-btn {
    flex: 1;
    padding: 8px;
    border: none;
    border-radius: 4px;
    cursor: pointer;
    transition: opacity 0.3s;
    text-align: center;
    color: white !important;
}

/* è®¤è¯æŒ‰é’® */
.auth-btn {
    background: #3498db;
}

/* è®ºå›æŒ‰é’® */
.forum-btn {
    background: #9b59b6; /* ä¸å‚è€ƒä»£ç çš„å®˜æ–¹æŒ‰é’®åŒè‰² */
}

/* å®˜ç½‘æŒ‰é’® */
.official-btn {
    background: #2ecc71; /* ä¸å‚è€ƒä»£ç æ–‡æ¡£æŒ‰é’®åŒè‰² */
}
/* =============== å·¦ä¸Šè§’ç™»å½•åŒºåŸŸ  =============== */
</style>

    <!-- æ³¨å…¥ TOC æ˜ å°„å’Œå½“å‰é¡µé¢ä¿¡æ¯ -->
    

<!-- TOC æ˜ å°„å’Œå½“å‰æ–‡æ¡£ä¿¡æ¯ -->
<script>
// å°† Python å­—å…¸è½¬æ¢ä¸º JS å¯¹è±¡
const TOC_TITLE_MAP = {"rst_rtos/0_ameba_product": "Products Center", "rst_rtos/0_ameba_product/0_ameba_product_center_index": "Products Center", "rst_rtos/0_ameba_sdk": "Ameba SDK", "rst_rtos/0_ameba_sdk/0_ameba_sdks_index": "Ameba SDK", "rst_rtos/0_ameba_solutions": "Ameba Solutions", "rst_rtos/0_ameba_solutions/0_ameba_solutions_index": "Ameba Solutions", "rst_rtos/0_at_command": "0.8 AT Commands", "rst_rtos/0_at_command/0_at_command_index": "0.8 AT Commands", "rst_rtos/0_file_system": "0.9 Virtual File System", "rst_rtos/0_file_system/0_vfs_index": "0.9 Virtual File System", "rst_rtos/0_gcc_build_environment": "0.1 GCC Build Environment", "rst_rtos/0_gcc_build_environment/0_gcc_build_index": "0.1 GCC Build Environment", "rst_rtos/0_gcc_build_library": "0.3 GCC Build Library", "rst_rtos/0_gcc_build_library/0_gcc_build_library_index": "0.3 GCC Build Library", "rst_rtos/0_gdb_debug": "0.2 GDB Debug", "rst_rtos/0_gdb_debug/0_gdb_debug_index": "0.2 GDB Debug", "rst_rtos/0_memory_layout": "0.5 Flash \u0026 RAM Layout", "rst_rtos/0_memory_layout/0_layout_index": "0.5 Flash \u0026 RAM Layout", "rst_rtos/0_sdk_example": "0.4 SDK Example", "rst_rtos/0_sdk_example/0_sdk_example_index": "0.4 SDK Example", "rst_rtos/0_tools": "0.7 Tools", "rst_rtos/0_tools/0_tools_index": "0.7 Tools", "rst_rtos/0_user_config": "0.6 User Config", "rst_rtos/0_user_config/0_usrcfg_index": "0.6 User Config", "rst_rtos/10_api_docs": "10.0 API Reference", "rst_rtos/10_api_docs/0_api_index": "10.0 API Reference", "rst_rtos/1_boot_process": "1.1 BOOT Process", "rst_rtos/1_boot_process/0_boot_index": "1.1 BOOT Process", "rst_rtos/1_chipen": "1.4 Chip Enable", "rst_rtos/1_chipen/0_chipen_index": "1.4 Chip Enable", "rst_rtos/1_gpio": "1.7 GPIO \u0026 Pin Control", "rst_rtos/1_gpio/0_gpio_index": "1.7 GPIO \u0026 Pin Control", "rst_rtos/1_ipc": "1.5 Inter Processor Communication", "rst_rtos/1_ipc/0_ipc_index": "1.5 Inter Processor Communication", "rst_rtos/1_mpu_cache": "1.0 MPU and Cache", "rst_rtos/1_mpu_cache/0_mpu_cache_index": "1.0 MPU and Cache", "rst_rtos/1_ota": "1.2 OTA", "rst_rtos/1_ota/0_ota_index": "1.2 OTA", "rst_rtos/1_otpc": "1.3 OTPC", "rst_rtos/1_otpc/0_otpc_index": "1.3 OTPC", "rst_rtos/1_pinmux": "1.6 Pin Multiplexing", "rst_rtos/1_pinmux/0_pinmux_index": "1.6 Pin Multiplexing", "rst_rtos/1_power_save": "1.9 Power Save", "rst_rtos/1_power_save/0_ps_index": "1.9 Power Save", "rst_rtos/2_whc_fullmac": "2.1 WHC FullMAC", "rst_rtos/2_whc_fullmac/0_fullmac_index": "2.1 WHC FullMAC", "rst_rtos/2_whc_wifi_bridge": "2.0 WHC Bridge", "rst_rtos/2_whc_wifi_bridge/0_wifi_bridge_index": "2.0 WHC Bridge", "rst_rtos/2_wifi_adaptivity_test": "2.4 Wi-Fi Adaptivity Test", "rst_rtos/2_wifi_adaptivity_test/0_wifi_adaptivity_index": "2.4 Wi-Fi Adaptivity Test", "rst_rtos/2_wifi_csi": "2.3 Wi-Fi CSI", "rst_rtos/2_wifi_csi/0_wifi_csi_index": "2.3 Wi-Fi CSI", "rst_rtos/2_wifi_tunnel": "2.2 Wi-Fi R-Mesh", "rst_rtos/2_wifi_tunnel/0_wifi_tunnel_index": "2.2 Wi-Fi R-Mesh", "rst_rtos/3_crypto_engine": "3.9 Crypto Engine", "rst_rtos/3_crypto_engine/0_crypto_engine_index": "3.9 Crypto Engine", "rst_rtos/3_ecdsa_engine": "3.a ECDSA Engine", "rst_rtos/3_ecdsa_engine/0_ecdsa_index": "3.a ECDSA Engine", "rst_rtos/3_eddsa_engine": "3.b EDDSA Engine", "rst_rtos/3_eddsa_engine/0_eddsa_index": "3.b EDDSA Engine", "rst_rtos/3_nda_huk_derivation": "3.3 HUK Derivation \ud83d\udd12", "rst_rtos/3_nda_huk_derivation/0_huk_derivation_index_nda": "3.3 HUK Derivation \ud83d\udd12", "rst_rtos/3_nda_rdp": "3.4 RDP \ud83d\udd12", "rst_rtos/3_nda_rdp/0_rdp_index_nda": "3.4 RDP \ud83d\udd12", "rst_rtos/3_nda_rsip": "3.5 RSIP \ud83d\udd12", "rst_rtos/3_nda_rsip/0_rsip_index_nda": "3.5 RSIP \ud83d\udd12", "rst_rtos/3_nda_secure_boot": "3.6 Secure Boot \ud83d\udd12", "rst_rtos/3_nda_secure_boot/0_secure_boot_index_nda": "3.6 Secure Boot \ud83d\udd12", "rst_rtos/3_nda_swd_protection": "3.7 SWD Protection \ud83d\udd12", "rst_rtos/3_nda_swd_protection/0_swd_protection_index_nda": "3.7 SWD Protection \ud83d\udd12", "rst_rtos/3_nda_tfm": "3.8 Trusted Firmware-M (TF-M) \ud83d\udd12", "rst_rtos/3_nda_tfm/0_tfm_index_nda": "3.8 Trusted Firmware-M (TF-M) \ud83d\udd12", "rst_rtos/3_rsa_engine": "3.c RSA Engine", "rst_rtos/3_rsa_engine/0_rsa_index": "3.c RSA Engine", "rst_rtos/3_security": "3.1 Security \u0026 Encryption", "rst_rtos/3_security/0_security_index": "3.1 Security \u0026 Encryption", "rst_rtos/3_trng": "3.2 True Random Number Generator", "rst_rtos/3_trng/0_trng_index": "3.2 True Random Number Generator", "rst_rtos/4_ai": "4.1 AI", "rst_rtos/4_ai/0_ai_index": "4.1 AI", "rst_rtos/4_ai_voice": "4.2 AIVoice", "rst_rtos/4_ai_voice/0_ai_voice_index": "4.2 AIVoice", "rst_rtos/4_dsp": "4.4 DSP", "rst_rtos/4_dsp/0_dsp_index": "4.4 DSP", "rst_rtos/4_multimedia": "4.3 Multimedia", "rst_rtos/4_multimedia/0_multimedia_index": "4.3 Multimedia", "rst_rtos/6_mass_production": "6.1 Mass Production", "rst_rtos/6_mass_production/0_mp_index": "6.1 Mass Production", "rst_rtos/6_mp_image": "6.2 MP Image", "rst_rtos/6_mp_image/0_mp_image_index": "6.2 MP Image", "rst_rtos/6_mptools": "6.3 MP Tools", "rst_rtos/6_mptools/0_mptools_index": "6.3 MP Tools", "rst_rtos/7_usb": "7.1 USB Host \u0026 Device", "rst_rtos/7_usb/0_usb_index": "7.1 USB Host \u0026 Device", "rst_rtos/8_adc": "8.4 ADC", "rst_rtos/8_adc/0_adc_index": "8.4 ADC", "rst_rtos/8_cap_touch": "8.7 Cap-Touch", "rst_rtos/8_cap_touch/0_cap_touch_index": "8.7 Cap-Touch", "rst_rtos/8_dmac": "8.1 DMA Controller", "rst_rtos/8_dmac/0_dmac_index": "8.1 DMA Controller", "rst_rtos/8_ir": "8.5 IR", "rst_rtos/8_ir/0_ir_index": "8.5 IR", "rst_rtos/8_key_scan": "8.8 Key-Scan", "rst_rtos/8_key_scan/0_key_scan_index": "8.8 Key-Scan", "rst_rtos/8_lcdc": "8.A LCD Controller", "rst_rtos/8_lcdc/0_lcdc_index": "8.A LCD Controller", "rst_rtos/8_ledc": "8.6 LED Controller", "rst_rtos/8_ledc/0_ledc_index": "8.6 LED Controller", "rst_rtos/8_psram": "8.2 PSRAM", "rst_rtos/8_psram/0_psram_index": "8.2 PSRAM", "rst_rtos/8_rtc_io": "8.9 RTC-IO", "rst_rtos/8_rtc_io/0_rtc_io_index": "8.9 RTC-IO", "rst_rtos/8_thermal": "8.3 Thermal Meter", "rst_rtos/8_thermal/0_thermal_index": "8.3 Thermal Meter"};
console.log("TOC_TITLE_MAP:", TOC_TITLE_MAP);

// è·å–å½“å‰é¡µé¢çš„æ–‡æ¡£å (ä¾‹å¦‚ 'rst_rtos/3_nda_secure_boot/0_secure_boot_index_nda')
const CURRENT_DOCNAME = 'rst_rtos/1_boot_process/1_boot_process_toprst';

// åŠ¨æ€æŸ¥æ‰¾é¡¶çº§åˆ†ç±»å‡½æ•°ï¼ˆå®šä¹‰ä¸ºå…¨å±€å‡½æ•°ï¼‰
window.findTopLevelChapter = function(docname) {
    console.log("Attempting to find top-level chapter for:", docname);
    let bestMatch = "";
    let bestTitle = "Unknown Chapter";

    // æŒ‰è·¯å¾„é•¿åº¦é™åºæ’åºä»¥ç¡®ä¿æœ€é•¿åŒ¹é…
    const sortedPaths = Object.keys(TOC_TITLE_MAP).sort((a, b) => b.length - a.length);

    for (const path of sortedPaths) {
        console.log("Checking path:", path);
        if (docname === path || docname.startsWith(path + '/')) { // å­é¡µé¢
            bestMatch = path;
            bestTitle = TOC_TITLE_MAP[path];
            console.log("Matched path:", path, "with title:", bestTitle);
            break;
        }
    }

    // å¦‚æœæ²¡æœ‰æ‰¾åˆ°ä»»ä½•åŒ¹é…é¡¹ï¼Œåˆ™å°è¯•æ›´çŸ­çš„è·¯å¾„
    if (bestMatch === "") {
        const pathSegments = docname.split('/');
        while (pathSegments.length > 1) { // è‡³å°‘ä¿ç•™æ ¹è·¯å¾„
            const candidate = pathSegments.join('/');
            console.log("Checking shorter path:", candidate);
            if (TOC_TITLE_MAP[candidate]) {
                bestTitle = TOC_TITLE_MAP[candidate];
                console.log("Matched shorter path:", candidate, "with title:", bestTitle);
                break;
            }
            pathSegments.pop();
        }
    }

    console.log("Final top-level chapter:", bestTitle);
    return bestTitle;
}

// åˆå§‹åŒ–æ—¶è°ƒç”¨
document.addEventListener('DOMContentLoaded', function() {
    const topLevelChapter = findTopLevelChapter(CURRENT_DOCNAME);
    console.log("Top Level Chapter:", topLevelChapter);

    // å°†é¡¶çº§åˆ†ç±»æ’å…¥åˆ°DOMä¸­ï¼ˆæ ¹æ®éœ€è¦ï¼‰
    const chapterElement = document.createElement('div');
    chapterElement.className = 'top-level-chapter';
    chapterElement.innerHTML = `<strong>Top Level Chapter: </strong>${topLevelChapter}`;
    document.body.appendChild(chapterElement);
});
</script>

    <!-- é—®é¢˜å›æŠ¥ -->
    <!-- source/_templates/_layout_issue_report.html -->
<div id="prompt-box" style="
    display: none;
    position: fixed;
    top: 20px;
    left: 50%;
    transform: translateX(-50%);
    background: rgba(0,0,0,0.8);
    color: white;
    padding: 10px 20px;
    border-radius: 5px;
    z-index: 9999;
    text-align: center;
    font-size: 14px;
"></div>

<script>
document.addEventListener('DOMContentLoaded', function() {
    const reportButton = document.getElementById('report-button');
    const feedbackDialog = document.getElementById('feedback-dialog');
    const feedbackText = document.getElementById('feedback-text');
    const submitButton = document.getElementById('submit-feedback');
    const cancelButton = document.getElementById('cancel-feedback');
    const promptBox = document.getElementById('prompt-box');

    let selectedText = '';
    let selectedChapters = '';
    const language = 'en'; // è·å–è¯­è¨€å˜é‡

    // å®šä¹‰æ ‡é¢˜å˜é‡ï¼ˆé¡¶æ ¼æ˜¾ç¤ºï¼‰
    const userHeader = 'User:';
    const chaptersHeader = 'Chapters:';
    const paragraphHeader = 'Paragraph:';
    const questionHeader = 'Question:';

    // å®šä¹‰æç¤ºæ¶ˆæ¯
    const saveSuccessMessage = language === 'zh_CN' ? 'é—®é¢˜å·²ä¿å­˜åˆ°æœ¬åœ°æ–‡ä»¶ feedback.txt' : 'Issue saved to local file feedback.txt';

    // æ£€æŸ¥ findTopLevelChapter æ˜¯å¦å·²å®šä¹‰
    if (typeof window.findTopLevelChapter !== 'function') {
        console.error("findTopLevelChapter å‡½æ•°æœªå®šä¹‰ï¼Œè¯·æ£€æŸ¥åŠ è½½é¡ºåºï¼");
        return;
    }

    reportButton.addEventListener('click', function() {
        const selection = window.getSelection();
        selectedText = selection.toString();
        if (!selectedText) {
            alert('Please select the problematic content first');
            return;
        }

        // æ”¶é›†ç« èŠ‚ä¿¡æ¯
        let chapters = new Set(); // ä½¿ç”¨ Set æ¥é¿å…é‡å¤ç« èŠ‚
        if (selection.rangeCount > 0) {
            const range = selection.getRangeAt(0);
            let node = range.commonAncestorContainer;

            // ç¡®ä¿ä»æœ€è¿‘çš„å…ƒç´ èŠ‚ç‚¹å¼€å§‹
            while (node && node.nodeType !== Node.ELEMENT_NODE) {
                node = node.parentElement;
            }

            // ä½¿ç”¨é€’å½’æ–¹æ³•éå†DOMæ ‘
            function collectHeadings(node, level = 0) {
                if (!node) return;

                if (node.tagName && node.tagName.match(/^H[1-6]$/)) {
                    chapters.add(`${node.textContent.trim()}`);
                }

                if (node.previousElementSibling) {
                    collectHeadings(node.previousElementSibling, level);
                }

                if (node.parentElement && node.parentElement.tagName !== 'BODY') {
                    collectHeadings(node.parentElement, level + 1);
                }
            }

            collectHeadings(node);

            // å¦‚æœæ²¡æœ‰æ‰¾åˆ°ä»»ä½•ç« èŠ‚ä¿¡æ¯ï¼Œåˆ™æ·»åŠ é»˜è®¤æç¤º
            if (chapters.size === 0) {
                chapters.add('No chapter information found');
            }
        }

        // è·å–é¡¶çº§ä¾§è¾¹æ ç« èŠ‚
        const topLevelChapter = window.findTopLevelChapter(CURRENT_DOCNAME); // è°ƒç”¨å…¨å±€å‡½æ•°
        chapters.add(`é¡¶çº§åˆ†ç±»ï¼š${topLevelChapter}`); // æ’å…¥åˆ°ç« èŠ‚é›†åˆä¸­

        // æ·»åŠ ç« èŠ‚æ ‡é¢˜
        const chapterHeader = language === 'zh_CN' ? 'ä»¥ä¸‹é€çº§å‘ä¸Šè¿½æº¯ï¼š' : 'Trace upwards level by level:';
        selectedChapters = chapterHeader + '\n' + Array.from(chapters).join('\n');

        feedbackDialog.style.display = 'block';
        feedbackText.value = '';
    });

    submitButton.addEventListener('click', function() {
        const userQuestion = feedbackText.value.trim();
        if (!userQuestion) {
            alert('Issue description cannot be empty');
            return;
        }

        // è·å–ç”¨æˆ·ä¿¡æ¯ï¼ˆå…³é”®ä¿®æ”¹ç‚¹ï¼‰
        const username = localStorage.getItem('username') || 'åŒ¿å'; // ä» localStorage è·å–ç”¨æˆ·å

        // ç»Ÿä¸€å¤„ç†å†…å®¹ç¼©è¿›
        const formatContent = text => text.split('\n').map(line => '    ' + line).join('\n');

        // ç”Ÿæˆæ¶ˆæ¯å†…å®¹ï¼ˆæ ‡é¢˜é¡¶æ ¼ï¼Œå†…å®¹ç¼©è¿›ï¼‰
        const message = `${userHeader}\n` + 
                        `${formatContent(username)}\n\n` +
                        `${chaptersHeader}\n` + 
                        `${formatContent(selectedChapters)}\n\n` +
                        `${paragraphHeader}\n` + 
                        `${formatContent(selectedText)}\n\n` +
                        `${questionHeader}\n` + 
                        `${formatContent(userQuestion)}`;

        // æäº¤åˆ°åç«¯ï¼ˆå…³é”®ä¿®æ”¹ç‚¹ï¼‰
        const feedbackData = {
            user: username,  // ä½¿ç”¨çœŸå®ç”¨æˆ·å
            chapters: selectedChapters,
            paragraph: selectedText,
            question: userQuestion
        };

        fetch('http://172.29.57.206:5000/submit', {
            method: 'POST',
            headers: {
                'Content-Type': 'application/json',
            },
            body: JSON.stringify(feedbackData)
        })
        .then(response => response.json())
        .then(data => {
            console.log('æäº¤æˆåŠŸ:', data);
        })
        .catch(error => {
            console.error('æäº¤å¤±è´¥:', error);
        });

        // åˆ›å»ºBlobå¯¹è±¡å¹¶ä¿å­˜åˆ°æœ¬åœ°æ–‡ä»¶
        const blob = new Blob([message], { type: 'text/plain' });
        const link = document.createElement('a');
        link.href = URL.createObjectURL(blob);
        link.download = 'feedback.txt';
        link.click();

        // æ˜¾ç¤ºæç¤ºæ¡†
        promptBox.textContent = saveSuccessMessage;
        promptBox.style.display = 'block';
        const promptTimeout = setTimeout(() => {
            promptBox.style.display = 'none';
        }, 10000);

        // è‡ªåŠ¨å…³é—­åé¦ˆå¯¹è¯æ¡†
        feedbackDialog.style.display = 'none';
    });

    cancelButton.addEventListener('click', function() {
        feedbackDialog.style.display = 'none';
    });
});
</script>

    <style>
        /* éšè—æ•´ä¸ªæœç´¢æ å®¹å™¨ */
        .wy-side-nav-search > div[role="search"] {
            display: none !important;
        }

        /* æˆ–è€…æ›´ç²¾ç¡®åœ°éšè—è¡¨å• */
        form#rtd-search-form {
            display: none !important;
        }
    </style>

</head>

<body class="wy-body-for-nav"> 
  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >
    

          
          
          <a href="../../index.html" class="icon icon-home">
            Ameba IoT Docs
          </a>
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" aria-label="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

    
    <div id="custom-selectors" style="display: block !important; padding: 0; background: none; border: none;">
    </div>

    <script>
    /* ====================== åµŒå…¥å¼é…ç½®å¼€å§‹ ====================== */
    const embeddedConfig = {
        "freertos": {
            "name": "FreeRTOS",
            "languages": {
                "en": ["latest"],
                "cn": ["latest"]
            }
        },
        "linux": {
            "name": "Linux",
            "languages": {
                "en": ["latest"],
                "cn": ["latest"]
            }
        }
    };
    /* ====================== åµŒå…¥å¼é…ç½®ç»“æŸ ====================== */

    (function() {
        // è·å–åŸºç¡€URLè·¯å¾„
        function getBaseURL() {
            const url = new URL(window.location.href);
            if (url.protocol === 'file:') {
                // æœ¬åœ°è·¯å¾„å¤„ç†
                const pathParts = url.pathname.split('/').filter(part => part !== '');
                const index = pathParts.indexOf('build');
                return `file://${pathParts.slice(0, index + 1).join('/')}/`;
            } else {
                // ç½‘ç»œè·¯å¾„å¤„ç†
                return `${url.origin}/${url.pathname.split('/').slice(1, 3).join('/')}/`;
            }
        }

        // è·å–å½“å‰URLè·¯å¾„åˆ†æ®µ
        function getCurrentSegments() {
            const url = new URL(window.location.href);
            let segments = url.pathname.split('/').filter(segment => segment);

            if (url.protocol === 'file:') {
                // æœ¬åœ°è·¯å¾„å¤„ç†
                const index = segments.indexOf('build');
                segments = segments.slice(index + 1); // å»æ‰ build åŠä¹‹å‰çš„è·¯å¾„
            } else {
                // ç½‘ç»œè·¯å¾„å¤„ç†
                segments = segments.slice(3); // å»æ‰ ameba-iot-docs/
            }

            return {
                osKey: segments[0] || 'freertos', // é»˜è®¤ä¸º freertos
                language: segments[1] || 'en',   // é»˜è®¤ä¸º en
                version: segments[2] || 'latest' // é»˜è®¤ä¸º latest
            };
        }

        // è·å–OSæ˜¾ç¤ºåç§°åˆ—è¡¨
        function getOSNames(data) {
            return Object.keys(data).map(key => data[key].name);
        }

        // è·å–æŒ‡å®šOSçš„è¯­è¨€åˆ—è¡¨
        function getLanguages(data, osKey) {
            return Object.keys(data[osKey]?.languages || {});
        }

        // è·å–æŒ‡å®šOSå’Œè¯­è¨€çš„ç‰ˆæœ¬åˆ—è¡¨
        function getVersions(data, osKey, language) {
            return data[osKey]?.languages?.[language] || ['latest'];
        }

        // æ ¹æ®æ˜¾ç¤ºåç§°æŸ¥æ‰¾OSé”®
        function findOSKey(data, displayName) {
            return Object.keys(data).find(key => data[key].name === displayName);
        }

        // åˆå§‹åŒ–é€‰æ‹©å™¨
        function initSelectors() {
            const segments = getCurrentSegments();
            const currentOSName = embeddedConfig[segments.osKey]?.name;

            // å¦‚æœ OS æ— æ•ˆï¼Œé»˜è®¤è®¾ç½®ä¸º FreeRTOS
            if (!currentOSName) {
                console.warn("Invalid OS key, defaulting to FreeRTOS");
                segments.osKey = 'freertos';
            }

            // å¦‚æœè¯­è¨€æ— æ•ˆï¼Œé»˜è®¤è®¾ç½®ä¸º en
            if (!getLanguages(embeddedConfig, segments.osKey).includes(segments.language)) {
                console.warn("Invalid language, defaulting to en");
                segments.language = 'en';
            }

            // è·å–åŸºç¡€URL
            const baseURL = getBaseURL();

            // ç”Ÿæˆé€‰æ‹©å™¨HTML
            document.getElementById('custom-selectors').innerHTML = `
                <div id="custom-selectors" style="padding: 0; background: none; border: none;">
                    <!-- ç³»ç»Ÿé€‰æ‹©å™¨ -->
                    <div class="selector-container">
                        <label class="selector-label">
                            ${segments.language === 'cn' ? 'ç³»ç»Ÿ' : 'OS'}:
                        </label>
                        <select id="os-selector" class="selector-dropdown">
                            ${Object.keys(embeddedConfig).map(key => `
                                <option value="${key}">${embeddedConfig[key].name}</option>
                            `).join('')}
                        </select>
                    </div>

                    <!-- è¯­è¨€é€‰æ‹©å™¨ -->
                    <div class="selector-container">
                        <label class="selector-label">
                            ${segments.language === 'cn' ? 'è¯­è¨€' : 'Language'}:
                        </label>
                        <select id="language-selector" class="selector-dropdown">
                            ${getLanguages(embeddedConfig, segments.osKey).map(lang => `
                                <option value="${lang}">${lang}</option>
                            `).join('')}
                        </select>
                    </div>

                    <!-- ç‰ˆæœ¬é€‰æ‹©å™¨ -->
                    <div class="selector-container version-selector-container">
                        <label class="selector-label">
                            ${segments.language === 'cn' ? 'ç‰ˆæœ¬' : 'Version'}:
                        </label>
                        <select id="version-selector" class="selector-dropdown">
                            ${getVersions(embeddedConfig, segments.osKey, segments.language).map(ver => `
                                <option value="${ver}">${ver}</option>
                            `).join('')}
                        </select>
                    </div>

                    

                </div>`;

            // è®¾ç½®åˆå§‹é€‰ä¸­å€¼
            document.getElementById('os-selector').value = segments.osKey;
            document.getElementById('language-selector').value = segments.language;

            // ç¡®ä¿ç‰ˆæœ¬é€‰æ‹©æ¡†æœ‰é»˜è®¤å€¼
            const versionSelector = document.getElementById('version-selector');
            const availableVersions = getVersions(embeddedConfig, segments.osKey, segments.language);
            versionSelector.value = availableVersions.includes(segments.version) ? segments.version : availableVersions[0] || 'latest';

            // ç»‘å®šäº‹ä»¶ç›‘å¬
            document.getElementById('os-selector').addEventListener('change', () => {
                const newOSKey = document.getElementById('os-selector').value;
                const availableLangs = getLanguages(embeddedConfig, newOSKey);
                const defaultLang = availableLangs[0] || 'en';
                const defaultVersion = getVersions(embeddedConfig, newOSKey, defaultLang)[0] || 'latest';
                redirectTo(`${baseURL}${newOSKey}/${defaultLang}/${defaultVersion}/`);
            });

            document.getElementById('language-selector').addEventListener('change', () => {
                const newLang = document.getElementById('language-selector').value;
                const defaultVersion = getVersions(embeddedConfig, segments.osKey, newLang)[0] || 'latest';
                redirectTo(`${baseURL}${segments.osKey}/${newLang}/${defaultVersion}/`);
            });

            document.getElementById('version-selector').addEventListener('change', () => {
                const newVer = document.getElementById('version-selector').value;
                redirectTo(`${baseURL}${segments.osKey}/${segments.language}/${newVer}/`);
            });

            // ====================== æ–°å¢ä»£ç ï¼šæ³¨å†Œå’Œç™»å½•çš„å¼¹çª—é€»è¾‘ ======================
            function createAuthDialog(type) {
                const lang = segments.language === 'cn' ? 'cn' : 'en';
                
                // åˆ›å»ºå¼¹çª—å®¹å™¨
                const dialog = document.createElement('div');
                dialog.style.cssText = `
                    position: fixed;
                    top: 0;
                    left: 0;
                    width: 100%;
                    height: 100%;
                    background: rgba(0,0,0,0.5);
                    display: flex;
                    justify-content: center;
                    align-items: center;
                    z-index: 9999;
                `;

                // å¼¹çª—å†…å®¹
                const content = document.createElement('div');
                content.style.cssText = `
                    background: white;
                    padding: 20px;
                    border-radius: 8px;
                    min-width: 300px;
                `;

                // æ ‡é¢˜
                const title = document.createElement('h3');
                title.textContent = type === 'register' 
                    ? (lang === 'cn' ? 'æ³¨å†Œ' : 'Register') 
                    : (lang === 'cn' ? 'ç™»å½•' : 'Login');
                content.appendChild(title);

                // ç”¨æˆ·åè¾“å…¥
                const usernameLabel = document.createElement('label');
                usernameLabel.textContent = lang === 'cn' ? 'ç”¨æˆ·åï¼š' : 'Username:';
                const usernameInput = document.createElement('input');
                usernameInput.style.cssText = 'width: 100%; margin-bottom: 10px; padding: 5px;';
                content.appendChild(usernameLabel);
                content.appendChild(usernameInput);

                // å¯†ç è¾“å…¥
                const passwordLabel = document.createElement('label');
                passwordLabel.textContent = lang === 'cn' ? 'å¯†ç ï¼š' : 'Password:';
                const passwordInput = document.createElement('input');
                passwordInput.type = 'password';
                passwordInput.style.cssText = 'width: 100%; margin-bottom: 10px; padding: 5px;';
                content.appendChild(passwordLabel);
                content.appendChild(passwordInput);

                // æ³¨å†Œæ—¶éœ€è¦ç¡®è®¤å¯†ç 
                let confirmPasswordInput;
                if (type === 'register') {
                    const confirmLabel = document.createElement('label');
                    confirmLabel.textContent = lang === 'cn' ? 'ç¡®è®¤å¯†ç ï¼š' : 'Confirm Password:';
                    confirmPasswordInput = document.createElement('input');
                    confirmPasswordInput.type = 'password';
                    confirmPasswordInput.style.cssText = 'width: 100%; margin-bottom: 10px; padding: 5px;';
                    content.appendChild(confirmLabel);
                    content.appendChild(confirmPasswordInput);
                }

                // æŒ‰é’®å®¹å™¨
                const buttonContainer = document.createElement('div');
                buttonContainer.style.cssText = 'display: flex; gap: 10px; margin-top: 10px;';

                // ç¡®è®¤æŒ‰é’®
                const confirmBtn = document.createElement('button');
                confirmBtn.textContent = lang === 'cn' ? 'ç¡®è®¤' : 'Confirm';
                confirmBtn.onclick = () => {
                    const username = usernameInput.value.trim();
                    const password = passwordInput.value.trim();
                    const confirmPassword = confirmPasswordInput ? confirmPasswordInput.value.trim() : null;

                    // éªŒè¯è¾“å…¥
                    if (!username || !password) {
                        alert(lang === 'cn' ? 'ç”¨æˆ·åå’Œå¯†ç ä¸èƒ½ä¸ºç©ºï¼' : 'Username and password are required!');
                        return;
                    }

                    if (type === 'register' && password !== confirmPassword) {
                        alert(lang === 'cn' ? 'ä¸¤æ¬¡è¾“å…¥çš„å¯†ç ä¸ä¸€è‡´ï¼' : 'Passwords do not match!');
                        return;
                    }

                    // flask å‘é€è¯·æ±‚
                    fetch('http://172.29.57.206:5000/auth', {
                        method: 'POST',
                        headers: { 'Content-Type': 'application/json' },
                        body: JSON.stringify({
                            action: type,
                            username,
                            password
                        })
                    })
                    .then(response => response.json())
                    .then(data => {
                        if (data.success) {
                            alert(lang === 'cn' ? 'æ“ä½œæˆåŠŸï¼' : 'Success!');
                            // æ›´æ–°æœ¬åœ°å­˜å‚¨å’ŒUI
                            localStorage.setItem('isLoggedIn', 'true');
                            localStorage.setItem('username', username);
                            // å¼ºåˆ¶åˆ·æ–°æ˜¾ç¤ºçŠ¶æ€
                            document.getElementById('auth-buttons').style.display = 'none';
                            document.getElementById('user-info').style.display = 'block';
                            document.getElementById('username-display').textContent = username;
                            document.body.removeChild(dialog);
                        } else {
                            alert(lang === 'cn' ? 'å¤±è´¥ï¼š' + data.message : 'Failed: ' + data.message);
                        }
                    })
                    .catch(error => {
                        console.error('Error:', error);
                        alert(lang === 'cn' ? 'ç½‘ç»œé”™è¯¯' : 'Network error');
                    });
                };

                // å–æ¶ˆæŒ‰é’®
                const cancelBtn = document.createElement('button');
                cancelBtn.textContent = lang === 'cn' ? 'å–æ¶ˆ' : 'Cancel';
                cancelBtn.onclick = () => document.body.removeChild(dialog);

                buttonContainer.appendChild(confirmBtn);
                buttonContainer.appendChild(cancelBtn);
                content.appendChild(buttonContainer);
                dialog.appendChild(content);
                document.body.appendChild(dialog);
            }

            // æ³¨å†ŒæŒ‰é’®ç‚¹å‡»äº‹ä»¶
            document.getElementById('register-button').addEventListener('click', () => {
                createAuthDialog('register');
            });

            // ç™»å½•æŒ‰é’®ç‚¹å‡»äº‹ä»¶
            document.getElementById('login-button').addEventListener('click', () => {
                createAuthDialog('login');
            });

            // è·³è½¬å‡½æ•°
            function redirectTo(path) {
                const url = new URL(path, window.location.href);
                if (url.protocol === 'file:') {
                    // æœ¬åœ°è·¯å¾„é™„åŠ  index.html
                    url.pathname += 'index.html';
                }
                window.location.href = url.href;
            }

            /* =============== å·¦ä¸Šè§’ç™»å½•åŒºåŸŸ  =============== */
            function syncLoginState() {
                const isLoggedIn = localStorage.getItem('isLoggedIn') === 'true';
                document.getElementById('auth-buttons').style.display = isLoggedIn ? 'none' : 'flex';
                document.getElementById('user-info').style.display = isLoggedIn ? 'block' : 'none';
                if (isLoggedIn) {
                    document.getElementById('username-display').textContent = localStorage.getItem('username') || '';
                }
            }

            // åˆå§‹åŒ–åŒæ­¥çŠ¶æ€
            syncLoginState();
            /* =============== å·¦ä¸Šè§’ç™»å½•åŒºåŸŸ  =============== */
        }

        // DOMåŠ è½½å®Œæˆååˆå§‹åŒ–
        document.addEventListener('DOMContentLoaded', () => {
            try {
                initSelectors();
            } catch (error) {
                console.error("Error initializing selectors:", error);
            }
        });
    })();
</script>

        </div><div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
              <ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../0_ameba_product/0_ameba_product_center_index.html">Products Center</a></li>
<li class="toctree-l1"><a class="reference internal" href="../0_ameba_sdk/0_ameba_sdks_index.html">Ameba SDK</a></li>
<li class="toctree-l1"><a class="reference internal" href="../0_ameba_solutions/0_ameba_solutions_index.html">Ameba Solutions</a></li>
<li class="toctree-l1"><a class="reference internal" href="../0_gcc_build_environment/0_gcc_build_index.html">0.1 GCC Build Environment</a></li>
<li class="toctree-l1"><a class="reference internal" href="../0_gdb_debug/0_gdb_debug_index.html">0.2 GDB Debug</a></li>
<li class="toctree-l1"><a class="reference internal" href="../0_gcc_build_library/0_gcc_build_library_index.html">0.3 GCC Build Library</a></li>
<li class="toctree-l1"><a class="reference internal" href="../0_sdk_example/0_sdk_example_index.html">0.4 SDK Example</a></li>
<li class="toctree-l1"><a class="reference internal" href="../0_memory_layout/0_layout_index.html">0.5 Flash &amp; RAM Layout</a></li>
<li class="toctree-l1"><a class="reference internal" href="../0_user_config/0_usrcfg_index.html">0.6 User Config</a></li>
<li class="toctree-l1"><a class="reference internal" href="../0_tools/0_tools_index.html">0.7 Tools</a></li>
<li class="toctree-l1"><a class="reference internal" href="../0_at_command/0_at_command_index.html">0.8 AT Commands</a></li>
<li class="toctree-l1"><a class="reference internal" href="../0_file_system/0_vfs_index.html">0.9 Virtual File System</a></li>
<li class="toctree-l1"><a class="reference internal" href="../1_mpu_cache/0_mpu_cache_index.html">1.0 MPU and Cache</a></li>
<li class="toctree-l1 current"><a class="reference internal" href="0_boot_index.html">1.1 BOOT Process</a><ul class="current">
<li class="toctree-l2 current"><a class="current reference internal" href="#">Features</a></li>
<li class="toctree-l2"><a class="reference internal" href="#boot-address">Boot Address</a></li>
<li class="toctree-l2"><a class="reference internal" href="#pin-description">Pin Description</a></li>
<li class="toctree-l2"><a class="reference internal" href="#boot-flow">Boot Flow</a></li>
<li class="toctree-l2"><a class="reference internal" href="#boot-api">Boot API</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../1_ota/0_ota_index.html">1.2 OTA</a></li>
<li class="toctree-l1"><a class="reference internal" href="../1_otpc/0_otpc_index.html">1.3 OTPC</a></li>
<li class="toctree-l1"><a class="reference internal" href="../1_chipen/0_chipen_index.html">1.4 Chip Enable</a></li>
<li class="toctree-l1"><a class="reference internal" href="../1_ipc/0_ipc_index.html">1.5 Inter Processor Communication</a></li>
<li class="toctree-l1"><a class="reference internal" href="../1_pinmux/0_pinmux_index.html">1.6 Pin Multiplexing</a></li>
<li class="toctree-l1"><a class="reference internal" href="../1_gpio/0_gpio_index.html">1.7 GPIO &amp; Pin Control</a></li>
<li class="toctree-l1"><a class="reference internal" href="../1_power_save/0_ps_index.html">1.9 Power Save</a></li>
<li class="toctree-l1"><a class="reference internal" href="../2_whc_wifi_bridge/0_wifi_bridge_index.html">2.0 WHC Bridge</a></li>
<li class="toctree-l1"><a class="reference internal" href="../2_whc_fullmac/0_fullmac_index.html">2.1 WHC FullMAC</a></li>
<li class="toctree-l1"><a class="reference internal" href="../2_wifi_tunnel/0_wifi_tunnel_index.html">2.2 Wi-Fi R-Mesh</a></li>
<li class="toctree-l1"><a class="reference internal" href="../2_wifi_csi/0_wifi_csi_index.html">2.3 Wi-Fi CSI</a></li>
<li class="toctree-l1"><a class="reference internal" href="../2_wifi_adaptivity_test/0_wifi_adaptivity_index.html">2.4 Wi-Fi Adaptivity Test</a></li>
<li class="toctree-l1"><a class="reference internal" href="../3_security/0_security_index.html">3.1 Security &amp; Encryption</a></li>
<li class="toctree-l1"><a class="reference internal" href="../3_trng/0_trng_index.html">3.2 True Random Number Generator</a></li>
<li class="toctree-l1"><a class="reference internal" href="../3_nda_huk_derivation/0_huk_derivation_index_nda.html">3.3 HUK Derivation ğŸ”’</a></li>
<li class="toctree-l1"><a class="reference internal" href="../3_nda_rdp/0_rdp_index_nda.html">3.4 RDP ğŸ”’</a></li>
<li class="toctree-l1"><a class="reference internal" href="../3_nda_rsip/0_rsip_index_nda.html">3.5 RSIP ğŸ”’</a></li>
<li class="toctree-l1"><a class="reference internal" href="../3_nda_secure_boot/0_secure_boot_index_nda.html">3.6 Secure Boot ğŸ”’</a></li>
<li class="toctree-l1"><a class="reference internal" href="../3_nda_swd_protection/0_swd_protection_index_nda.html">3.7 SWD Protection ğŸ”’</a></li>
<li class="toctree-l1"><a class="reference internal" href="../3_nda_tfm/0_tfm_index_nda.html">3.8 Trusted Firmware-M (TF-M) ğŸ”’</a></li>
<li class="toctree-l1"><a class="reference internal" href="../3_crypto_engine/0_crypto_engine_index.html">3.9 Crypto Engine</a></li>
<li class="toctree-l1"><a class="reference internal" href="../3_ecdsa_engine/0_ecdsa_index.html">3.a ECDSA Engine</a></li>
<li class="toctree-l1"><a class="reference internal" href="../3_eddsa_engine/0_eddsa_index.html">3.b EDDSA Engine</a></li>
<li class="toctree-l1"><a class="reference internal" href="../3_rsa_engine/0_rsa_index.html">3.c RSA Engine</a></li>
<li class="toctree-l1"><a class="reference internal" href="../4_ai/0_ai_index.html">4.1 AI</a></li>
<li class="toctree-l1"><a class="reference internal" href="../4_ai_voice/0_ai_voice_index.html">4.2 AIVoice</a></li>
<li class="toctree-l1"><a class="reference internal" href="../4_multimedia/0_multimedia_index.html">4.3 Multimedia</a></li>
<li class="toctree-l1"><a class="reference internal" href="../4_dsp/0_dsp_index.html">4.4 DSP</a></li>
<li class="toctree-l1"><a class="reference internal" href="../6_mass_production/0_mp_index.html">6.1 Mass Production</a></li>
<li class="toctree-l1"><a class="reference internal" href="../6_mp_image/0_mp_image_index.html">6.2 MP Image</a></li>
<li class="toctree-l1"><a class="reference internal" href="../6_mptools/0_mptools_index.html">6.3 MP Tools</a></li>
<li class="toctree-l1"><a class="reference internal" href="../7_usb/0_usb_index.html">7.1 USB Host &amp; Device</a></li>
<li class="toctree-l1"><a class="reference internal" href="../8_dmac/0_dmac_index.html">8.1 DMA Controller</a></li>
<li class="toctree-l1"><a class="reference internal" href="../8_psram/0_psram_index.html">8.2 PSRAM</a></li>
<li class="toctree-l1"><a class="reference internal" href="../8_thermal/0_thermal_index.html">8.3 Thermal Meter</a></li>
<li class="toctree-l1"><a class="reference internal" href="../8_adc/0_adc_index.html">8.4 ADC</a></li>
<li class="toctree-l1"><a class="reference internal" href="../8_ir/0_ir_index.html">8.5 IR</a></li>
<li class="toctree-l1"><a class="reference internal" href="../8_ledc/0_ledc_index.html">8.6 LED Controller</a></li>
<li class="toctree-l1"><a class="reference internal" href="../8_cap_touch/0_cap_touch_index.html">8.7 Cap-Touch</a></li>
<li class="toctree-l1"><a class="reference internal" href="../8_key_scan/0_key_scan_index.html">8.8 Key-Scan</a></li>
<li class="toctree-l1"><a class="reference internal" href="../8_rtc_io/0_rtc_io_index.html">8.9 RTC-IO</a></li>
<li class="toctree-l1"><a class="reference internal" href="../8_lcdc/0_lcdc_index.html">8.A LCD Controller</a></li>
<li class="toctree-l1"><a class="reference internal" href="../10_api_docs/0_api_index.html">10.0 API Reference</a></li>
</ul>

        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap"><nav class="wy-nav-top" aria-label="Mobile navigation menu" >
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../../index.html">Ameba IoT Docs</a>
      </nav>

      <div class="wy-nav-content">
    
        <div class="rst-content">
          <div role="navigation" aria-label="Page navigation">
  <ul class="wy-breadcrumbs">
      <li><a href="../../index.html" class="icon icon-home" aria-label="Home"></a></li>
          <li class="breadcrumb-item"><a href="0_boot_index.html">Boot Process</a></li>
      <li class="breadcrumb-item active">Features</li>
      <li class="wy-breadcrumbs-aside">
      </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
             
  <span class="target" id="boot-process"></span><!-- ä¸‹æ‹‰èœå• -->
<div style="margin: 20px 0; text-align: left;">
    <div style="display: flex; align-items: center; gap: 10px;">
        <span style="font-size: 14px;">IC: </span>
        <select class="tab-selector" style="height: 22px; padding: 2px 8px; font-size: 13px;">
            <option value="RTL8721Dx">RTL8721Dx</option>
            <option value="RTL8720E">RTL8720E</option>
            <option value="RTL8726E">RTL8726E</option>
            <option value="RTL8730E">RTL8730E</option>
        </select>
    </div>
</div>

<!-- ä¿®å¤åçš„ JavaScript -->
<script>
document.addEventListener("DOMContentLoaded", function() {
    const selector = document.querySelector('.tab-selector');

    selector.addEventListener('change', function() {
        const targetTab = this.value;
        const tabs = document.querySelectorAll('.sphinx-tabs-tab');
        let found = false;

        tabs.forEach(tab => {
            const tabText = tab.textContent.trim();
            if (tabText === targetTab) {
                tab.click();
                window.dispatchEvent(new Event('resize')); // è§¦å‘æ’ä»¶æ›´æ–°
                found = true;
            }
        });

        if (!found) {
            console.error("æœªæ‰¾åˆ°é€‰é¡¹å¡:", targetTab);
        }
    });
});
</script><section id="features">
<h1>Features<a class="headerlink" href="#features" title="Link to this heading">ïƒ</a></h1>
<div class="sphinx-tabs docutils container">
<div aria-label="Tabbed content" class="closeable" role="tablist"><button aria-controls="panel-0-0-0" aria-selected="true" class="sphinx-tabs-tab" id="tab-0-0-0" name="0-0" role="tab" tabindex="0">RTL8721Dx</button><button aria-controls="panel-0-0-1" aria-selected="false" class="sphinx-tabs-tab" id="tab-0-0-1" name="0-1" role="tab" tabindex="-1">RTL8720E</button><button aria-controls="panel-0-0-2" aria-selected="false" class="sphinx-tabs-tab" id="tab-0-0-2" name="0-2" role="tab" tabindex="-1">RTL8726E</button><button aria-controls="panel-0-0-3" aria-selected="false" class="sphinx-tabs-tab" id="tab-0-0-3" name="0-3" role="tab" tabindex="-1">RTL8730E</button></div><div aria-labelledby="tab-0-0-0" class="sphinx-tabs-panel" id="panel-0-0-0" name="0-0" role="tabpanel" tabindex="0"><ul class="simple">
<li><p>On-chip boot ROM</p></li>
<li><p>Contains the bootloader with In-System Programming (ISP) facility</p></li>
<li><p>Secure boot process using the Ed25519 Cryptographic Algorithm</p></li>
<li><p>Suspend resume process for low power</p></li>
<li><p>Boot from NOR flash</p></li>
<li><p>PSRAM as a memory</p></li>
</ul>
</div><div aria-labelledby="tab-0-0-1" class="sphinx-tabs-panel" hidden="true" id="panel-0-0-1" name="0-1" role="tabpanel" tabindex="0"><ul class="simple">
<li><p>On-chip boot ROM</p></li>
<li><p>Contains the bootloader with In-System Programming (ISP) facility</p></li>
<li><p>Secure boot process with multiple cryptographic algorithms of hardware or software engine</p></li>
<li><p>Suspend resume process for low power</p></li>
<li><p>Boot from NOR flash</p></li>
<li><p>PSRAM as a memory</p></li>
</ul>
</div><div aria-labelledby="tab-0-0-2" class="sphinx-tabs-panel" hidden="true" id="panel-0-0-2" name="0-2" role="tabpanel" tabindex="0"><ul class="simple">
<li><p>On-chip boot ROM</p></li>
<li><p>Contains the bootloader with In-System Programming (ISP) facility</p></li>
<li><p>Secure boot process with multiple cryptographic algorithms of hardware or software engine</p></li>
<li><p>Suspend resume process for low power</p></li>
<li><p>Boot from NOR flash</p></li>
<li><p>PSRAM as a memory</p></li>
</ul>
</div><div aria-labelledby="tab-0-0-3" class="sphinx-tabs-panel" hidden="true" id="panel-0-0-3" name="0-3" role="tabpanel" tabindex="0"><ul class="simple">
<li><p>On-chip boot ROM</p></li>
<li><p>Contains the bootloader with In-System Programming (ISP) facility</p></li>
<li><p>Secure boot process with multiple cryptographic algorithms of hardware or software engine</p></li>
<li><p>Suspend resume process for low power</p></li>
<li><p>Boot from NAND or NOR Flash</p></li>
<li><p>PSRAM or DDR as memory</p></li>
</ul>
</div></div>
</section>
<section id="boot-address">
<h1>Boot Address<a class="headerlink" href="#boot-address" title="Link to this heading">ïƒ</a></h1>
<div class="sphinx-tabs docutils container">
<div aria-label="Tabbed content" class="closeable" role="tablist"><button aria-controls="panel-1-1-0" aria-selected="true" class="sphinx-tabs-tab" id="tab-1-1-0" name="1-0" role="tab" tabindex="0">RTL8721Dx</button><button aria-controls="panel-1-1-1" aria-selected="false" class="sphinx-tabs-tab" id="tab-1-1-1" name="1-1" role="tab" tabindex="-1">RTL8720E</button><button aria-controls="panel-1-1-2" aria-selected="false" class="sphinx-tabs-tab" id="tab-1-1-2" name="1-2" role="tab" tabindex="-1">RTL8726E</button><button aria-controls="panel-1-1-3" aria-selected="false" class="sphinx-tabs-tab" id="tab-1-1-3" name="1-3" role="tab" tabindex="-1">RTL8730E</button></div><div aria-labelledby="tab-1-1-0" class="sphinx-tabs-panel" id="panel-1-1-0" name="1-0" role="tabpanel" tabindex="0"><p>On reset, the processor loads the PC with the value of the reset vector defined in the vector table, which is fixed by hardware. Both KM4 and KM0 boot from address <code class="docutils literal notranslate"><span class="pre">0x0000_0000</span></code>.</p>
<table class="docutils align-default" style="width: 100%">
<thead>
<tr class="row-odd"><th class="head"><p>CPU</p></th>
<th class="head"><p>Boot address</p></th>
<th class="head"><p>Type</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>KM4</p></td>
<td><p>0x0000_0000</p></td>
<td><p>KM4 ITCM ROM</p></td>
</tr>
<tr class="row-odd"><td><p>KM0</p></td>
<td><p>0x0000_0000</p></td>
<td><p>KM0 ITCM ROM</p></td>
</tr>
</tbody>
</table>
</div><div aria-labelledby="tab-1-1-1" class="sphinx-tabs-panel" hidden="true" id="panel-1-1-1" name="1-1" role="tabpanel" tabindex="0"><p>On reset, the processor loads the PC with the value of the reset vector defined in the vector table, which is fixed by hardware. Both KM4 and KR4 boot from the address <code class="docutils literal notranslate"><span class="pre">0x0000_0000</span></code>.</p>
<table class="docutils align-default" style="width: 100%">
<thead>
<tr class="row-odd"><th class="head"><p>CPU</p></th>
<th class="head"><p>Boot address</p></th>
<th class="head"><p>Type</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>KM4</p></td>
<td><p>0x0000_0000</p></td>
<td><p>KM4 ITCM ROM</p></td>
</tr>
<tr class="row-odd"><td><p>KR4</p></td>
<td><p>0x0000_0000</p></td>
<td><p>KR4 ITCM ROM</p></td>
</tr>
</tbody>
</table>
</div><div aria-labelledby="tab-1-1-2" class="sphinx-tabs-panel" hidden="true" id="panel-1-1-2" name="1-2" role="tabpanel" tabindex="0"><p>On reset, the processor loads the PC with the value of the reset vector defined in the vector table. For KM4 and KR4, this value is hardware-fixed at address 0. In contrast, the DSP uses a configurable value, starting from a user-defined address.</p>
<table class="docutils align-default" style="width: 100%">
<thead>
<tr class="row-odd"><th class="head"><p>CPU</p></th>
<th class="head"><p>Boot address</p></th>
<th class="head"><p>Type</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>KM4</p></td>
<td><p>0x0000_0000</p></td>
<td><p>KM4 ITCM ROM</p></td>
</tr>
<tr class="row-odd"><td><p>KR4</p></td>
<td><p>0x0000_0000</p></td>
<td><p>KR4 ITCM ROM</p></td>
</tr>
<tr class="row-even"><td><p>DSP</p></td>
<td><p>User Configurable</p></td>
<td><p>Flash/SRAM/PSRAM</p></td>
</tr>
</tbody>
</table>
</div><div aria-labelledby="tab-1-1-3" class="sphinx-tabs-panel" hidden="true" id="panel-1-1-3" name="1-3" role="tabpanel" tabindex="0"><p>On reset, the processor loads the PC with the value of the reset vector defined in the vector table, which is fixed by hardware. KM0 (LP), KM4 (NP), and CA32 (AP) all boot from address <code class="docutils literal notranslate"><span class="pre">0x0000_0000</span></code>.</p>
<table class="docutils align-default" style="width: 100%">
<thead>
<tr class="row-odd"><th class="head"><p>CPU</p></th>
<th class="head"><p>Boot address</p></th>
<th class="head"><p>Type</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>KM0</p></td>
<td><p>0x0000_0000</p></td>
<td><p>KM0 ITCM ROM</p></td>
</tr>
<tr class="row-odd"><td><p>KM4</p></td>
<td><p>0x0000_0000</p></td>
<td><p>KM4 ITCM ROM</p></td>
</tr>
<tr class="row-even"><td><p>CA32</p></td>
<td><p>0x0000_0000</p></td>
<td><p>CA32 BUS ROM</p></td>
</tr>
</tbody>
</table>
</div></div>
</section>
<section id="pin-description">
<h1>Pin Description<a class="headerlink" href="#pin-description" title="Link to this heading">ïƒ</a></h1>
<div class="sphinx-tabs docutils container">
<div aria-label="Tabbed content" class="closeable" role="tablist"><button aria-controls="panel-2-2-0" aria-selected="true" class="sphinx-tabs-tab" id="tab-2-2-0" name="2-0" role="tab" tabindex="0">RTL8721Dx</button><button aria-controls="panel-2-2-1" aria-selected="false" class="sphinx-tabs-tab" id="tab-2-2-1" name="2-1" role="tab" tabindex="-1">RTL8720E</button><button aria-controls="panel-2-2-2" aria-selected="false" class="sphinx-tabs-tab" id="tab-2-2-2" name="2-2" role="tab" tabindex="-1">RTL8726E</button><button aria-controls="panel-2-2-3" aria-selected="false" class="sphinx-tabs-tab" id="tab-2-2-3" name="2-3" role="tab" tabindex="-1">RTL8730E</button></div><div aria-labelledby="tab-2-2-0" class="sphinx-tabs-panel" id="panel-2-2-0" name="2-0" role="tabpanel" tabindex="0"><p>The SoC supports ISP (In-System Programming) via LOGUART (<code class="docutils literal notranslate"><span class="pre">PB4</span></code> and <code class="docutils literal notranslate"><span class="pre">PB5</span></code>) or USB to download code into flash. The ISP mode is determined by the state of <code class="docutils literal notranslate"><span class="pre">PB5</span></code> when boot.</p>
<table class="docutils align-default" id="id1" style="width: 100%">
<caption><span class="caption-text">ISP mode</span><a class="headerlink" href="#id1" title="Link to this table">ïƒ</a></caption>
<thead>
<tr class="row-odd"><th class="head"><p>Boot Mode</p></th>
<th class="head"><p>PB5 (DOWNLOAD_MODE)</p></th>
<th class="head"><p>Description</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>No ISP</p></td>
<td><p>HIGH</p></td>
<td><p>ISP bypassed. The IC attempts to boot from Flash.</p></td>
</tr>
<tr class="row-odd"><td><p>ISP</p></td>
<td><p>LOW</p></td>
<td><p>The IC enters ISP via LOGUART or USB.</p></td>
</tr>
</tbody>
</table>
</div><div aria-labelledby="tab-2-2-1" class="sphinx-tabs-panel" hidden="true" id="panel-2-2-1" name="2-1" role="tabpanel" tabindex="0"><p>The SoC supports ISP (In-System Programming) via LOGUART (<code class="docutils literal notranslate"><span class="pre">PA19</span></code> and <code class="docutils literal notranslate"><span class="pre">PA20</span></code>) to download code into flash. The ISP mode is determined by the state of <code class="docutils literal notranslate"><span class="pre">PA20</span></code> when boot.</p>
<table class="docutils align-default" id="id2" style="width: 100%">
<caption><span class="caption-text">ISP mode</span><a class="headerlink" href="#id2" title="Link to this table">ïƒ</a></caption>
<thead>
<tr class="row-odd"><th class="head"><p>Boot Mode</p></th>
<th class="head"><p>PA20 (DOWNLOAD_MODE)</p></th>
<th class="head"><p>Description</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>No ISP</p></td>
<td><p>HIGH</p></td>
<td><p>ISP bypassed. The IC attempts to boot from Flash.</p></td>
</tr>
<tr class="row-odd"><td><p>ISP</p></td>
<td><p>LOW</p></td>
<td><p>The IC enters ISP via LOGUART.</p></td>
</tr>
</tbody>
</table>
</div><div aria-labelledby="tab-2-2-2" class="sphinx-tabs-panel" hidden="true" id="panel-2-2-2" name="2-2" role="tabpanel" tabindex="0"><p>The SoC supports ISP (In-System Programming) via LOGUART (<code class="docutils literal notranslate"><span class="pre">PA19</span></code> and <code class="docutils literal notranslate"><span class="pre">PA20</span></code>) to download code into flash. The ISP mode is determined by the state of <code class="docutils literal notranslate"><span class="pre">PA20</span></code> when boot.</p>
<table class="docutils align-default" id="id3" style="width: 100%">
<caption><span class="caption-text">ISP mode</span><a class="headerlink" href="#id3" title="Link to this table">ïƒ</a></caption>
<thead>
<tr class="row-odd"><th class="head"><p>Boot Mode</p></th>
<th class="head"><p>PA20 (DOWNLOAD_MODE)</p></th>
<th class="head"><p>Description</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>No ISP</p></td>
<td><p>HIGH</p></td>
<td><p>ISP bypassed. The IC attempts to boot from Flash.</p></td>
</tr>
<tr class="row-odd"><td><p>ISP</p></td>
<td><p>LOW</p></td>
<td><p>The IC enters ISP via LOGUART.</p></td>
</tr>
</tbody>
</table>
</div><div aria-labelledby="tab-2-2-3" class="sphinx-tabs-panel" hidden="true" id="panel-2-2-3" name="2-3" role="tabpanel" tabindex="0"><p>The SoC supports ISP (In-System Programming) via LOGUART (<code class="docutils literal notranslate"><span class="pre">PB23</span></code> and <code class="docutils literal notranslate"><span class="pre">PB24</span></code>) or USB to download code into flash. The ISP mode is determined by the state of <code class="docutils literal notranslate"><span class="pre">PB24</span></code> when boot.</p>
<table class="docutils align-default" id="id4" style="width: 100%">
<caption><span class="caption-text">ISP mode</span><a class="headerlink" href="#id4" title="Link to this table">ïƒ</a></caption>
<thead>
<tr class="row-odd"><th class="head"><p>Boot Mode</p></th>
<th class="head"><p>PB24 (DOWNLOAD_MODE)</p></th>
<th class="head"><p>Description</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>No ISP</p></td>
<td><p>HIGH</p></td>
<td><p>ISP bypassed. The IC attempts to boot from Flash.</p></td>
</tr>
<tr class="row-odd"><td><p>ISP</p></td>
<td><p>LOW</p></td>
<td><p>The IC enters ISP via LOGUART or USB.</p></td>
</tr>
</tbody>
</table>
</div></div>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>After mass production, a specific eFuse bit can be programmed to permanently disable ISP mode.</p>
</div>
</section>
<section id="boot-flow">
<h1>Boot Flow<a class="headerlink" href="#boot-flow" title="Link to this heading">ïƒ</a></h1>
<div class="sphinx-tabs docutils container">
<div aria-label="Tabbed content" class="closeable" role="tablist"><button aria-controls="panel-3-3-0" aria-selected="true" class="sphinx-tabs-tab" id="tab-3-3-0" name="3-0" role="tab" tabindex="0">RTL8721Dx</button><button aria-controls="panel-3-3-1" aria-selected="false" class="sphinx-tabs-tab" id="tab-3-3-1" name="3-1" role="tab" tabindex="-1">RTL8720E</button><button aria-controls="panel-3-3-2" aria-selected="false" class="sphinx-tabs-tab" id="tab-3-3-2" name="3-2" role="tab" tabindex="-1">RTL8726E</button><button aria-controls="panel-3-3-3" aria-selected="false" class="sphinx-tabs-tab" id="tab-3-3-3" name="3-3" role="tab" tabindex="-1">RTL8730E</button></div><div aria-labelledby="tab-3-3-0" class="sphinx-tabs-panel" id="panel-3-3-0" name="3-0" role="tabpanel" tabindex="0"><p>After power-up or hardware reset, the hardware will boot the KM4 core at 150MHz. The boot process is handled by the on-chip Boot ROM and is always executed by the KM4 core.</p>
<p>After executing the KM4 BootLoader code, the KM4 will initialize the environment for the KM0 core.</p>
<ol class="arabic simple">
<li><p>KM4 boots ROM</p></li>
<li><p>KM4 ROM checks whether to enter ISP mode</p></li>
<li><p>KM4 secure boot, ROM verifies BootLoader signature (optional)</p></li>
<li><p>KM4 boots to BootLoader</p></li>
<li><p>KM4 BootLoader set the frequency of SoC according to the <code class="docutils literal notranslate"><span class="pre">ameba_bootcfg.c</span></code> file</p></li>
<li><p>KM4 BootLoader establishes the non-secure execution environment according to the <code class="docutils literal notranslate"><span class="pre">ameba_boot_trustzonecfg.c</span></code> file if TrustZone is enabled</p></li>
<li><p>KM4 assists KM0 images loading and signature verification (optional)</p></li>
</ol>
<p>The SoC boot flow is illustrated below.</p>
<figure class="align-center">
<a class="reference internal image-reference" href="../../_images/boot_flow_dplus.svg"><img alt="../../_images/boot_flow_dplus.svg" height="298" src="../../_images/boot_flow_dplus.svg" width="1011" /></a>
</figure>
</div><div aria-labelledby="tab-3-3-1" class="sphinx-tabs-panel" hidden="true" id="panel-3-3-1" name="3-1" role="tabpanel" tabindex="0"><p>After power-up or hardware reset, the hardware will boot the KM4 core at 150MHz. The boot process is handled by the on-chip Boot ROM and is always executed by the KM4 core.</p>
<p>After executing the KM4 bootloader code, the KM4 will initialize the environment for the KR4 core.</p>
<ol class="arabic simple">
<li><p>KM4 boots ROM</p></li>
<li><p>KM4 ROM checks whether to enter ISP mode</p></li>
<li><p>KM4 secure boot, ROM verifies BootLoader signature (optional)</p></li>
<li><p>KM4 boots to BootLoader</p></li>
<li><p>KM4 BootLoader set the frequency of SoC according to the <code class="docutils literal notranslate"><span class="pre">ameba_bootcfg.c</span></code> file</p></li>
<li><p>KM4 BootLoader establishes the non-secure execution environment according to the <code class="docutils literal notranslate"><span class="pre">ameba_boot_trustzonecfg.c</span></code> file if TrustZone is enabled</p></li>
<li><p>KM4 assists KR4 images loading and signature verification (optional)</p></li>
</ol>
<p>The SoC boot flow is illustrated below.</p>
<figure class="align-center">
<a class="reference internal image-reference" href="../../_images/boot_flow_lite_20E.svg"><img alt="../../_images/boot_flow_lite_20E.svg" height="314" src="../../_images/boot_flow_lite_20E.svg" width="1023" /></a>
</figure>
</div><div aria-labelledby="tab-3-3-2" class="sphinx-tabs-panel" hidden="true" id="panel-3-3-2" name="3-2" role="tabpanel" tabindex="0"><p>After power-up or hardware reset, the hardware will boot the KM4 core at 150MHz. The boot process is handled by the on-chip Boot ROM and is always executed by the KM4 core.</p>
<p>After executing the KM4 bootloader code, the KM4 will initialize the environment for the KR4 and DSP core.</p>
<ol class="arabic simple">
<li><p>KM4 boots ROM</p></li>
<li><p>KM4 ROM checks whether to enter ISP mode</p></li>
<li><p>KM4 secure boot, ROM verifies BootLoader signature (optional)</p></li>
<li><p>KM4 boots to BootLoader</p></li>
<li><p>KM4 BootLoader set the frequency of SoC according to the <code class="docutils literal notranslate"><span class="pre">ameba_bootcfg.c</span></code> file</p></li>
<li><p>KM4 BootLoader establishes the non-secure execution environment according to the <code class="docutils literal notranslate"><span class="pre">ameba_boot_trustzonecfg.c</span></code> file if TrustZone is enabled</p></li>
<li><p>KM4 assists KR4 images loading and signature verification (optional)</p></li>
<li><p>KM4 assists DSP images loading and signature verification (optional)</p></li>
</ol>
<p>The SoC boot flow is illustrated below.</p>
<figure class="align-center">
<a class="reference internal image-reference" href="../../_images/boot_flow_lite_26E.svg"><img alt="../../_images/boot_flow_lite_26E.svg" height="436" src="../../_images/boot_flow_lite_26E.svg" width="1071" /></a>
</figure>
</div><div aria-labelledby="tab-3-3-3" class="sphinx-tabs-panel" hidden="true" id="panel-3-3-3" name="3-3" role="tabpanel" tabindex="0"><p>After power-up or hardware reset, the hardware will boot the KM4 core at 200MHz. The boot process is handled by the on-chip Boot ROM and is always executed by the KM4 core.</p>
<p>After executing the KM4 bootloader code, the KM4 will initialize the environment for the KM0 and CA32 core.</p>
<ol class="arabic simple">
<li><p>KM4 boots ROM</p></li>
<li><p>KM4 ROM checks whether to enter ISP mode</p></li>
<li><p>KM4 secure boot, ROM verifies BootLoader signature (optional)</p></li>
<li><p>KM4 boots to BootLoader</p></li>
<li><p>KM4 BootLoader set the frequency of SoC according to the <code class="docutils literal notranslate"><span class="pre">ameba_bootcfg.c</span></code> file</p></li>
<li><p>KM4 BootLoader establishes the non-secure execution environment according to the <code class="docutils literal notranslate"><span class="pre">ameba_boot_trustzonecfg.c</span></code> file if TrustZone is enabled</p></li>
<li><p>KM4 assists KM0 images loading and signature verification (optional)</p></li>
<li><p>KM4 assists CA32 images loading and signature verification (optional)</p></li>
</ol>
<p>The SoC boot flow is illustrated below.</p>
<figure class="align-center">
<a class="reference internal image-reference" href="../../_images/boot_flow_smart.svg"><img alt="../../_images/boot_flow_smart.svg" height="432" src="../../_images/boot_flow_smart.svg" width="1289" /></a>
</figure>
<p>Boot from NOR or NAND Flash depends on the settings in OTP. Additionally, PSRAM or DDR can be selected for storing code and data.</p>
</div></div>
</section>
<section id="boot-api">
<h1>Boot API<a class="headerlink" href="#boot-api" title="Link to this heading">ïƒ</a></h1>
<div class="sphinx-tabs docutils container">
<div aria-label="Tabbed content" class="closeable" role="tablist"><button aria-controls="panel-4-4-0" aria-selected="true" class="sphinx-tabs-tab" id="tab-4-4-0" name="4-0" role="tab" tabindex="0">RTL8721Dx</button><button aria-controls="panel-4-4-1" aria-selected="false" class="sphinx-tabs-tab" id="tab-4-4-1" name="4-1" role="tab" tabindex="-1">RTL8720E</button><button aria-controls="panel-4-4-2" aria-selected="false" class="sphinx-tabs-tab" id="tab-4-4-2" name="4-2" role="tab" tabindex="-1">RTL8726E</button><button aria-controls="panel-4-4-3" aria-selected="false" class="sphinx-tabs-tab" id="tab-4-4-3" name="4-3" role="tab" tabindex="-1">RTL8730E</button></div><div aria-labelledby="tab-4-4-0" class="sphinx-tabs-panel" id="panel-4-4-0" name="4-0" role="tabpanel" tabindex="0"><p>The API <code class="xref py py-func docutils literal notranslate"><span class="pre">BOOT_Reason()</span></code> is used to obtain the cause of chip boot, and the function prototype is as follows:</p>
<div class="highlight-c notranslate"><div class="highlight"><pre><span></span><span class="n">u32</span><span class="w"> </span><span class="nf">BOOT_Reason</span><span class="p">(</span><span class="kt">void</span><span class="p">);</span>
</pre></div>
</div>
<p>The return value of this API will be printed via Loguart. Default return value of this API is <code class="docutils literal notranslate"><span class="pre">0</span></code> when the chip is initially powered on, and return value of re-boot caused by other reasons can be found in the following table.
Users can find macro-definitions about return value in the file <code class="file docutils literal notranslate"><span class="pre">sysreg_aon.h</span></code>.</p>
<table class="docutils align-default" style="width: 100%">
<thead>
<tr class="row-odd"><th class="head"><p>Items</p></th>
<th class="head"><p>Description</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>Introduction</p></td>
<td><p>Get boot reason</p></td>
</tr>
<tr class="row-odd"><td><p>Parameter</p></td>
<td><p>None</p></td>
</tr>
<tr class="row-even"><td><p>Return</p></td>
<td><p>Boot reason. It can be any of the following values or combinations:</p>
<ul class="simple">
<li><p>AON_BIT_RSTF_OCP: Enter deep-sleep mode when OCP happens</p></li>
<li><p>AON_BIT_RSTF_KM0_SYS: KM0 system reset</p></li>
<li><p>AON_BIT_RSTF_KM4_SYS: KM4 system reset</p></li>
<li><p>AON_BIT_RSTF_WDG0: KM0 watchdog reset</p></li>
<li><p>AON_BIT_RSTF_WDG1: KM4 secure watchdog reset</p></li>
<li><p>AON_BIT_RSTF_WDG2: KM4 non-secure watchdog reset</p></li>
<li><p>AON_BIT_RSTF_WARM_KM42PERI: KM4 warm reset</p></li>
<li><p>AON_BIT_RSTF_WARM_KM02PERI: KM0 warm reset</p></li>
<li><p>AON_BIT_RSTF_DSLP: Wakeup from deep-sleep mode</p></li>
<li><p>AON_BIT_RSTF_BOR: BOR Reset</p></li>
</ul>
</td>
</tr>
</tbody>
</table>
</div><div aria-labelledby="tab-4-4-1" class="sphinx-tabs-panel" hidden="true" id="panel-4-4-1" name="4-1" role="tabpanel" tabindex="0"><p>The API <code class="xref py py-func docutils literal notranslate"><span class="pre">BOOT_Reason()</span></code> is used to obtain the cause of chip boot, and the function prototype is as follows:</p>
<div class="highlight-c notranslate"><div class="highlight"><pre><span></span><span class="n">u32</span><span class="w"> </span><span class="nf">BOOT_Reason</span><span class="p">(</span><span class="kt">void</span><span class="p">);</span>
</pre></div>
</div>
<p>The return value of this API will be printed via Loguart. Default return value of this API is <code class="docutils literal notranslate"><span class="pre">0</span></code> when the chip is initially powered on, and return value of re-boot caused by other reasons can be found in the following table.
Users can find macro-definitions about return value in the file <code class="file docutils literal notranslate"><span class="pre">sysreg_aon.h</span></code>.</p>
<table class="docutils align-default" style="width: 100%">
<thead>
<tr class="row-odd"><th class="head"><p>Items</p></th>
<th class="head"><p>Description</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>Introduction</p></td>
<td><p>Get boot reason</p></td>
</tr>
<tr class="row-odd"><td><p>Parameter</p></td>
<td><p>None</p></td>
</tr>
<tr class="row-even"><td><p>Return</p></td>
<td><p>Boot reason. It can be any of the following values or combinations:</p>
<ul class="simple">
<li><p>AON_BIT_RSTF_THM: Thermal reset</p></li>
<li><p>AON_BIT_RSTF_BOR: BOR reset</p></li>
<li><p>AON_BIT_RSTF_DSLP: Wakeup from deep-sleep mode</p></li>
<li><p>AON_BIT_RSTF_KR4_SYS: KR4 system reset</p></li>
<li><p>AON_BIT_RSTF_KM4_SYS: KM4 system reset</p></li>
<li><p>AON_BIT_RSTF_WDG1: KM4 secure watchdog reset</p></li>
<li><p>AON_BIT_RSTF_WDG2: KM4 non-secure watchdog reset</p></li>
<li><p>AON_BIT_RSTF_WDG3: KR4 watchdog reset</p></li>
<li><p>AON_BIT_RSTF_KM4_WARM2PERI: KM4 warm reset</p></li>
<li><p>AON_BIT_RSTF_KR4_WARM2PERI: KR4 warm reset</p></li>
</ul>
</td>
</tr>
</tbody>
</table>
</div><div aria-labelledby="tab-4-4-2" class="sphinx-tabs-panel" hidden="true" id="panel-4-4-2" name="4-2" role="tabpanel" tabindex="0"><p>The API <code class="xref py py-func docutils literal notranslate"><span class="pre">BOOT_Reason()</span></code> is used to obtain the cause of chip boot, and the function prototype is as follows:</p>
<div class="highlight-c notranslate"><div class="highlight"><pre><span></span><span class="n">u32</span><span class="w"> </span><span class="nf">BOOT_Reason</span><span class="p">(</span><span class="kt">void</span><span class="p">);</span>
</pre></div>
</div>
<p>The return value of this API will be printed via Loguart. Default return value of this API is <code class="docutils literal notranslate"><span class="pre">0</span></code> when the chip is initially powered on, and return value of re-boot caused by other reasons can be found in the following table.
Users can find macro-definitions about return value in the file <code class="file docutils literal notranslate"><span class="pre">sysreg_aon.h</span></code>.</p>
<table class="docutils align-default" style="width: 100%">
<thead>
<tr class="row-odd"><th class="head"><p>Items</p></th>
<th class="head"><p>Description</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>Introduction</p></td>
<td><p>Get boot reason</p></td>
</tr>
<tr class="row-odd"><td><p>Parameter</p></td>
<td><p>None</p></td>
</tr>
<tr class="row-even"><td><p>Return</p></td>
<td><p>Boot reason. It can be any of the following values or combinations:</p>
<ul class="simple">
<li><p>AON_BIT_RSTF_THM: Thermal reset</p></li>
<li><p>AON_BIT_RSTF_BOR: BOR reset</p></li>
<li><p>AON_BIT_RSTF_DSLP: Wakeup from deep-sleep mode</p></li>
<li><p>AON_BIT_RSTF_KR4_SYS: KR4 system reset</p></li>
<li><p>AON_BIT_RSTF_KM4_SYS: KM4 system reset</p></li>
<li><p>AON_BIT_RSTF_HIFI_SYS: HiFi 5 DSP system reset</p></li>
<li><p>AON_BIT_RSTF_IWDG: KM0 independent watchdog reset</p></li>
<li><p>AON_BIT_RSTF_WDG1: KM4 secure watchdog reset</p></li>
<li><p>AON_BIT_RSTF_WDG2: KM4 non-secure watchdog reset</p></li>
<li><p>AON_BIT_RSTF_WDG3: KR4 watchdog reset</p></li>
<li><p>AON_BIT_RSTF_WDG4: HiFi 5 DSP watchdog reset</p></li>
<li><p>AON_BIT_RSTF_KM4_WARM2PERI: KM4 warm reset</p></li>
<li><p>AON_BIT_RSTF_KR4_WARM2PERI: KR4 warm reset</p></li>
<li><p>AON_BIT_RSTF_HIFI_WARM2PERI: HIFI warm reset</p></li>
</ul>
</td>
</tr>
</tbody>
</table>
</div><div aria-labelledby="tab-4-4-3" class="sphinx-tabs-panel" hidden="true" id="panel-4-4-3" name="4-3" role="tabpanel" tabindex="0"><p>The API <code class="xref py py-func docutils literal notranslate"><span class="pre">BOOT_Reason()</span></code> is used to obtain the cause of chip boot, and the function prototype is as follows:</p>
<div class="highlight-c notranslate"><div class="highlight"><pre><span></span><span class="n">u32</span><span class="w"> </span><span class="nf">BOOT_Reason</span><span class="p">(</span><span class="kt">void</span><span class="p">);</span>
</pre></div>
</div>
<p>The return value of this API will be printed via Loguart. Default return value of this API is <code class="docutils literal notranslate"><span class="pre">0</span></code> when the chip is initially powered on, and return value of re-boot caused by other reasons can be found in the following table.
Users can find macro-definitions about return value in the file <code class="file docutils literal notranslate"><span class="pre">sysreg_aon.h</span></code>.</p>
<table class="docutils align-default" style="width: 100%">
<thead>
<tr class="row-odd"><th class="head"><p>Items</p></th>
<th class="head"><p>Description</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>Introduction</p></td>
<td><p>Get boot reason</p></td>
</tr>
<tr class="row-odd"><td><p>Parameter</p></td>
<td><p>None</p></td>
</tr>
<tr class="row-even"><td><p>Return</p></td>
<td><p>Boot reason. It can be any of the following values or combinations:</p>
<ul class="simple">
<li><p>AON_BIT_RSTF_THM: Thermal reset</p></li>
<li><p>AON_BIT_RSTF_BOR: BOR reset</p></li>
<li><p>AON_BIT_RSTF_DSLP: Wakeup from deep-sleep mode</p></li>
<li><p>AON_BIT_RSTF_LPSYS: KM0 system reset</p></li>
<li><p>AON_BIT_RSTF_NPSYS: KM4 system reset</p></li>
<li><p>AON_BIT_RSTF_APSYS: CA32 system reset</p></li>
<li><p>AON_BIT_RSTF_IWDG: KM0 independent watchdog reset</p></li>
<li><p>AON_BIT_RSTF_WDG1: KM4 secure watchdog reset</p></li>
<li><p>AON_BIT_RSTF_WDG2: KM4 non-secure watchdog reset</p></li>
<li><p>AON_BIT_RSTF_WDG3: CA32 secure watchdog reset</p></li>
<li><p>AON_BIT_RSTF_WDG4: CA32 non-secure watchdog reset</p></li>
</ul>
</td>
</tr>
</tbody>
</table>
</div></div>
</section>


           </div>
          </div>
          <footer><div class="rst-footer-buttons" role="navigation" aria-label="Footer">
        <a href="0_boot_index.html" class="btn btn-neutral float-left" title="Boot Process" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left" aria-hidden="true"></span> Previous</a>
        <a href="../1_ota/0_ota_index.html" class="btn btn-neutral float-right" title="OTA Firmware Update" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right" aria-hidden="true"></span></a>
    </div>

  <hr/>

  <div role="contentinfo">
    <p>&#169; Copyright 2025, Realsil.</p>
  </div>

  Built with <a href="https://www.sphinx-doc.org/">Sphinx</a> using a
    <a href="https://github.com/readthedocs/sphinx_rtd_theme">theme</a>
    provided by <a href="https://readthedocs.org">Read the Docs</a>.
   

</footer>
        </div>
    <!-- é—®é¢˜åé¦ˆæŒ‰é’®å’Œå¯¹è¯æ¡† -->
    
    <div id="feedback-dialog" class="feedback-dialog" style="display: none;">
        <p>Please describe your issue:</p>
        <textarea id="feedback-text" placeholder="Feature enhancement in progress, please stay tuned..."></textarea>
        <button id="submit-feedback">Submit</button>
        <button id="cancel-feedback">Cancel</button>
    </div>

      </div>
    </section>
  </div>
  <script>
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script>
     
    


</body>
</html>