

<!DOCTYPE html>
<html class="writer-html5" lang="zh-CN" data-content_root="../../">
<head>
  <meta charset="utf-8" /><meta name="viewport" content="width=device-width, initial-scale=1" />

  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Wi-Fi CSI æ¦‚è¿° &mdash; Ameba IoT Docs  æ–‡æ¡£</title>
      <link rel="stylesheet" type="text/css" href="../../_static/pygments.css?v=80d5e7a1" />
      <link rel="stylesheet" type="text/css" href="../../_static/css/theme.css?v=19f00094" />
      <link rel="stylesheet" type="text/css" href="../../_static/togglebutton.css?v=13237357" />
      <link rel="stylesheet" type="text/css" href="../../_static/custom.css?v=536412e7" />
      <link rel="stylesheet" type="text/css" href="../../_static/tabs.css?v=a5c4661c" />
      <link rel="stylesheet" type="text/css" href="../../_static/custom.css?v=536412e7" />

  
    <link rel="shortcut icon" href="../../_static/favicon.ico"/>
  <!--[if lt IE 9]>
    <script src="../../_static/js/html5shiv.min.js"></script>
  <![endif]-->
  
        <script src="../../_static/jquery.js?v=5d32c60e"></script>
        <script src="../../_static/_sphinx_javascript_frameworks_compat.js?v=2cd50e6c"></script>
        <script src="../../_static/documentation_options.js?v=7d86a446"></script>
        <script src="../../_static/doctools.js?v=9a2dae69"></script>
        <script src="../../_static/sphinx_highlight.js?v=dc90522c"></script>
        <script src="../../_static/toggleprompt.js?v=d7ede5d2"></script>
        <script src="https://cdn.jsdelivr.net/npm/sweetalert2@11"></script>
        <script src="../../_static/tabs.js?v=3030b3cb"></script>
        <script>let toggleHintShow = 'Click to show';</script>
        <script>let toggleHintHide = 'Click to hide';</script>
        <script>let toggleOpenOnPrint = 'true';</script>
        <script src="../../_static/togglebutton.js?v=4a39c7ea"></script>
        <script src="../../_static/translations.js?v=beaddf03"></script>
        <script>var togglebuttonSelector = '.toggle, .admonition.dropdown';</script>
        <script>var togglebuttonSelector = '.toggle, .admonition.dropdown';</script>
    <script src="../../_static/js/theme.js"></script>
    <link rel="index" title="ç´¢å¼•" href="../../genindex.html" />
    <link rel="search" title="æœç´¢" href="../../search.html" />
    <link rel="next" title="Wi-Fi Adaptivity Test" href="../2_wifi_adaptivity_test/0_wifi_adaptivity_index_cn.html" />
    <link rel="prev" title="Wi-Fi CSI" href="0_wifi_csi_index_cn.html" />
     

    <!-- NDAæ–‡æ¡£è¾“å…¥å¯†ç çš„æ¡† -->
    
<script>
// â–¼â–¼â–¼â–¼â–¼â–¼â–¼â–¼â–¼â–¼â–¼â–¼â–¼â–¼â–¼â–¼â–¼â–¼ å¤šè¯­è¨€é…ç½® â–¼â–¼â–¼â–¼â–¼â–¼â–¼â–¼â–¼â–¼â–¼â–¼â–¼â–¼â–¼â–¼â–¼â–¼
const lang = 'zh';  // ä½¿ç”¨ Python å­—ç¬¦ä¸²åˆ‡ç‰‡
const i18n = {
    zh: {
        title: 'è®¿é—®æˆæƒ',
        username: 'ç”¨æˆ·å',
        password: 'å¯†ç ',
        confirm: 'ç¡®è®¤',
        cancel: 'å–æ¶ˆ',
        usernameError: 'ç”¨æˆ·åé”™è¯¯',
        userNotExist: 'è¯¥ç”¨æˆ·ä¸å­˜åœ¨',
        passwordError: 'å¯†ç é”™è¯¯',
        wrongPassword: 'è¯·è¾“å…¥æ­£ç¡®çš„å¯†ç ',
        accessDenied: 'æ— è®¿é—®æƒé™',
        noPermission: 'æ‚¨æ— æƒæŸ¥çœ‹æ­¤å†…å®¹',
        expiredTitle: 'è®¿é—®å·²è¿‡æœŸ',
        expiredMsg: 'æ‚¨çš„æƒé™å·²å¤±æ•ˆ<br>æœ‰æ•ˆæœŸï¼š%s è‡³ %s',
        deniedTitle: 'âš ï¸ æ— è®¿é—®æƒé™',
        contact: 'è¯·è”ç³» claire_wang@realsil.com.cn è·å–æƒé™'
    },
    en: {
        title: 'Access Required',
        username: 'Username',
        password: 'Password',
        confirm: 'Confirm',
        cancel: 'Cancel',
        usernameError: 'Invalid Username',
        userNotExist: 'User does not exist',
        passwordError: 'Wrong Password',
        wrongPassword: 'Please enter correct password',
        accessDenied: 'Access Denied',
        noPermission: 'You have no permission to view this content',
        expiredTitle: 'Authorization Expired',
        expiredMsg: 'Your access has expired<br>Valid period: %s to %s',
        deniedTitle: 'âš ï¸ Access Denied',
        contact: 'Please contact claire_wang@realsil.com.cn for access'
    }
};
// â–²â–²â–²â–²â–²â–²â–²â–²â–²â–²â–²â–²â–²â–²â–²â–²â–²â–² å¤šè¯­è¨€é…ç½®ç»“æŸ â–²â–²â–²â–²â–²â–²â–²â–²â–²â–²â–²â–²â–²â–²â–²â–²â–²â–²
</script>

    <!-- æ ·å¼æ¨¡æ¿ -->
    

<style>
    .wy-nav-content {
        max-width: 1000px;
         
    }
    
    .auth-denied {
        padding: 20px;
        background: #f8f9fa;
        border-radius: 4px;
        border: 1px solid #dee2e6;
        text-align: center;
        color: #721c24;
        margin-top: 20px;
    }
    .auth-denied h3 {
        margin-bottom: 10px;
        color: #dc3545;
    }
    
    #report-button {
        position: fixed;
        top: 10px;
        left: 1120px;
        padding: 10px 20px;
        background-color: #ff00a2;
        color: white;
        border: none;
        border-radius: 5px;
        cursor: pointer;
        z-index: 1000;
    }
    #report-button:hover {
        background-color: #0056b3;
    }
    
    .feedback-dialog {
        position: fixed;
        top: 50%;
        left: 50%;
        transform: translate(-50%, -50%);
        background: white;
        padding: 20px;
        border-radius: 8px;
        box-shadow: 0 4px 10px rgba(0, 0, 0, 0.2);
        z-index: 1001;
        width: 600px;
    }
    .feedback-dialog textarea {
        width: 100%;
        height: 150px;
        margin-top: 10px;
        padding: 10px;
        border: 1px solid #ccc;
        border-radius: 4px;
        resize: vertical;
    }
    .feedback-dialog button {
        margin-top: 10px;
        padding: 8px 16px;
        background-color: #007bff;
        color: white;
        border: none;
        border-radius: 4px;
        cursor: pointer;
    }
    .feedback-dialog button:hover {
        background-color: #0056b3;
    }

    
    
</style>
    <style>
    /* ====================== é€‰æ‹©å™¨æ ·å¼ ====================== */
    /* é€‰æ‹©å™¨å®¹å™¨ */
    .selector-container {
        margin: 8px 0;
        display: flex;
        justify-content: flex-start;
        align-items: center;
    }
    
    /* ç‰ˆæœ¬é€‰æ‹©å™¨ç‰¹æ®Šè¾¹è· */
    .version-selector-container {
        margin-bottom: 8px !important;
    }
    
    /* é€‰æ‹©å™¨æ ‡ç­¾ */
    .selector-label {
        color: white;
        margin-right: 10px;
        width: 80px;
        text-align: right;
        font-size: 0.9em;
    }
    
    /* ä¸‹æ‹‰é€‰æ‹©æ¡† */
    .selector-dropdown {
        width: 120px;
        border-radius: 2px;
        padding: 4px 8px;
        border: 1px solid #405261;
        background: #2c3e50;
        color: white;
        font-size: 0.9em;
    }
    
    /* ä¸‹æ‹‰é€‰æ‹©æ¡†æ‚¬åœæ•ˆæœ */
    .selector-dropdown:hover {
        border-color: #3498db;
        transition: border-color 0.3s;
    }
    
    /* é€‰æ‹©å™¨å“åº”å¼å¸ƒå±€ */
    @media (max-width: 768px) {
        .selector-container {
            flex-direction: column;
            align-items: flex-start;
        }
        
        .selector-label {
            width: 100%;
            text-align: left;
            margin-bottom: 4px;
        }
        
        .selector-dropdown {
            width: 100%;
        }
    }
</style>
    <style>
/* =============== å·¦ä¸Šè§’ç™»å½•åŒºåŸŸ  =============== */
/* ================= ç”¨æˆ·é¢æ¿ ================= */
.user-panel {
    padding: 15px;
    background: #34495e;
    border-radius: 8px;
    margin-bottom: 20px;
}

.username {
    color: #fff;
    font-weight: 500;
    font-size: 1.1em;
    text-align: center;
    margin: 10px 0;
}

/* ================= æŒ‰é’®å®¹å™¨ ================= */
.button-row {
    display: flex;
    gap: 8px;
    width: 100%;
    margin: 10px 0;
}

/* é€šç”¨æŒ‰é’®æ ·å¼ */
.auth-btn, .forum-btn, .official-btn {
    flex: 1;
    padding: 8px;
    border: none;
    border-radius: 4px;
    cursor: pointer;
    transition: opacity 0.3s;
    text-align: center;
    color: white !important;
}

/* è®¤è¯æŒ‰é’® */
.auth-btn {
    background: #3498db;
}

/* è®ºå›æŒ‰é’® */
.forum-btn {
    background: #9b59b6; /* ä¸å‚è€ƒä»£ç çš„å®˜æ–¹æŒ‰é’®åŒè‰² */
}

/* å®˜ç½‘æŒ‰é’® */
.official-btn {
    background: #2ecc71; /* ä¸å‚è€ƒä»£ç æ–‡æ¡£æŒ‰é’®åŒè‰² */
}
/* =============== å·¦ä¸Šè§’ç™»å½•åŒºåŸŸ  =============== */
</style>

    <!-- æ³¨å…¥ TOC æ˜ å°„å’Œå½“å‰é¡µé¢ä¿¡æ¯ -->
    

<!-- TOC æ˜ å°„å’Œå½“å‰æ–‡æ¡£ä¿¡æ¯ -->
<script>
// å°† Python å­—å…¸è½¬æ¢ä¸º JS å¯¹è±¡
const TOC_TITLE_MAP = {"rst_rtos/0_ameba_product": "\u4ea7\u54c1\u4e2d\u5fc3", "rst_rtos/0_ameba_product/0_ameba_product_center_index_cn": "\u4ea7\u54c1\u4e2d\u5fc3", "rst_rtos/0_ameba_sdk": "Ameba SDK", "rst_rtos/0_ameba_sdk/0_ameba_sdks_index_cn": "Ameba SDK", "rst_rtos/0_ameba_solutions": "\u89e3\u51b3\u65b9\u6848", "rst_rtos/0_ameba_solutions/0_ameba_solutions_index_cn": "\u89e3\u51b3\u65b9\u6848", "rst_rtos/0_at_command": "0.8 AT \u547d\u4ee4\u96c6", "rst_rtos/0_at_command/0_at_command_index_cn": "0.8 AT \u547d\u4ee4\u96c6", "rst_rtos/0_file_system": "0.9 \u865a\u62df\u6587\u4ef6\u7cfb\u7edf", "rst_rtos/0_file_system/0_vfs_index_cn": "0.9 \u865a\u62df\u6587\u4ef6\u7cfb\u7edf", "rst_rtos/0_ftl": "0.A Flash \u8f6c\u6362\u5c42", "rst_rtos/0_ftl/0_ftl_index_cn": "0.A Flash \u8f6c\u6362\u5c42", "rst_rtos/0_gcc_build_environment": "0.1 GCC \u7f16\u8bd1\u73af\u5883", "rst_rtos/0_gcc_build_environment/0_gcc_build_index_cn": "0.1 GCC \u7f16\u8bd1\u73af\u5883", "rst_rtos/0_gcc_build_library": "0.3 GCC \u5e93\u7684\u751f\u6210\u548c\u4f7f\u7528", "rst_rtos/0_gcc_build_library/0_gcc_build_library_index_cn": "0.3 GCC \u5e93\u7684\u751f\u6210\u548c\u4f7f\u7528", "rst_rtos/0_gdb_debug": "0.2 GDB \u8c03\u8bd5", "rst_rtos/0_gdb_debug/0_gdb_debug_index_cn": "0.2 GDB \u8c03\u8bd5", "rst_rtos/0_memory_layout": "0.5 Flash \u548c RAM \u5e03\u5c40", "rst_rtos/0_memory_layout/0_layout_index_cn": "0.5 Flash \u548c RAM \u5e03\u5c40", "rst_rtos/0_sdk_example": "0.4 SDK \u793a\u4f8b", "rst_rtos/0_sdk_example/0_sdk_example_index_cn": "0.4 SDK \u793a\u4f8b", "rst_rtos/0_tools": "0.7 \u5de5\u5177", "rst_rtos/0_tools/0_tools_index_cn": "0.7 \u5de5\u5177", "rst_rtos/0_user_config": "0.6 \u5f00\u53d1\u8005\u914d\u7f6e", "rst_rtos/0_user_config/0_usrcfg_index_cn": "0.6 \u5f00\u53d1\u8005\u914d\u7f6e", "rst_rtos/1_boot_process": "1.1 \u542f\u52a8\u8fc7\u7a0b", "rst_rtos/1_boot_process/0_boot_index_cn": "1.1 \u542f\u52a8\u8fc7\u7a0b", "rst_rtos/1_chipen": "1.4 \u82af\u7247\u4f7f\u80fd", "rst_rtos/1_chipen/0_chipen_index_cn": "1.4 \u82af\u7247\u4f7f\u80fd", "rst_rtos/1_gpio": "1.7 GPIO \u548c\u5f15\u811a\u63a7\u5236", "rst_rtos/1_gpio/0_gpio_index_cn": "1.7 GPIO \u548c\u5f15\u811a\u63a7\u5236", "rst_rtos/1_ipc": "1.5 \u6838\u95f4\u901a\u4fe1", "rst_rtos/1_ipc/0_ipc_index_cn": "1.5 \u6838\u95f4\u901a\u4fe1", "rst_rtos/1_mpu_cache": "1.0 \u5185\u5b58\u4fdd\u62a4\u5355\u5143\u548c\u7f13\u5b58", "rst_rtos/1_mpu_cache/0_mpu_cache_index_cn": "1.0 \u5185\u5b58\u4fdd\u62a4\u5355\u5143\u548c\u7f13\u5b58", "rst_rtos/1_ota": "1.2 \u56fa\u4ef6\u5728\u7ebf\u5347\u7ea7\uff08OTA\uff09", "rst_rtos/1_ota/0_ota_index_cn": "1.2 \u56fa\u4ef6\u5728\u7ebf\u5347\u7ea7\uff08OTA\uff09", "rst_rtos/1_otpc": "1.3 OTP \u5b58\u50a8\u5668", "rst_rtos/1_otpc/0_otpc_index_cn": "1.3 OTP \u5b58\u50a8\u5668", "rst_rtos/1_pinmux": "1.6 \u5f15\u811a\u590d\u7528", "rst_rtos/1_pinmux/0_pinmux_index_cn": "1.6 \u5f15\u811a\u590d\u7528", "rst_rtos/1_power_save": "1.9 \u4f4e\u529f\u8017\u5f00\u53d1", "rst_rtos/1_power_save/0_ps_index_cn": "1.9 \u4f4e\u529f\u8017\u5f00\u53d1", "rst_rtos/2_whc_fullmac": "2.1 WHC FullMAC", "rst_rtos/2_whc_fullmac/0_fullmac_index_cn": "2.1 WHC FullMAC", "rst_rtos/2_whc_wifi_bridge": "2.0 WHC Bridge", "rst_rtos/2_whc_wifi_bridge/0_wifi_bridge_index_cn": "2.0 WHC Bridge", "rst_rtos/2_wifi_adaptivity_test": "2.4 Wi-Fi Adaptivity \u6d4b\u8bd5\u6307\u5357", "rst_rtos/2_wifi_adaptivity_test/0_wifi_adaptivity_index_cn": "2.4 Wi-Fi Adaptivity \u6d4b\u8bd5\u6307\u5357", "rst_rtos/2_wifi_csi": "2.3 Wi-Fi CSI", "rst_rtos/2_wifi_csi/0_wifi_csi_index_cn": "2.3 Wi-Fi CSI", "rst_rtos/2_wifi_tunnel": "2.2 Wi-Fi R-Mesh", "rst_rtos/2_wifi_tunnel/0_wifi_tunnel_index_cn": "2.2 Wi-Fi R-Mesh", "rst_rtos/3_crypto_engine": "3.9 \u5bf9\u79f0\u786c\u4ef6\u52a0\u5bc6\u5f15\u64ce", "rst_rtos/3_crypto_engine/0_crypto_engine_index_cn": "3.9 \u5bf9\u79f0\u786c\u4ef6\u52a0\u5bc6\u5f15\u64ce", "rst_rtos/3_ecdsa_engine": "3.a ECDSA \u786c\u4ef6\u52a0\u5bc6\u5f15\u64ce", "rst_rtos/3_ecdsa_engine/0_ecdsa_index_cn": "3.a ECDSA \u786c\u4ef6\u52a0\u5bc6\u5f15\u64ce", "rst_rtos/3_eddsa_engine": "3.b EDDSA \u786c\u4ef6\u52a0\u5bc6\u5f15\u64ce", "rst_rtos/3_eddsa_engine/0_eddsa_index_cn": "3.b EDDSA \u786c\u4ef6\u52a0\u5bc6\u5f15\u64ce", "rst_rtos/3_nda_huk_derivation": "3.3 HUK \u751f\u6210 \ud83d\udd12", "rst_rtos/3_nda_huk_derivation/0_huk_derivation_index_nda": "3.3 HUK \u751f\u6210 \ud83d\udd12", "rst_rtos/3_nda_rdp": "3.4 RDP \ud83d\udd12", "rst_rtos/3_nda_rdp/0_rdp_index_nda": "3.4 RDP \ud83d\udd12", "rst_rtos/3_nda_rsip": "3.5 RSIP \ud83d\udd12", "rst_rtos/3_nda_rsip/0_rsip_index_nda": "3.5 RSIP \ud83d\udd12", "rst_rtos/3_nda_secure_boot": "3.6 \u5b89\u5168\u542f\u52a8 \ud83d\udd12", "rst_rtos/3_nda_secure_boot/0_secure_boot_index_nda": "3.6 \u5b89\u5168\u542f\u52a8 \ud83d\udd12", "rst_rtos/3_nda_swd_protection": "3.7 SWD \u4fdd\u62a4 \ud83d\udd12", "rst_rtos/3_nda_swd_protection/0_swd_protection_index_nda": "3.7 SWD \u4fdd\u62a4 \ud83d\udd12", "rst_rtos/3_nda_tfm": "3.8 Trusted Firmware-M (TF-M) \ud83d\udd12", "rst_rtos/3_nda_tfm/0_tfm_index_nda": "3.8 Trusted Firmware-M (TF-M) \ud83d\udd12", "rst_rtos/3_rsa_engine": "3.c RSA \u786c\u4ef6\u52a0\u5bc6\u5f15\u64ce", "rst_rtos/3_rsa_engine/0_rsa_index_cn": "3.c RSA \u786c\u4ef6\u52a0\u5bc6\u5f15\u64ce", "rst_rtos/3_security": "3.1 \u5b89\u5168\u4e0e\u52a0\u5bc6", "rst_rtos/3_security/0_security_index_cn": "3.1 \u5b89\u5168\u4e0e\u52a0\u5bc6", "rst_rtos/3_trng": "3.2 \u771f\u968f\u673a\u6570\u53d1\u751f\u5668", "rst_rtos/3_trng/0_trng_index_cn": "3.2 \u771f\u968f\u673a\u6570\u53d1\u751f\u5668", "rst_rtos/4_ai": "4.1 \u4eba\u5de5\u667a\u80fd", "rst_rtos/4_ai/0_ai_index_cn": "4.1 \u4eba\u5de5\u667a\u80fd", "rst_rtos/4_ai_voice": "4.2 \u8bed\u97f3\u8bc6\u522b", "rst_rtos/4_ai_voice/0_ai_voice_index_cn": "4.2 \u8bed\u97f3\u8bc6\u522b", "rst_rtos/4_dsp": "4.4 DSP \u4f7f\u7528\u6307\u5357", "rst_rtos/4_dsp/0_dsp_index_cn": "4.4 DSP \u4f7f\u7528\u6307\u5357", "rst_rtos/4_multimedia": "4.3 \u591a\u5a92\u4f53", "rst_rtos/4_multimedia/0_multimedia_index_cn": "4.3 \u591a\u5a92\u4f53", "rst_rtos/6_mass_production": "6.1 \u91cf\u4ea7\u6307\u5bfc", "rst_rtos/6_mass_production/0_mp_index_cn": "6.1 \u91cf\u4ea7\u6307\u5bfc", "rst_rtos/6_mp_image": "6.2 MP \u56fa\u4ef6", "rst_rtos/6_mp_image/0_mp_image_index_cn": "6.2 MP \u56fa\u4ef6", "rst_rtos/6_mptools": "6.3 \u4ea7\u6d4b\u5de5\u5177", "rst_rtos/6_mptools/0_mptools_index_cn": "6.3 \u4ea7\u6d4b\u5de5\u5177", "rst_rtos/7_usb": "7.1 USB \u4e3b\u673a\u4e0e\u4ece\u673a", "rst_rtos/7_usb/0_usb_index_cn": "7.1 USB \u4e3b\u673a\u4e0e\u4ece\u673a", "rst_rtos/8_adc": "8.4 \u6a21\u6570\u8f6c\u6362\u5668", "rst_rtos/8_adc/0_adc_index_cn": "8.4 \u6a21\u6570\u8f6c\u6362\u5668", "rst_rtos/8_cap_touch": "8.7 Cap-Touch", "rst_rtos/8_cap_touch/0_cap_touch_index_cn": "8.7 Cap-Touch", "rst_rtos/8_dmac": "8.1 DMA \u63a7\u5236\u5668", "rst_rtos/8_dmac/0_dmac_index_cn": "8.1 DMA \u63a7\u5236\u5668", "rst_rtos/8_ir": "8.5 \u7ea2\u5916\u6536\u53d1\u5668", "rst_rtos/8_ir/0_ir_index_cn": "8.5 \u7ea2\u5916\u6536\u53d1\u5668", "rst_rtos/8_key_scan": "8.8 Key-Scan", "rst_rtos/8_key_scan/0_key_scan_index_cn": "8.8 Key-Scan", "rst_rtos/8_lcdc": "8.A LCD \u63a7\u5236\u5668", "rst_rtos/8_lcdc/0_lcdc_index_cn": "8.A LCD \u63a7\u5236\u5668", "rst_rtos/8_ledc": "8.6 LED \u63a7\u5236\u5668", "rst_rtos/8_ledc/0_ledc_index_cn": "8.6 LED \u63a7\u5236\u5668", "rst_rtos/8_psram": "8.2 PSRAM", "rst_rtos/8_psram/0_psram_index_cn": "8.2 PSRAM", "rst_rtos/8_rtc_io": "8.9 RTC-IO", "rst_rtos/8_rtc_io/0_rtc_io_index_cn": "8.9 RTC-IO", "rst_rtos/8_thermal": "8.3 \u6e29\u5ea6\u6d4b\u91cf", "rst_rtos/8_thermal/0_thermal_index_cn": "8.3 \u6e29\u5ea6\u6d4b\u91cf"};
console.log("TOC_TITLE_MAP:", TOC_TITLE_MAP);

// è·å–å½“å‰é¡µé¢çš„æ–‡æ¡£å (ä¾‹å¦‚ 'rst_rtos/3_nda_secure_boot/0_secure_boot_index_nda')
const CURRENT_DOCNAME = 'rst_rtos/2_wifi_csi/1_wifi_csi_toprst_cn';

// åŠ¨æ€æŸ¥æ‰¾é¡¶çº§åˆ†ç±»å‡½æ•°ï¼ˆå®šä¹‰ä¸ºå…¨å±€å‡½æ•°ï¼‰
window.findTopLevelChapter = function(docname) {
    console.log("Attempting to find top-level chapter for:", docname);
    let bestMatch = "";
    let bestTitle = "Unknown Chapter";

    // æŒ‰è·¯å¾„é•¿åº¦é™åºæ’åºä»¥ç¡®ä¿æœ€é•¿åŒ¹é…
    const sortedPaths = Object.keys(TOC_TITLE_MAP).sort((a, b) => b.length - a.length);

    for (const path of sortedPaths) {
        console.log("Checking path:", path);
        if (docname === path || docname.startsWith(path + '/')) { // å­é¡µé¢
            bestMatch = path;
            bestTitle = TOC_TITLE_MAP[path];
            console.log("Matched path:", path, "with title:", bestTitle);
            break;
        }
    }

    // å¦‚æœæ²¡æœ‰æ‰¾åˆ°ä»»ä½•åŒ¹é…é¡¹ï¼Œåˆ™å°è¯•æ›´çŸ­çš„è·¯å¾„
    if (bestMatch === "") {
        const pathSegments = docname.split('/');
        while (pathSegments.length > 1) { // è‡³å°‘ä¿ç•™æ ¹è·¯å¾„
            const candidate = pathSegments.join('/');
            console.log("Checking shorter path:", candidate);
            if (TOC_TITLE_MAP[candidate]) {
                bestTitle = TOC_TITLE_MAP[candidate];
                console.log("Matched shorter path:", candidate, "with title:", bestTitle);
                break;
            }
            pathSegments.pop();
        }
    }

    console.log("Final top-level chapter:", bestTitle);
    return bestTitle;
}

// åˆå§‹åŒ–æ—¶è°ƒç”¨
document.addEventListener('DOMContentLoaded', function() {
    const topLevelChapter = findTopLevelChapter(CURRENT_DOCNAME);
    console.log("Top Level Chapter:", topLevelChapter);

    // å°†é¡¶çº§åˆ†ç±»æ’å…¥åˆ°DOMä¸­ï¼ˆæ ¹æ®éœ€è¦ï¼‰
    const chapterElement = document.createElement('div');
    chapterElement.className = 'top-level-chapter';
    chapterElement.innerHTML = `<strong>Top Level Chapter: </strong>${topLevelChapter}`;
    document.body.appendChild(chapterElement);
});
</script>

    <!-- é—®é¢˜å›æŠ¥ -->
    <!-- source/_templates/_layout_issue_report.html -->
<div id="prompt-box" style="
    display: none;
    position: fixed;
    top: 20px;
    left: 50%;
    transform: translateX(-50%);
    background: rgba(0,0,0,0.8);
    color: white;
    padding: 10px 20px;
    border-radius: 5px;
    z-index: 9999;
    text-align: center;
    font-size: 14px;
"></div>

<script>
document.addEventListener('DOMContentLoaded', function() {
    const reportButton = document.getElementById('report-button');
    const feedbackDialog = document.getElementById('feedback-dialog');
    const feedbackText = document.getElementById('feedback-text');
    const submitButton = document.getElementById('submit-feedback');
    const cancelButton = document.getElementById('cancel-feedback');
    const promptBox = document.getElementById('prompt-box');

    let selectedText = '';
    let selectedChapters = '';
    const language = 'zh-CN'; // è·å–è¯­è¨€å˜é‡

    // å®šä¹‰æ ‡é¢˜å˜é‡ï¼ˆé¡¶æ ¼æ˜¾ç¤ºï¼‰
    const userHeader = 'User:';
    const chaptersHeader = 'Chapters:';
    const paragraphHeader = 'Paragraph:';
    const questionHeader = 'Question:';

    // å®šä¹‰æç¤ºæ¶ˆæ¯
    const saveSuccessMessage = language === 'zh_CN' ? 'é—®é¢˜å·²ä¿å­˜åˆ°æœ¬åœ°æ–‡ä»¶ feedback.txt' : 'Issue saved to local file feedback.txt';

    // æ£€æŸ¥ findTopLevelChapter æ˜¯å¦å·²å®šä¹‰
    if (typeof window.findTopLevelChapter !== 'function') {
        console.error("findTopLevelChapter å‡½æ•°æœªå®šä¹‰ï¼Œè¯·æ£€æŸ¥åŠ è½½é¡ºåºï¼");
        return;
    }

    reportButton.addEventListener('click', function() {
        const selection = window.getSelection();
        selectedText = selection.toString();
        if (!selectedText) {
            alert('Please select the problematic content first');
            return;
        }

        // æ”¶é›†ç« èŠ‚ä¿¡æ¯
        let chapters = new Set(); // ä½¿ç”¨ Set æ¥é¿å…é‡å¤ç« èŠ‚
        if (selection.rangeCount > 0) {
            const range = selection.getRangeAt(0);
            let node = range.commonAncestorContainer;

            // ç¡®ä¿ä»æœ€è¿‘çš„å…ƒç´ èŠ‚ç‚¹å¼€å§‹
            while (node && node.nodeType !== Node.ELEMENT_NODE) {
                node = node.parentElement;
            }

            // ä½¿ç”¨é€’å½’æ–¹æ³•éå†DOMæ ‘
            function collectHeadings(node, level = 0) {
                if (!node) return;

                if (node.tagName && node.tagName.match(/^H[1-6]$/)) {
                    chapters.add(`${node.textContent.trim()}`);
                }

                if (node.previousElementSibling) {
                    collectHeadings(node.previousElementSibling, level);
                }

                if (node.parentElement && node.parentElement.tagName !== 'BODY') {
                    collectHeadings(node.parentElement, level + 1);
                }
            }

            collectHeadings(node);

            // å¦‚æœæ²¡æœ‰æ‰¾åˆ°ä»»ä½•ç« èŠ‚ä¿¡æ¯ï¼Œåˆ™æ·»åŠ é»˜è®¤æç¤º
            if (chapters.size === 0) {
                chapters.add('No chapter information found');
            }
        }

        // è·å–é¡¶çº§ä¾§è¾¹æ ç« èŠ‚
        const topLevelChapter = window.findTopLevelChapter(CURRENT_DOCNAME); // è°ƒç”¨å…¨å±€å‡½æ•°
        chapters.add(`é¡¶çº§åˆ†ç±»ï¼š${topLevelChapter}`); // æ’å…¥åˆ°ç« èŠ‚é›†åˆä¸­

        // æ·»åŠ ç« èŠ‚æ ‡é¢˜
        const chapterHeader = language === 'zh_CN' ? 'ä»¥ä¸‹é€çº§å‘ä¸Šè¿½æº¯ï¼š' : 'Trace upwards level by level:';
        selectedChapters = chapterHeader + '\n' + Array.from(chapters).join('\n');

        feedbackDialog.style.display = 'block';
        feedbackText.value = '';
    });

    submitButton.addEventListener('click', function() {
        const userQuestion = feedbackText.value.trim();
        if (!userQuestion) {
            alert('Issue description cannot be empty');
            return;
        }

        // è·å–ç”¨æˆ·ä¿¡æ¯ï¼ˆå…³é”®ä¿®æ”¹ç‚¹ï¼‰
        const username = localStorage.getItem('username') || 'åŒ¿å'; // ä» localStorage è·å–ç”¨æˆ·å

        // ç»Ÿä¸€å¤„ç†å†…å®¹ç¼©è¿›
        const formatContent = text => text.split('\n').map(line => '    ' + line).join('\n');

        // ç”Ÿæˆæ¶ˆæ¯å†…å®¹ï¼ˆæ ‡é¢˜é¡¶æ ¼ï¼Œå†…å®¹ç¼©è¿›ï¼‰
        const message = `${userHeader}\n` + 
                        `${formatContent(username)}\n\n` +
                        `${chaptersHeader}\n` + 
                        `${formatContent(selectedChapters)}\n\n` +
                        `${paragraphHeader}\n` + 
                        `${formatContent(selectedText)}\n\n` +
                        `${questionHeader}\n` + 
                        `${formatContent(userQuestion)}`;

        // æäº¤åˆ°åç«¯ï¼ˆå…³é”®ä¿®æ”¹ç‚¹ï¼‰
        const feedbackData = {
            user: username,  // ä½¿ç”¨çœŸå®ç”¨æˆ·å
            chapters: selectedChapters,
            paragraph: selectedText,
            question: userQuestion
        };

        fetch('http://172.29.57.206:5000/submit', {
            method: 'POST',
            headers: {
                'Content-Type': 'application/json',
            },
            body: JSON.stringify(feedbackData)
        })
        .then(response => response.json())
        .then(data => {
            console.log('æäº¤æˆåŠŸ:', data);
        })
        .catch(error => {
            console.error('æäº¤å¤±è´¥:', error);
        });

        // åˆ›å»ºBlobå¯¹è±¡å¹¶ä¿å­˜åˆ°æœ¬åœ°æ–‡ä»¶
        const blob = new Blob([message], { type: 'text/plain' });
        const link = document.createElement('a');
        link.href = URL.createObjectURL(blob);
        link.download = 'feedback.txt';
        link.click();

        // æ˜¾ç¤ºæç¤ºæ¡†
        promptBox.textContent = saveSuccessMessage;
        promptBox.style.display = 'block';
        const promptTimeout = setTimeout(() => {
            promptBox.style.display = 'none';
        }, 10000);

        // è‡ªåŠ¨å…³é—­åé¦ˆå¯¹è¯æ¡†
        feedbackDialog.style.display = 'none';
    });

    cancelButton.addEventListener('click', function() {
        feedbackDialog.style.display = 'none';
    });
});
</script>

    <style>
        /* éšè—æ•´ä¸ªæœç´¢æ å®¹å™¨ */
        .wy-side-nav-search > div[role="search"] {
            display: none !important;
        }

        /* æˆ–è€…æ›´ç²¾ç¡®åœ°éšè—è¡¨å• */
        form#rtd-search-form {
            display: none !important;
        }
    </style>

</head>

<body class="wy-body-for-nav"> 
  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >
    

          
          
          <a href="../../index.html" class="icon icon-home">
            Ameba IoT Docs
          </a>
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../../search.html" method="get">
    <input type="text" name="q" placeholder="æœç´¢æ–‡æ¡£" aria-label="æœç´¢æ–‡æ¡£" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

    
    <div id="custom-selectors" style="display: block !important; padding: 0; background: none; border: none;">
    </div>

    <script>
    /* ====================== åµŒå…¥å¼é…ç½®å¼€å§‹ ====================== */
    const embeddedConfig = {
        "freertos": {
            "name": "FreeRTOS",
            "languages": {
                "en": ["latest"],
                "cn": ["latest"]
            }
        },
        "linux": {
            "name": "Linux",
            "languages": {
                "en": ["latest"],
                "cn": ["latest"]
            }
        }
    };
    /* ====================== åµŒå…¥å¼é…ç½®ç»“æŸ ====================== */

    (function() {
        // è·å–åŸºç¡€URLè·¯å¾„
        function getBaseURL() {
            const url = new URL(window.location.href);
            if (url.protocol === 'file:') {
                // æœ¬åœ°è·¯å¾„å¤„ç†
                const pathParts = url.pathname.split('/').filter(part => part !== '');
                const index = pathParts.indexOf('build');
                return `file://${pathParts.slice(0, index + 1).join('/')}/`;
            } else {
                // ç½‘ç»œè·¯å¾„å¤„ç†
                return `${url.origin}/${url.pathname.split('/').slice(1, 3).join('/')}/`;
            }
        }

        // è·å–å½“å‰URLè·¯å¾„åˆ†æ®µ
        function getCurrentSegments() {
            const url = new URL(window.location.href);
            let segments = url.pathname.split('/').filter(segment => segment);

            if (url.protocol === 'file:') {
                // æœ¬åœ°è·¯å¾„å¤„ç†
                const index = segments.indexOf('build');
                segments = segments.slice(index + 1); // å»æ‰ build åŠä¹‹å‰çš„è·¯å¾„
            } else {
                // ç½‘ç»œè·¯å¾„å¤„ç†
                segments = segments.slice(3); // å»æ‰ ameba-iot-docs/
            }

            return {
                osKey: segments[0] || 'freertos', // é»˜è®¤ä¸º freertos
                language: segments[1] || 'en',   // é»˜è®¤ä¸º en
                version: segments[2] || 'latest' // é»˜è®¤ä¸º latest
            };
        }

        // è·å–OSæ˜¾ç¤ºåç§°åˆ—è¡¨
        function getOSNames(data) {
            return Object.keys(data).map(key => data[key].name);
        }

        // è·å–æŒ‡å®šOSçš„è¯­è¨€åˆ—è¡¨
        function getLanguages(data, osKey) {
            return Object.keys(data[osKey]?.languages || {});
        }

        // è·å–æŒ‡å®šOSå’Œè¯­è¨€çš„ç‰ˆæœ¬åˆ—è¡¨
        function getVersions(data, osKey, language) {
            return data[osKey]?.languages?.[language] || ['latest'];
        }

        // æ ¹æ®æ˜¾ç¤ºåç§°æŸ¥æ‰¾OSé”®
        function findOSKey(data, displayName) {
            return Object.keys(data).find(key => data[key].name === displayName);
        }

        // åˆå§‹åŒ–é€‰æ‹©å™¨
        function initSelectors() {
            const segments = getCurrentSegments();
            const currentOSName = embeddedConfig[segments.osKey]?.name;

            // å¦‚æœ OS æ— æ•ˆï¼Œé»˜è®¤è®¾ç½®ä¸º FreeRTOS
            if (!currentOSName) {
                console.warn("Invalid OS key, defaulting to FreeRTOS");
                segments.osKey = 'freertos';
            }

            // å¦‚æœè¯­è¨€æ— æ•ˆï¼Œé»˜è®¤è®¾ç½®ä¸º en
            if (!getLanguages(embeddedConfig, segments.osKey).includes(segments.language)) {
                console.warn("Invalid language, defaulting to en");
                segments.language = 'en';
            }

            // è·å–åŸºç¡€URL
            const baseURL = getBaseURL();

            // ç”Ÿæˆé€‰æ‹©å™¨HTML
            document.getElementById('custom-selectors').innerHTML = `
                <div id="custom-selectors" style="padding: 0; background: none; border: none;">
                    <!-- ç³»ç»Ÿé€‰æ‹©å™¨ -->
                    <div class="selector-container">
                        <label class="selector-label">
                            ${segments.language === 'cn' ? 'ç³»ç»Ÿ' : 'OS'}:
                        </label>
                        <select id="os-selector" class="selector-dropdown">
                            ${Object.keys(embeddedConfig).map(key => `
                                <option value="${key}">${embeddedConfig[key].name}</option>
                            `).join('')}
                        </select>
                    </div>

                    <!-- è¯­è¨€é€‰æ‹©å™¨ -->
                    <div class="selector-container">
                        <label class="selector-label">
                            ${segments.language === 'cn' ? 'è¯­è¨€' : 'Language'}:
                        </label>
                        <select id="language-selector" class="selector-dropdown">
                            ${getLanguages(embeddedConfig, segments.osKey).map(lang => `
                                <option value="${lang}">${lang}</option>
                            `).join('')}
                        </select>
                    </div>

                    <!-- ç‰ˆæœ¬é€‰æ‹©å™¨ -->
                    <div class="selector-container version-selector-container">
                        <label class="selector-label">
                            ${segments.language === 'cn' ? 'ç‰ˆæœ¬' : 'Version'}:
                        </label>
                        <select id="version-selector" class="selector-dropdown">
                            ${getVersions(embeddedConfig, segments.osKey, segments.language).map(ver => `
                                <option value="${ver}">${ver}</option>
                            `).join('')}
                        </select>
                    </div>

                    

                </div>`;

            // è®¾ç½®åˆå§‹é€‰ä¸­å€¼
            document.getElementById('os-selector').value = segments.osKey;
            document.getElementById('language-selector').value = segments.language;

            // ç¡®ä¿ç‰ˆæœ¬é€‰æ‹©æ¡†æœ‰é»˜è®¤å€¼
            const versionSelector = document.getElementById('version-selector');
            const availableVersions = getVersions(embeddedConfig, segments.osKey, segments.language);
            versionSelector.value = availableVersions.includes(segments.version) ? segments.version : availableVersions[0] || 'latest';

            // ç»‘å®šäº‹ä»¶ç›‘å¬
            document.getElementById('os-selector').addEventListener('change', () => {
                const newOSKey = document.getElementById('os-selector').value;
                const availableLangs = getLanguages(embeddedConfig, newOSKey);
                const defaultLang = availableLangs[0] || 'en';
                const defaultVersion = getVersions(embeddedConfig, newOSKey, defaultLang)[0] || 'latest';
                redirectTo(`${baseURL}${newOSKey}/${defaultLang}/${defaultVersion}/`);
            });

            document.getElementById('language-selector').addEventListener('change', () => {
                const newLang = document.getElementById('language-selector').value;
                const defaultVersion = getVersions(embeddedConfig, segments.osKey, newLang)[0] || 'latest';
                redirectTo(`${baseURL}${segments.osKey}/${newLang}/${defaultVersion}/`);
            });

            document.getElementById('version-selector').addEventListener('change', () => {
                const newVer = document.getElementById('version-selector').value;
                redirectTo(`${baseURL}${segments.osKey}/${segments.language}/${newVer}/`);
            });

            // ====================== æ–°å¢ä»£ç ï¼šæ³¨å†Œå’Œç™»å½•çš„å¼¹çª—é€»è¾‘ ======================
            function createAuthDialog(type) {
                const lang = segments.language === 'cn' ? 'cn' : 'en';
                
                // åˆ›å»ºå¼¹çª—å®¹å™¨
                const dialog = document.createElement('div');
                dialog.style.cssText = `
                    position: fixed;
                    top: 0;
                    left: 0;
                    width: 100%;
                    height: 100%;
                    background: rgba(0,0,0,0.5);
                    display: flex;
                    justify-content: center;
                    align-items: center;
                    z-index: 9999;
                `;

                // å¼¹çª—å†…å®¹
                const content = document.createElement('div');
                content.style.cssText = `
                    background: white;
                    padding: 20px;
                    border-radius: 8px;
                    min-width: 300px;
                `;

                // æ ‡é¢˜
                const title = document.createElement('h3');
                title.textContent = type === 'register' 
                    ? (lang === 'cn' ? 'æ³¨å†Œ' : 'Register') 
                    : (lang === 'cn' ? 'ç™»å½•' : 'Login');
                content.appendChild(title);

                // ç”¨æˆ·åè¾“å…¥
                const usernameLabel = document.createElement('label');
                usernameLabel.textContent = lang === 'cn' ? 'ç”¨æˆ·åï¼š' : 'Username:';
                const usernameInput = document.createElement('input');
                usernameInput.style.cssText = 'width: 100%; margin-bottom: 10px; padding: 5px;';
                content.appendChild(usernameLabel);
                content.appendChild(usernameInput);

                // å¯†ç è¾“å…¥
                const passwordLabel = document.createElement('label');
                passwordLabel.textContent = lang === 'cn' ? 'å¯†ç ï¼š' : 'Password:';
                const passwordInput = document.createElement('input');
                passwordInput.type = 'password';
                passwordInput.style.cssText = 'width: 100%; margin-bottom: 10px; padding: 5px;';
                content.appendChild(passwordLabel);
                content.appendChild(passwordInput);

                // æ³¨å†Œæ—¶éœ€è¦ç¡®è®¤å¯†ç 
                let confirmPasswordInput;
                if (type === 'register') {
                    const confirmLabel = document.createElement('label');
                    confirmLabel.textContent = lang === 'cn' ? 'ç¡®è®¤å¯†ç ï¼š' : 'Confirm Password:';
                    confirmPasswordInput = document.createElement('input');
                    confirmPasswordInput.type = 'password';
                    confirmPasswordInput.style.cssText = 'width: 100%; margin-bottom: 10px; padding: 5px;';
                    content.appendChild(confirmLabel);
                    content.appendChild(confirmPasswordInput);
                }

                // æŒ‰é’®å®¹å™¨
                const buttonContainer = document.createElement('div');
                buttonContainer.style.cssText = 'display: flex; gap: 10px; margin-top: 10px;';

                // ç¡®è®¤æŒ‰é’®
                const confirmBtn = document.createElement('button');
                confirmBtn.textContent = lang === 'cn' ? 'ç¡®è®¤' : 'Confirm';
                confirmBtn.onclick = () => {
                    const username = usernameInput.value.trim();
                    const password = passwordInput.value.trim();
                    const confirmPassword = confirmPasswordInput ? confirmPasswordInput.value.trim() : null;

                    // éªŒè¯è¾“å…¥
                    if (!username || !password) {
                        alert(lang === 'cn' ? 'ç”¨æˆ·åå’Œå¯†ç ä¸èƒ½ä¸ºç©ºï¼' : 'Username and password are required!');
                        return;
                    }

                    if (type === 'register' && password !== confirmPassword) {
                        alert(lang === 'cn' ? 'ä¸¤æ¬¡è¾“å…¥çš„å¯†ç ä¸ä¸€è‡´ï¼' : 'Passwords do not match!');
                        return;
                    }

                    // flask å‘é€è¯·æ±‚
                    fetch('http://172.29.57.206:5000/auth', {
                        method: 'POST',
                        headers: { 'Content-Type': 'application/json' },
                        body: JSON.stringify({
                            action: type,
                            username,
                            password
                        })
                    })
                    .then(response => response.json())
                    .then(data => {
                        if (data.success) {
                            alert(lang === 'cn' ? 'æ“ä½œæˆåŠŸï¼' : 'Success!');
                            // æ›´æ–°æœ¬åœ°å­˜å‚¨å’ŒUI
                            localStorage.setItem('isLoggedIn', 'true');
                            localStorage.setItem('username', username);
                            // å¼ºåˆ¶åˆ·æ–°æ˜¾ç¤ºçŠ¶æ€
                            document.getElementById('auth-buttons').style.display = 'none';
                            document.getElementById('user-info').style.display = 'block';
                            document.getElementById('username-display').textContent = username;
                            document.body.removeChild(dialog);
                        } else {
                            alert(lang === 'cn' ? 'å¤±è´¥ï¼š' + data.message : 'Failed: ' + data.message);
                        }
                    })
                    .catch(error => {
                        console.error('Error:', error);
                        alert(lang === 'cn' ? 'ç½‘ç»œé”™è¯¯' : 'Network error');
                    });
                };

                // å–æ¶ˆæŒ‰é’®
                const cancelBtn = document.createElement('button');
                cancelBtn.textContent = lang === 'cn' ? 'å–æ¶ˆ' : 'Cancel';
                cancelBtn.onclick = () => document.body.removeChild(dialog);

                buttonContainer.appendChild(confirmBtn);
                buttonContainer.appendChild(cancelBtn);
                content.appendChild(buttonContainer);
                dialog.appendChild(content);
                document.body.appendChild(dialog);
            }

            // æ³¨å†ŒæŒ‰é’®ç‚¹å‡»äº‹ä»¶
            document.getElementById('register-button').addEventListener('click', () => {
                createAuthDialog('register');
            });

            // ç™»å½•æŒ‰é’®ç‚¹å‡»äº‹ä»¶
            document.getElementById('login-button').addEventListener('click', () => {
                createAuthDialog('login');
            });

            // è·³è½¬å‡½æ•°
            function redirectTo(path) {
                const url = new URL(path, window.location.href);
                if (url.protocol === 'file:') {
                    // æœ¬åœ°è·¯å¾„é™„åŠ  index.html
                    url.pathname += 'index.html';
                }
                window.location.href = url.href;
            }

            /* =============== å·¦ä¸Šè§’ç™»å½•åŒºåŸŸ  =============== */
            function syncLoginState() {
                const isLoggedIn = localStorage.getItem('isLoggedIn') === 'true';
                document.getElementById('auth-buttons').style.display = isLoggedIn ? 'none' : 'flex';
                document.getElementById('user-info').style.display = isLoggedIn ? 'block' : 'none';
                if (isLoggedIn) {
                    document.getElementById('username-display').textContent = localStorage.getItem('username') || '';
                }
            }

            // åˆå§‹åŒ–åŒæ­¥çŠ¶æ€
            syncLoginState();
            /* =============== å·¦ä¸Šè§’ç™»å½•åŒºåŸŸ  =============== */
        }

        // DOMåŠ è½½å®Œæˆååˆå§‹åŒ–
        document.addEventListener('DOMContentLoaded', () => {
            try {
                initSelectors();
            } catch (error) {
                console.error("Error initializing selectors:", error);
            }
        });
    })();
</script>

        </div><div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="å¯¼èˆªèœå•">
              <ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../0_ameba_product/0_ameba_product_center_index_cn.html">äº§å“ä¸­å¿ƒ</a></li>
<li class="toctree-l1"><a class="reference internal" href="../0_ameba_sdk/0_ameba_sdks_index_cn.html">Ameba SDK</a></li>
<li class="toctree-l1"><a class="reference internal" href="../0_ameba_solutions/0_ameba_solutions_index_cn.html">è§£å†³æ–¹æ¡ˆ</a></li>
<li class="toctree-l1"><a class="reference internal" href="../0_gcc_build_environment/0_gcc_build_index_cn.html">0.1 GCC ç¼–è¯‘ç¯å¢ƒ</a></li>
<li class="toctree-l1"><a class="reference internal" href="../0_gdb_debug/0_gdb_debug_index_cn.html">0.2 GDB è°ƒè¯•</a></li>
<li class="toctree-l1"><a class="reference internal" href="../0_gcc_build_library/0_gcc_build_library_index_cn.html">0.3 GCC åº“çš„ç”Ÿæˆå’Œä½¿ç”¨</a></li>
<li class="toctree-l1"><a class="reference internal" href="../0_sdk_example/0_sdk_example_index_cn.html">0.4 SDK ç¤ºä¾‹</a></li>
<li class="toctree-l1"><a class="reference internal" href="../0_memory_layout/0_layout_index_cn.html">0.5 Flash å’Œ RAM å¸ƒå±€</a></li>
<li class="toctree-l1"><a class="reference internal" href="../0_user_config/0_usrcfg_index_cn.html">0.6 å¼€å‘è€…é…ç½®</a></li>
<li class="toctree-l1"><a class="reference internal" href="../0_tools/0_tools_index_cn.html">0.7 å·¥å…·</a></li>
<li class="toctree-l1"><a class="reference internal" href="../0_at_command/0_at_command_index_cn.html">0.8 AT å‘½ä»¤é›†</a></li>
<li class="toctree-l1"><a class="reference internal" href="../0_file_system/0_vfs_index_cn.html">0.9 è™šæ‹Ÿæ–‡ä»¶ç³»ç»Ÿ</a></li>
<li class="toctree-l1"><a class="reference internal" href="../0_ftl/0_ftl_index_cn.html">0.A Flash è½¬æ¢å±‚</a></li>
<li class="toctree-l1"><a class="reference internal" href="../1_mpu_cache/0_mpu_cache_index_cn.html">1.0 å†…å­˜ä¿æŠ¤å•å…ƒå’Œç¼“å­˜</a></li>
<li class="toctree-l1"><a class="reference internal" href="../1_boot_process/0_boot_index_cn.html">1.1 å¯åŠ¨è¿‡ç¨‹</a></li>
<li class="toctree-l1"><a class="reference internal" href="../1_ota/0_ota_index_cn.html">1.2 å›ºä»¶åœ¨çº¿å‡çº§ï¼ˆOTAï¼‰</a></li>
<li class="toctree-l1"><a class="reference internal" href="../1_otpc/0_otpc_index_cn.html">1.3 OTP å­˜å‚¨å™¨</a></li>
<li class="toctree-l1"><a class="reference internal" href="../1_chipen/0_chipen_index_cn.html">1.4 èŠ¯ç‰‡ä½¿èƒ½</a></li>
<li class="toctree-l1"><a class="reference internal" href="../1_ipc/0_ipc_index_cn.html">1.5 æ ¸é—´é€šä¿¡</a></li>
<li class="toctree-l1"><a class="reference internal" href="../1_pinmux/0_pinmux_index_cn.html">1.6 å¼•è„šå¤ç”¨</a></li>
<li class="toctree-l1"><a class="reference internal" href="../1_gpio/0_gpio_index_cn.html">1.7 GPIO å’Œå¼•è„šæ§åˆ¶</a></li>
<li class="toctree-l1"><a class="reference internal" href="../1_power_save/0_ps_index_cn.html">1.9 ä½åŠŸè€—å¼€å‘</a></li>
<li class="toctree-l1"><a class="reference internal" href="../2_whc_wifi_bridge/0_wifi_bridge_index_cn.html">2.0 WHC Bridge</a></li>
<li class="toctree-l1"><a class="reference internal" href="../2_whc_fullmac/0_fullmac_index_cn.html">2.1 WHC FullMAC</a></li>
<li class="toctree-l1"><a class="reference internal" href="../2_wifi_tunnel/0_wifi_tunnel_index_cn.html">2.2 Wi-Fi R-Mesh</a></li>
<li class="toctree-l1 current"><a class="reference internal" href="0_wifi_csi_index_cn.html">2.3 Wi-Fi CSI</a><ul class="current">
<li class="toctree-l2 current"><a class="current reference internal" href="#">Wi-Fi CSI æ¦‚è¿°</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#active-csi">Active CSIï¼š å•æ’­æ¨¡å¼</a></li>
<li class="toctree-l3"><a class="reference internal" href="#wifi-acitve-csi-broadcast-mode">Active CSIï¼š å¹¿æ’­æ¨¡å¼</a></li>
<li class="toctree-l3"><a class="reference internal" href="#passive-csi">Passive CSI</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#id2">Wi-Fi CSI æ¶æ„</a></li>
<li class="toctree-l2"><a class="reference internal" href="#wi-fi-csi-apis">Wi-Fi CSI ç›¸å…³ APIs</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#wifi-csi-config">wifi_csi_config</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#id3">å‚æ•°å®šä¹‰</a></li>
<li class="toctree-l4"><a class="reference internal" href="#id4">å‚æ•°å–å€¼</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="#wifi-csi-report">wifi_csi_report</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#id5">å‚æ•°å®šä¹‰</a></li>
<li class="toctree-l4"><a class="reference internal" href="#csi">CSI ç¼“å†²åŒºå¸ƒå±€</a></li>
<li class="toctree-l4"><a class="reference internal" href="#id8">CSI åŸå§‹æ•°æ®å­è½½æ³¢æ•°ç›®</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="#wifi-reg-event-handler">wifi_reg_event_handler</a></li>
<li class="toctree-l3"><a class="reference internal" href="#wifi-unreg-event-handler">wifi_unreg_event_handler</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#id9">Wi-Fi CSI ä½¿ç”¨é¡»çŸ¥</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#id10">åŸºæœ¬è¦æ±‚</a></li>
<li class="toctree-l3"><a class="reference internal" href="#id11">æ–¹æ³•å››è®¾è®¡è€ƒé‡</a></li>
<li class="toctree-l3"><a class="reference internal" href="#id12">ç¼–è¯‘ Wi-Fi CSI å›ºä»¶</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#id13">Wi-Fi CSI åº”ç”¨ç¤ºä¾‹</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#id14">Wi-Fi CSI ç¤ºä¾‹æ¦‚è¿°</a></li>
<li class="toctree-l3"><a class="reference internal" href="#id15">Wi-Fi CSI ç¤ºä¾‹è¯¦è§£</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#id16">ç¤ºä¾‹åˆå§‹åŒ–</a></li>
<li class="toctree-l4"><a class="reference internal" href="#id17">Wi-Fi CSI å…¥å£å‡½æ•°</a></li>
<li class="toctree-l4"><a class="reference internal" href="#id18">Wi-Fi CSI å¤„ç†çº¿ç¨‹</a></li>
<li class="toctree-l4"><a class="reference internal" href="#id19">Wi-Fi CSI å›è°ƒå‡½æ•°</a></li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../2_wifi_adaptivity_test/0_wifi_adaptivity_index_cn.html">2.4 Wi-Fi Adaptivity æµ‹è¯•æŒ‡å—</a></li>
<li class="toctree-l1"><a class="reference internal" href="../3_security/0_security_index_cn.html">3.1 å®‰å…¨ä¸åŠ å¯†</a></li>
<li class="toctree-l1"><a class="reference internal" href="../3_trng/0_trng_index_cn.html">3.2 çœŸéšæœºæ•°å‘ç”Ÿå™¨</a></li>
<li class="toctree-l1"><a class="reference internal" href="../3_nda_huk_derivation/0_huk_derivation_index_nda.html">3.3 HUK ç”Ÿæˆ ğŸ”’</a></li>
<li class="toctree-l1"><a class="reference internal" href="../3_nda_rdp/0_rdp_index_nda.html">3.4 RDP ğŸ”’</a></li>
<li class="toctree-l1"><a class="reference internal" href="../3_nda_rsip/0_rsip_index_nda.html">3.5 RSIP ğŸ”’</a></li>
<li class="toctree-l1"><a class="reference internal" href="../3_nda_secure_boot/0_secure_boot_index_nda.html">3.6 å®‰å…¨å¯åŠ¨ ğŸ”’</a></li>
<li class="toctree-l1"><a class="reference internal" href="../3_nda_swd_protection/0_swd_protection_index_nda.html">3.7 SWD ä¿æŠ¤ ğŸ”’</a></li>
<li class="toctree-l1"><a class="reference internal" href="../3_nda_tfm/0_tfm_index_nda.html">3.8 Trusted Firmware-M (TF-M) ğŸ”’</a></li>
<li class="toctree-l1"><a class="reference internal" href="../3_crypto_engine/0_crypto_engine_index_cn.html">3.9 å¯¹ç§°ç¡¬ä»¶åŠ å¯†å¼•æ“</a></li>
<li class="toctree-l1"><a class="reference internal" href="../3_ecdsa_engine/0_ecdsa_index_cn.html">3.a ECDSA ç¡¬ä»¶åŠ å¯†å¼•æ“</a></li>
<li class="toctree-l1"><a class="reference internal" href="../3_eddsa_engine/0_eddsa_index_cn.html">3.b EDDSA ç¡¬ä»¶åŠ å¯†å¼•æ“</a></li>
<li class="toctree-l1"><a class="reference internal" href="../3_rsa_engine/0_rsa_index_cn.html">3.c RSA ç¡¬ä»¶åŠ å¯†å¼•æ“</a></li>
<li class="toctree-l1"><a class="reference internal" href="../4_ai/0_ai_index_cn.html">4.1 äººå·¥æ™ºèƒ½</a></li>
<li class="toctree-l1"><a class="reference internal" href="../4_ai_voice/0_ai_voice_index_cn.html">4.2 è¯­éŸ³è¯†åˆ«</a></li>
<li class="toctree-l1"><a class="reference internal" href="../4_multimedia/0_multimedia_index_cn.html">4.3 å¤šåª’ä½“</a></li>
<li class="toctree-l1"><a class="reference internal" href="../4_dsp/0_dsp_index_cn.html">4.4 DSP ä½¿ç”¨æŒ‡å—</a></li>
<li class="toctree-l1"><a class="reference internal" href="../6_mass_production/0_mp_index_cn.html">6.1 é‡äº§æŒ‡å¯¼</a></li>
<li class="toctree-l1"><a class="reference internal" href="../6_mp_image/0_mp_image_index_cn.html">6.2 MP å›ºä»¶</a></li>
<li class="toctree-l1"><a class="reference internal" href="../6_mptools/0_mptools_index_cn.html">6.3 äº§æµ‹å·¥å…·</a></li>
<li class="toctree-l1"><a class="reference internal" href="../7_usb/0_usb_index_cn.html">7.1 USB ä¸»æœºä¸ä»æœº</a></li>
<li class="toctree-l1"><a class="reference internal" href="../8_dmac/0_dmac_index_cn.html">8.1 DMA æ§åˆ¶å™¨</a></li>
<li class="toctree-l1"><a class="reference internal" href="../8_psram/0_psram_index_cn.html">8.2 PSRAM</a></li>
<li class="toctree-l1"><a class="reference internal" href="../8_thermal/0_thermal_index_cn.html">8.3 æ¸©åº¦æµ‹é‡</a></li>
<li class="toctree-l1"><a class="reference internal" href="../8_adc/0_adc_index_cn.html">8.4 æ¨¡æ•°è½¬æ¢å™¨</a></li>
<li class="toctree-l1"><a class="reference internal" href="../8_ir/0_ir_index_cn.html">8.5 çº¢å¤–æ”¶å‘å™¨</a></li>
<li class="toctree-l1"><a class="reference internal" href="../8_ledc/0_ledc_index_cn.html">8.6 LED æ§åˆ¶å™¨</a></li>
<li class="toctree-l1"><a class="reference internal" href="../8_cap_touch/0_cap_touch_index_cn.html">8.7 Cap-Touch</a></li>
<li class="toctree-l1"><a class="reference internal" href="../8_key_scan/0_key_scan_index_cn.html">8.8 Key-Scan</a></li>
<li class="toctree-l1"><a class="reference internal" href="../8_rtc_io/0_rtc_io_index_cn.html">8.9 RTC-IO</a></li>
<li class="toctree-l1"><a class="reference internal" href="../8_lcdc/0_lcdc_index_cn.html">8.A LCD æ§åˆ¶å™¨</a></li>
</ul>

        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap"><nav class="wy-nav-top" aria-label="ç§»åŠ¨ç‰ˆå¯¼èˆªèœå•" >
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../../index.html">Ameba IoT Docs</a>
      </nav>

      <div class="wy-nav-content">
    
        <div class="rst-content">
          <div role="navigation" aria-label="é¡µé¢å¯¼èˆª">
  <ul class="wy-breadcrumbs">
      <li><a href="../../index.html" class="icon icon-home" aria-label="Home"></a></li>
          <li class="breadcrumb-item"><a href="0_wifi_csi_index_cn.html">Wi-Fi CSI</a></li>
      <li class="breadcrumb-item active">Wi-Fi CSI æ¦‚è¿°</li>
      <li class="wy-breadcrumbs-aside">
      </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
             
  <section id="wi-fi-csi">
<span id="wifi-csi"></span><h1>Wi-Fi CSI æ¦‚è¿°<a class="headerlink" href="#wi-fi-csi" title="Link to this heading">ïƒ</a></h1>
<p>Wi-Fi CSI ï¼ˆChannel State Informationï¼Œä¿¡é“çŠ¶æ€ä¿¡æ¯ï¼‰æ˜¯ä¸€ç§ç”¨äºæè¿°æ— çº¿ä¿¡é“ç‰¹æ€§çš„æŠ€æœ¯ï¼Œæ—¨åœ¨é€šè¿‡ä¸ŠæŠ¥å®Œæ•´çš„ CSI ä¿¡æ¯æ¥é‡åŒ–æ— çº¿ç°è±¡ï¼ˆå¦‚å¹²æ‰°ã€å¤šå¾„ã€å¤šæ™®å‹’é¢‘ç§»ï¼‰åœ¨ç»™å®šç¯å¢ƒä¸­å¯¹æ— çº¿ä¿¡å·çš„æ€»ä½“å½±å“ã€‚å¯ç”¨äºäººç±»æ´»åŠ¨åˆ†æã€Wi-Fi å®¤å†…å®šä½ã€æ‰‹åŠ¿è¯†åˆ«ç­‰ã€‚</p>
<p>Realtek Wi-Fi CSI æ ¹æ® Realtek è®¾å¤‡ï¼ˆSTA æ¨¡å¼æˆ– SoftAP æ¨¡å¼ï¼‰æ˜¯å¦å‚ä¸ä¼ è¾“ CSI è§¦å‘å¸§åˆ†ä¸º Active CSI å’Œ Passive CSI ä¸¤ç§æ–¹æ¡ˆã€‚</p>
<ul>
<li><p><strong>Active CSI</strong>ï¼š Realtek è®¾å¤‡éœ€è¦ä¸»åŠ¨ä¼ è¾“ CSI è§¦å‘å¸§</p>
<blockquote>
<div><ul class="simple">
<li><p>Active CSI æ ¹æ® CSI è§¦å‘å¸§çš„ç±»å‹åˆ†ä¸ºä¸¤ç§æ¨¡å¼ï¼šå•æ’­æ¨¡å¼å’Œå¹¿æ’­æ¨¡å¼ã€‚å…·ä½“ä¿¡æ¯å‚è€ƒ <a class="reference internal" href="#wifi-acitve-csi-unicast-mode"><span class="std std-ref">Active CSIï¼š å•æ’­æ¨¡å¼</span></a> å’Œ <a class="reference internal" href="#wifi-acitve-csi-broadcast-mode"><span class="std std-ref">Active CSIï¼š å¹¿æ’­æ¨¡å¼</span></a>.</p></li>
<li><p>Active CSI ä½¿ç”¨ Public Action å¸§ä½œä¸º CSI è§¦å‘å¸§ã€‚</p></li>
</ul>
</div></blockquote>
</li>
<li><p><strong>Passive CSI</strong>ï¼š Realtek è®¾å¤‡ä¸è¦æ±‚ä¼ è¾“ CSI è§¦å‘å¸§</p>
<blockquote>
<div><ul class="simple">
<li><p>å…·ä½“ä¿¡æ¯å‚è€ƒ <a class="reference internal" href="#wifi-passive-csi"><span class="std std-ref">Passive CSI</span></a>.</p></li>
</ul>
</div></blockquote>
</li>
</ul>
<section id="active-csi">
<span id="wifi-acitve-csi-unicast-mode"></span><h2>Active CSIï¼š å•æ’­æ¨¡å¼<a class="headerlink" href="#active-csi" title="Link to this heading">ïƒ</a></h2>
<ul class="simple">
<li><p><strong>æ–¹æ³•ä¸€</strong>ï¼š Realtek STA å‘ AP å‘é€å•æ’­ CSI è§¦å‘å¸§ï¼Œå¹¶é€šè¿‡è§£ç ä¸Šä¸€ CSI è§¦å‘å¸§çš„ ACK å“åº”å¸§ä»¥è·å–é‡‡é›† CSIï¼ˆä¸€å¯¹ä¸€é€šä¿¡ï¼‰ã€‚</p></li>
<li><p><strong>æ–¹æ³•ä¸€è¡ç”Ÿç‰ˆ</strong>ï¼š Realtek STA å‘å…¶ä»– STAx è®¾å¤‡å‘é€å•æ’­ CSI è§¦å‘å¸§ï¼Œå¹¶é€šè¿‡è§£ç ä¸Šä¸€ CSI è§¦å‘å¸§çš„ ACK å“åº”å¸§ä»¥è·å– CSIï¼ˆé€šè¿‡è½®è¯¢å®ç°ä¸€å¯¹å¤šé€šä¿¡ï¼‰ã€‚</p></li>
<li><p><strong>æ–¹æ³•äºŒ</strong>ï¼š Realtek SoftAP å‘å…³è”è®¾å¤‡å‘é€å•æ’­ CSI è§¦å‘å¸§ï¼Œå¹¶é€šè¿‡è§£ç ä¸Šä¸€ CSI è§¦å‘å¸§çš„ ACK å“åº”å¸§ä»¥è·å– CSIï¼ˆé€šè¿‡è½®è¯¢å®ç°ä¸€å¯¹å¤šé€šä¿¡ï¼‰ã€‚</p></li>
</ul>
<figure class="align-center" id="id20">
<span id="collecting-csi-from-rx-ack-packet-response-mode"></span><a class="reference internal image-reference" href="../../_images/collecting_csi_from_rx_ack_packet_response_mode.svg"><img alt="../../_images/collecting_csi_from_rx_ack_packet_response_mode.svg" height="489" src="../../_images/collecting_csi_from_rx_ack_packet_response_mode.svg" width="1346" /></a>
<figcaption>
<p><span class="caption-text">åŸºäº ACK å“åº”æŠ¥æ–‡çš„ CSI é‡‡é›†ï¼ˆRx Response Modeï¼‰</span><a class="headerlink" href="#id20" title="Link to this image">ïƒ</a></p>
</figcaption>
</figure>
</section>
<section id="wifi-acitve-csi-broadcast-mode">
<span id="id1"></span><h2>Active CSIï¼š å¹¿æ’­æ¨¡å¼<a class="headerlink" href="#wifi-acitve-csi-broadcast-mode" title="Link to this heading">ïƒ</a></h2>
<ul class="simple">
<li><p><strong>æ–¹æ³•ä¸‰</strong>ï¼š Realtek SoftAP å‘é€å¹¿æ’­ CSI è§¦å‘å¸§ï¼ŒRealtek STAs è§£ç ä»¥è·å– CSIã€‚</p></li>
<li><p><strong>æ–¹æ³•å››</strong>ï¼š ä¸€ä¸ª Realtek STA å‘é€å¹¿æ’­ CSI è§¦å‘å¸§ï¼Œå…¶ä»–é‚»è¿‘ Realtek STAs è§£ç ä»¥è·å– CSIã€‚</p></li>
</ul>
<figure class="align-center" id="id21">
<span id="collecting-csi-from-rx-broadcast-packet-normal-mode"></span><a class="reference internal image-reference" href="../../_images/collecting_csi_from_rx_broadcast_packet_normal_mode.svg"><img alt="../../_images/collecting_csi_from_rx_broadcast_packet_normal_mode.svg" height="625" src="../../_images/collecting_csi_from_rx_broadcast_packet_normal_mode.svg" width="1324" /></a>
<figcaption>
<p><span class="caption-text">åŸºäºå¹¿æ’­æŠ¥æ–‡çš„ CSI é‡‡é›†ï¼ˆRx Normal Modeï¼‰</span><a class="headerlink" href="#id21" title="Link to this image">ïƒ</a></p>
</figcaption>
</figure>
</section>
<section id="passive-csi">
<span id="wifi-passive-csi"></span><h2>Passive CSI<a class="headerlink" href="#passive-csi" title="Link to this heading">ïƒ</a></h2>
<ul class="simple">
<li><p><strong>æ–¹æ³•äº”</strong>ï¼š Realtek STA/SoftAP é€šè¿‡å¯¹ç›®æ ‡æ¥æ”¶æŠ¥æ–‡è§£ç ä»¥è·å– CSIï¼ˆä¸€å¯¹ä¸€é€šä¿¡ï¼‰ã€‚</p></li>
</ul>
<figure class="align-center" id="id22">
<span id="collecting-csi-from-rx-packet-normal-mode"></span><a class="reference internal image-reference" href="../../_images/collecting_csi_from_rx_packet_normal_mode.svg"><img alt="../../_images/collecting_csi_from_rx_packet_normal_mode.svg" height="501" src="../../_images/collecting_csi_from_rx_packet_normal_mode.svg" width="813" /></a>
<figcaption>
<p><span class="caption-text">åŸºäºæ¥æ”¶æŠ¥æ–‡çš„ CSI é‡‡é›†ï¼ˆRx Normal Modeï¼‰</span><a class="headerlink" href="#id22" title="Link to this image">ïƒ</a></p>
</figcaption>
</figure>
</section>
</section>
<section id="id2">
<h1>Wi-Fi CSI æ¶æ„<a class="headerlink" href="#id2" title="Link to this heading">ïƒ</a></h1>
<p>Wi-Fi CSI åŠŸèƒ½ä¸»è¦ç”±ä¸‰ä¸ªæ¨¡å—ç»„æˆï¼š</p>
<ol class="arabic simple">
<li><p>é…ç½®å¹¶å¯ç”¨ Wi-Fi CSI</p>
<ul class="simple">
<li><p>åº”ç”¨ç¨‹åºå¿…é¡»è°ƒç”¨ API ä»¥æŒ‰éœ€é…ç½® Wi-Fi CSI å‚æ•°ï¼Œå¹¶å¯ç”¨ Wi-Fi CSI åŠŸèƒ½ã€‚</p></li>
<li><p>å¯ç”¨ Wi-Fi CSI åŠŸèƒ½åè‹¥å¼ƒç”¨åˆ™åº”ç”¨ç¨‹åºå¿…é¡»è°ƒç”¨ API ç¦ç”¨ Wi-Fi CSI åŠŸèƒ½ã€‚</p></li>
</ul>
</li>
<li><p>æ³¨å†Œ/æ³¨é”€ Wi-Fi CSI å›è°ƒå‡½æ•°</p>
<ul class="simple">
<li><p>å¯ç”¨ Wi-Fi CSI æ—¶æ³¨å†Œå›è°ƒå‡½æ•°ï¼ŒWi-Fi é©±åŠ¨å°†é€šè¿‡è¯¥å›è°ƒå‡½æ•°åœ¨æ¯ä¸ª CSI æŠ¥æ–‡å‡†å¤‡å°±ç»ªæ—¶å‘åº”ç”¨ç¨‹åºå‘é€é€šçŸ¥æ ‡å¿—ã€‚</p></li>
<li><p>ç¦ç”¨ Wi-Fi CSI æ—¶æ³¨é”€å›è°ƒå‡½æ•°ã€‚</p></li>
</ul>
</li>
<li><p>ä¸ŠæŠ¥ Wi-Fi CSI æ•°æ®</p>
<ul class="simple">
<li><p>åº”ç”¨ç¨‹åºåº”è¿è¡Œç‹¬ç«‹çº¿ç¨‹ä»¥ç­‰å¾… Wi-Fi CSI æŠ¥æ–‡å°±ç»ªæ ‡å¿—ï¼Œéšåè°ƒç”¨ API è¯»å– Wi-Fi CSI æŠ¥æ–‡ã€‚</p></li>
</ul>
</li>
</ol>
<figure class="align-center" id="id23">
<a class="reference internal image-reference" href="../../_images/csi_architecture.svg"><img alt="../../_images/csi_architecture.svg" height="791" src="../../_images/csi_architecture.svg" width="1318" /></a>
<figcaption>
<p><span class="caption-text">Wi-Fi CSI åŠŸèƒ½æ¡†æ¶å›¾</span><a class="headerlink" href="#id23" title="Link to this image">ïƒ</a></p>
</figcaption>
</figure>
</section>
<section id="wi-fi-csi-apis">
<h1>Wi-Fi CSI ç›¸å…³ APIs<a class="headerlink" href="#wi-fi-csi-apis" title="Link to this heading">ïƒ</a></h1>
<section id="wifi-csi-config">
<h2>wifi_csi_config<a class="headerlink" href="#wifi-csi-config" title="Link to this heading">ïƒ</a></h2>
<ul>
<li><p>å‡½æ•°åŸå‹ï¼š</p>
<div class="highlight-c notranslate"><div class="highlight"><pre><span></span><span class="kt">int</span><span class="w"> </span><span class="n">wifi_csi_config</span><span class="p">(</span><span class="k">struct</span><span class="w"> </span><span class="nc">_rtw_csi_action_parm_t</span><span class="w"> </span><span class="o">*</span><span class="n">act_param</span><span class="p">)</span>
</pre></div>
</div>
</li>
<li><p>ç”¨é€”ï¼š Wi-Fi CSI å‚æ•°é…ç½®å’ŒåŠŸèƒ½å¯åœ</p>
<ul class="simple">
<li><p>act = <code class="docutils literal notranslate"><span class="pre">CSI_ACT_CFG</span></code>ï¼š é…ç½® Wi-Fi CSI å‚æ•°ï¼ˆå¦‚ä¾¦æµ‹é¢‘ç‡ã€ç²¾åº¦ç­‰ï¼‰</p></li>
<li><p>act = <code class="docutils literal notranslate"><span class="pre">CSI_ACT_EN</span></code>ï¼šå¯ç”¨/åœç”¨ Wi-Fi CSI åŠŸèƒ½</p>
<ul>
<li><p>åœç”¨åæ“ä½œï¼šè‹¥éœ€é‡æ–°å¯ç”¨ï¼Œéœ€å…ˆè°ƒç”¨ <code class="docutils literal notranslate"><span class="pre">act</span> <span class="pre">=</span> <span class="pre">CSI_ACT_CFG</span></code> é‡æ–°é…ç½®å‚æ•°</p></li>
</ul>
</li>
</ul>
</li>
</ul>
<section id="id3">
<h3>å‚æ•°å®šä¹‰<a class="headerlink" href="#id3" title="Link to this heading">ïƒ</a></h3>
<div class="sphinx-tabs docutils container">
<div aria-label="Tabbed content" class="closeable" role="tablist"><button aria-controls="panel-0-0-0" aria-selected="true" class="sphinx-tabs-tab" id="tab-0-0-0" name="0-0" role="tab" tabindex="0">RTL8721Dx</button><button aria-controls="panel-0-0-1" aria-selected="false" class="sphinx-tabs-tab" id="tab-0-0-1" name="0-1" role="tab" tabindex="-1">RTL8720E</button><button aria-controls="panel-0-0-2" aria-selected="false" class="sphinx-tabs-tab" id="tab-0-0-2" name="0-2" role="tab" tabindex="-1">RTL8726E</button><button aria-controls="panel-0-0-3" aria-selected="false" class="sphinx-tabs-tab" id="tab-0-0-3" name="0-3" role="tab" tabindex="-1">RTL8730E</button></div><div aria-labelledby="tab-0-0-0" class="sphinx-tabs-panel" id="panel-0-0-0" name="0-0" role="tabpanel" tabindex="0"><table class="docutils align-default" style="width: 100%">
<thead>
<tr class="row-odd"><th class="head"><p>å‚æ•°å</p></th>
<th class="head"><p>ç±»å‹</p></th>
<th class="head"><p>æè¿°</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>group_num</p></td>
<td><p>unsigned char</p></td>
<td><p>æŒ‡å®š CSI ä¿¡æ¯å­è½½æ³¢æŠ½å–æ–¹å¼</p>
<ul class="simple">
<li><p>0ï¼š é€ä¸ªå­è½½æ³¢æ•°æ®è·å–</p></li>
<li><p>1ï¼š æ¯ä¸¤ä¸ªå­è½½æ³¢æŠ½å–ä¸€ç»„æ•°æ®</p></li>
<li><p>2ï¼š æ¯å››ä¸ªå­è½½æ³¢æŠ½å–ä¸€ç»„æ•°æ®</p></li>
<li><p>3ï¼š æ¯å…«ä¸ªå­è½½æ³¢æŠ½å–ä¸€ç»„æ•°æ®</p></li>
</ul>
</td>
</tr>
<tr class="row-odd"><td><p>accuracy</p></td>
<td><p>unsigned char</p></td>
<td><p>æŒ‡å®š CSI åŸå§‹æ•°æ® ï¼ˆCH I/Qï¼‰ ç²¾åº¦</p>
<ul class="simple">
<li><p>0ï¼š S(8,3) â†’ æœ‰ç¬¦å·æ•°ï¼Œ8 ä½æ€»é•¿ï¼ˆ3 ä½å°æ•°ï¼‰</p></li>
<li><p>1ï¼š S(16,11) â†’ æœ‰ç¬¦å·æ•°ï¼Œ16 ä½æ€»é•¿ï¼ˆ11 ä½å°æ•°ï¼‰</p></li>
</ul>
</td>
</tr>
<tr class="row-even"><td><p>alg_opt</p></td>
<td><p>unsigned char</p></td>
<td><p>ä¿ç•™</p></td>
</tr>
<tr class="row-odd"><td><p>ch_opt</p></td>
<td><p>unsigned char</p></td>
<td><p>é…ç½® CSI æ¥æºäºè§£ç ä¼ ç»Ÿè®­ç»ƒåºåˆ—éƒ¨åˆ†è¿˜æ˜¯éä¼ ç»Ÿçš„è®­ç»ƒåºåˆ—éƒ¨åˆ†</p></td>
</tr>
<tr class="row-even"><td><p>csi_role</p></td>
<td><p>unsigned char</p></td>
<td><p>æŒ‡å®šä½¿èƒ½ Wi-Fi CSI çš„è®¾å¤‡æ‰®æ¼”çš„è§’è‰²</p></td>
</tr>
<tr class="row-odd"><td><p>mode</p></td>
<td><p>unsigned char</p></td>
<td><p>æŒ‡å®šè·å– Wi-Fi CSI çš„æ¨¡å¼</p>
<ul class="simple">
<li><p>0ï¼š Rx Normal Mode ï¼ˆé€šè¿‡è§£ç å½“å‰æ”¶åˆ°çš„æŠ¥æ–‡ä»¥è·å– CSIï¼‰</p></li>
<li><p>2ï¼š Rx Response Mode ï¼ˆé€šè¿‡è§£ç ä¸Šä¸€ CSI è§¦å‘å¸§çš„ ACK æŠ¥æ–‡ä»¥è·å– CSIï¼‰</p></li>
<li><p>å…¶ä»–ï¼šä¿ç•™</p></li>
</ul>
</td>
</tr>
<tr class="row-even"><td><p>act</p></td>
<td><p>unsigned char</p></td>
<td><p>ç”¨ä»¥åŒºåˆ† Wi-Fi CSI å‚æ•°é…ç½®å’Œå¯ç”¨/åœç”¨ W-Fi CSI åŠŸèƒ½</p></td>
</tr>
<tr class="row-odd"><td><p>trig_frame_mgnt</p></td>
<td><p>unsigned short</p></td>
<td><p>æŒ‡å®š CSI è§¦å‘å¸§çš„ç®¡ç†å¸§ç±»å‹ ï¼ˆç”¨äº Rx Normal Modeï¼ŒRx Response Mode ä¸‹æ— æ•ˆï¼‰</p></td>
</tr>
<tr class="row-even"><td><p>trig_frame_ctrl</p></td>
<td><p>unsigned short</p></td>
<td><p>æŒ‡å®š CSI è§¦å‘å¸§çš„æ§åˆ¶å¸§ç±»å‹ ï¼ˆç”¨äº Rx Normal Modeï¼ŒRx Response Mode ä¸‹æ— æ•ˆï¼‰</p></td>
</tr>
<tr class="row-odd"><td><p>trig_frame_data</p></td>
<td><p>unsigned short</p></td>
<td><p>æŒ‡å®š CSI è§¦å‘å¸§çš„æ•°æ®å¸§ç±»å‹ ï¼ˆç”¨äº Rx Normal Modeï¼ŒRx Response Mode ä¸‹æ— æ•ˆï¼‰</p></td>
</tr>
<tr class="row-even"><td><p>enable</p></td>
<td><p>unsigned char</p></td>
<td><ul class="simple">
<li><p>0ï¼š åœç”¨ Wi-Fi CSI åŠŸèƒ½</p></li>
<li><p>1ï¼š å¯ç”¨ Wi-Fi CSI åŠŸèƒ½</p></li>
</ul>
</td>
</tr>
<tr class="row-odd"><td><p>trig_period</p></td>
<td><p>unsigned char</p></td>
<td><p>Wi-Fi CSI ä¾¦æµ‹é¢‘ç‡ï¼Œå•ä½ï¼š 320us ï¼ˆå»ºè®®å€¼ï¼š 15~255ï¼‰</p></td>
</tr>
<tr class="row-even"><td><p>data_rate</p></td>
<td><p>unsigned char</p></td>
<td><p>æŒ‡å®š CSI è§¦å‘å¸§çš„ä¼ è¾“é€Ÿç‡ï¼Œä½†åœ¨ Rx Response Mode ä¸­æ— æ•ˆï¼Œå› ä¸º Wi-Fi CSI å–å†³äº ACK å“åº”å¸§çš„é€Ÿç‡</p>
<ul class="simple">
<li><p>ä»…æ”¯æŒ OFDM/HT é€Ÿç‡</p></li>
</ul>
</td>
</tr>
<tr class="row-odd"><td><p>data_bw</p></td>
<td><p>unsigned char</p></td>
<td><p>æŒ‡å®š CSI è§¦å‘å¸§çš„å¸¦å®½</p>
<ul class="simple">
<li><p>0ï¼š 20MHz</p></li>
<li><p>1ï¼š 40MHz</p></li>
<li><p>å…¶ä»–ï¼šä¿ç•™</p></li>
</ul>
</td>
</tr>
<tr class="row-even"><td><p>mac_addr[6]</p></td>
<td><p>unsigned char</p></td>
<td><p>æŒ‡å®š CSI è§¦å‘å¸§çš„ç›®çš„åœ°å€</p>
<ul class="simple">
<li><p>å¦‚æœ <code class="docutils literal notranslate"><span class="pre">multi_type</span></code> ç­‰äº 1ï¼Œ åˆ™ <code class="docutils literal notranslate"><span class="pre">mac_addr</span></code> ä¿ç•™ã€‚</p></li>
</ul>
</td>
</tr>
<tr class="row-odd"><td><p>multi_type</p></td>
<td><p>unsigned char</p></td>
<td><p>æŒ‡å®š CSI è§¦å‘å¸§æ˜¯å•æ’­è¿˜æ˜¯å¹¿æ’­ï¼Œä»…åœ¨ Active CSI ä¸­æœ‰æ•ˆ</p>
<ul class="simple">
<li><p>0ï¼š å•æ’­ ï¼ˆä½¿ç”¨å•æ’­å¸§ä¸”é€šè¿‡è§£ç å•æ’­å¸§çš„ ACK æŠ¥æ–‡ä»¥è·å– CSIï¼‰</p></li>
<li><p>1ï¼š å¹¿æ’­ ï¼ˆä½¿ç”¨å¹¿æ’­å¸§ä¸”å¦ä¸€æ–¹é€šè¿‡è§£ç è¯¥å¹¿æ’­å¸§ä»¥è·å– CSI ï¼‰</p></li>
</ul>
</td>
</tr>
<tr class="row-even"><td><p>trig_flag</p></td>
<td><p>unsigned char</p></td>
<td><p>æ–¹æ³•å››ä¸­ä½œä¸ºä¼ è¾“ CSI è§¦å‘å¸§è§’è‰²çš„æ ‡è¯†ç¬¦ï¼Œæ–¹æ³•ä¸€è¡ç”Ÿç‰ˆä¸­ä½œä¸ºä¼ è¾“ ACK å“åº”å¸§è§’è‰²çš„æ ‡è¯†ç¬¦ï¼Œå…¶ä»–ä¿ç•™</p>
<ul class="simple">
<li><p>å–å€¼èŒƒå›´ï¼š1 ~ 15 ï¼ˆ0 ä¿ç•™ï¼‰</p></li>
</ul>
</td>
</tr>
</tbody>
</table>
</div><div aria-labelledby="tab-0-0-1" class="sphinx-tabs-panel" hidden="true" id="panel-0-0-1" name="0-1" role="tabpanel" tabindex="0"><table class="docutils align-default" style="width: 100%">
<thead>
<tr class="row-odd"><th class="head"><p>å‚æ•°å</p></th>
<th class="head"><p>ç±»å‹</p></th>
<th class="head"><p>æè¿°</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>group_num</p></td>
<td><p>unsigned char</p></td>
<td><p>æŒ‡å®š CSI ä¿¡æ¯å­è½½æ³¢æŠ½å–æ–¹å¼</p>
<ul class="simple">
<li><p>0ï¼š é€ä¸ªå­è½½æ³¢æ•°æ®è·å–</p></li>
<li><p>1ï¼š æ¯ä¸¤ä¸ªå­è½½æ³¢æŠ½å–ä¸€ç»„æ•°æ®</p></li>
<li><p>2ï¼š æ¯å››ä¸ªå­è½½æ³¢æŠ½å–ä¸€ç»„æ•°æ®</p></li>
<li><p>3ï¼š æ¯åå…­ä¸ªå­è½½æ³¢æŠ½å–ä¸€ç»„æ•°æ®</p></li>
</ul>
</td>
</tr>
<tr class="row-odd"><td><p>accuracy</p></td>
<td><p>unsigned char</p></td>
<td><p>æŒ‡å®š CSI åŸå§‹æ•°æ® ï¼ˆCH I/Qï¼‰ ç²¾åº¦</p>
<ul class="simple">
<li><p>0ï¼š S(8,4) â†’ æœ‰ç¬¦å·æ•°ï¼Œ8 ä½æ€»é•¿ï¼ˆ4 ä½å°æ•°ï¼‰</p></li>
<li><p>1ï¼š S(16,12) â†’ æœ‰ç¬¦å·æ•°ï¼Œ16 ä½æ€»é•¿ï¼ˆ12 ä½å°æ•°ï¼‰</p></li>
</ul>
</td>
</tr>
<tr class="row-even"><td><p>alg_opt</p></td>
<td><p>unsigned char</p></td>
<td><p>ä¿ç•™</p></td>
</tr>
<tr class="row-odd"><td><p>ch_opt</p></td>
<td><p>unsigned char</p></td>
<td><p>é…ç½® CSI æ¥æºäºè§£ç ä¼ ç»Ÿè®­ç»ƒåºåˆ—éƒ¨åˆ†è¿˜æ˜¯éä¼ ç»Ÿçš„è®­ç»ƒåºåˆ—éƒ¨åˆ†</p></td>
</tr>
<tr class="row-even"><td><p>csi_role</p></td>
<td><p>unsigned char</p></td>
<td><p>æŒ‡å®šä½¿èƒ½ Wi-Fi CSI çš„è®¾å¤‡æ‰®æ¼”çš„è§’è‰²</p></td>
</tr>
<tr class="row-odd"><td><p>mode</p></td>
<td><p>unsigned char</p></td>
<td><p>æŒ‡å®šè·å– Wi-Fi CSI çš„æ¨¡å¼</p>
<ul class="simple">
<li><p>0ï¼š Rx Normal Mode ï¼ˆé€šè¿‡è§£ç å½“å‰æ”¶åˆ°çš„æŠ¥æ–‡ä»¥è·å– CSIï¼‰</p></li>
<li><p>2ï¼š Rx Response Mode ï¼ˆé€šè¿‡è§£ç ä¸Šä¸€ CSI è§¦å‘å¸§çš„ ACK æŠ¥æ–‡ä»¥è·å– CSIï¼‰</p></li>
<li><p>å…¶ä»–ï¼šä¿ç•™</p></li>
</ul>
</td>
</tr>
<tr class="row-even"><td><p>act</p></td>
<td><p>unsigned char</p></td>
<td><p>ç”¨ä»¥åŒºåˆ† Wi-Fi CSI å‚æ•°é…ç½®å’Œå¯ç”¨/åœç”¨ W-Fi CSI åŠŸèƒ½</p></td>
</tr>
<tr class="row-odd"><td><p>trig_frame_mgnt</p></td>
<td><p>unsigned short</p></td>
<td><p>æŒ‡å®š CSI è§¦å‘å¸§çš„ç®¡ç†å¸§ç±»å‹ ï¼ˆç”¨äº Rx Normal Modeï¼ŒRx Response Mode ä¸‹æ— æ•ˆï¼‰</p></td>
</tr>
<tr class="row-even"><td><p>trig_frame_ctrl</p></td>
<td><p>unsigned short</p></td>
<td><p>æŒ‡å®š CSI è§¦å‘å¸§çš„æ§åˆ¶å¸§ç±»å‹ ï¼ˆç”¨äº Rx Normal Modeï¼ŒRx Response Mode ä¸‹æ— æ•ˆï¼‰</p></td>
</tr>
<tr class="row-odd"><td><p>trig_frame_data</p></td>
<td><p>unsigned short</p></td>
<td><p>æŒ‡å®š CSI è§¦å‘å¸§çš„æ•°æ®å¸§ç±»å‹ ï¼ˆç”¨äº Rx Normal Modeï¼ŒRx Response Mode ä¸‹æ— æ•ˆï¼‰</p></td>
</tr>
<tr class="row-even"><td><p>enable</p></td>
<td><p>unsigned char</p></td>
<td><ul class="simple">
<li><p>0ï¼š åœç”¨ Wi-Fi CSI åŠŸèƒ½</p></li>
<li><p>1ï¼š å¯ç”¨ Wi-Fi CSI åŠŸèƒ½</p></li>
</ul>
</td>
</tr>
<tr class="row-odd"><td><p>trig_period</p></td>
<td><p>unsigned char</p></td>
<td><p>Wi-Fi CSI ä¾¦æµ‹é¢‘ç‡ï¼Œå•ä½ï¼š 320us ï¼ˆå»ºè®®å€¼ï¼š 15~255ï¼‰</p></td>
</tr>
<tr class="row-even"><td><p>data_rate</p></td>
<td><p>unsigned char</p></td>
<td><p>æŒ‡å®š CSI è§¦å‘å¸§çš„ä¼ è¾“é€Ÿç‡ï¼Œä½†åœ¨ Rx Response Mode ä¸­æ— æ•ˆï¼Œå› ä¸º Wi-Fi CSI å–å†³äº ACK å“åº”å¸§çš„é€Ÿç‡</p>
<ul class="simple">
<li><p>ä»…æ”¯æŒ OFDM/HT/HE é€Ÿç‡</p></li>
</ul>
</td>
</tr>
<tr class="row-odd"><td><p>data_bw</p></td>
<td><p>unsigned char</p></td>
<td><p>æŒ‡å®š CSI è§¦å‘å¸§çš„å¸¦å®½ï¼Œä»…æ”¯æŒ 20MHz</p>
<ul class="simple">
<li><p>0ï¼š 20MHz</p></li>
<li><p>å…¶ä»–ï¼šä¿ç•™</p></li>
</ul>
</td>
</tr>
<tr class="row-even"><td><p>mac_addr[6]</p></td>
<td><p>unsigned char</p></td>
<td><p>æŒ‡å®š CSI è§¦å‘å¸§çš„ç›®çš„åœ°å€</p>
<ul class="simple">
<li><p>å¦‚æœ <code class="docutils literal notranslate"><span class="pre">multi_type</span></code> ç­‰äº 1ï¼Œ åˆ™ <code class="docutils literal notranslate"><span class="pre">mac_addr</span></code> ä¿ç•™ã€‚</p></li>
</ul>
</td>
</tr>
<tr class="row-odd"><td><p>multi_type</p></td>
<td><p>unsigned char</p></td>
<td><p>æŒ‡å®š CSI è§¦å‘å¸§æ˜¯å•æ’­è¿˜æ˜¯å¹¿æ’­ï¼Œä»…åœ¨ Active CSI ä¸­æœ‰æ•ˆ</p>
<ul class="simple">
<li><p>0ï¼š å•æ’­ ï¼ˆä½¿ç”¨å•æ’­å¸§ä¸”é€šè¿‡è§£ç å•æ’­å¸§çš„ ACK æŠ¥æ–‡ä»¥è·å– CSIï¼‰</p></li>
<li><p>1ï¼š å¹¿æ’­ ï¼ˆä½¿ç”¨å¹¿æ’­å¸§ä¸”å¦ä¸€æ–¹é€šè¿‡è§£ç è¯¥å¹¿æ’­å¸§ä»¥è·å– CSI ï¼‰</p></li>
</ul>
</td>
</tr>
<tr class="row-even"><td><p>trig_flag</p></td>
<td><p>unsigned char</p></td>
<td><p>æ–¹æ³•å››ä¸­ä½œä¸ºä¼ è¾“ CSI è§¦å‘å¸§è§’è‰²çš„æ ‡è¯†ç¬¦ï¼Œæ–¹æ³•ä¸€è¡ç”Ÿç‰ˆä¸­ä½œä¸ºä¼ è¾“ ACK å“åº”å¸§è§’è‰²çš„æ ‡è¯†ç¬¦ï¼Œå…¶ä»–ä¿ç•™</p>
<ul class="simple">
<li><p>å–å€¼èŒƒå›´ï¼š1 ~ 15 ï¼ˆ0 ä¿ç•™ï¼‰</p></li>
</ul>
</td>
</tr>
</tbody>
</table>
</div><div aria-labelledby="tab-0-0-2" class="sphinx-tabs-panel" hidden="true" id="panel-0-0-2" name="0-2" role="tabpanel" tabindex="0"><table class="docutils align-default" style="width: 100%">
<thead>
<tr class="row-odd"><th class="head"><p>å‚æ•°å</p></th>
<th class="head"><p>ç±»å‹</p></th>
<th class="head"><p>æè¿°</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>group_num</p></td>
<td><p>unsigned char</p></td>
<td><p>æŒ‡å®š CSI ä¿¡æ¯å­è½½æ³¢æŠ½å–æ–¹å¼</p>
<ul class="simple">
<li><p>0ï¼š é€ä¸ªå­è½½æ³¢æ•°æ®è·å–</p></li>
<li><p>1ï¼š æ¯ä¸¤ä¸ªå­è½½æ³¢æŠ½å–ä¸€ç»„æ•°æ®</p></li>
<li><p>2ï¼š æ¯å››ä¸ªå­è½½æ³¢æŠ½å–ä¸€ç»„æ•°æ®</p></li>
<li><p>3ï¼š æ¯åå…­ä¸ªå­è½½æ³¢æŠ½å–ä¸€ç»„æ•°æ®</p></li>
</ul>
</td>
</tr>
<tr class="row-odd"><td><p>accuracy</p></td>
<td><p>unsigned char</p></td>
<td><p>æŒ‡å®š CSI åŸå§‹æ•°æ® ï¼ˆCH I/Qï¼‰ ç²¾åº¦</p>
<ul class="simple">
<li><p>0ï¼š S(8,4) â†’ æœ‰ç¬¦å·æ•°ï¼Œ8 ä½æ€»é•¿ï¼ˆ4 ä½å°æ•°ï¼‰</p></li>
<li><p>1ï¼š S(16,12) â†’ æœ‰ç¬¦å·æ•°ï¼Œ16 ä½æ€»é•¿ï¼ˆ12 ä½å°æ•°ï¼‰</p></li>
</ul>
</td>
</tr>
<tr class="row-even"><td><p>alg_opt</p></td>
<td><p>unsigned char</p></td>
<td><p>ä¿ç•™</p></td>
</tr>
<tr class="row-odd"><td><p>ch_opt</p></td>
<td><p>unsigned char</p></td>
<td><p>é…ç½® CSI æ¥æºäºè§£ç ä¼ ç»Ÿè®­ç»ƒåºåˆ—éƒ¨åˆ†è¿˜æ˜¯éä¼ ç»Ÿçš„è®­ç»ƒåºåˆ—éƒ¨åˆ†</p></td>
</tr>
<tr class="row-even"><td><p>csi_role</p></td>
<td><p>unsigned char</p></td>
<td><p>æŒ‡å®šä½¿èƒ½ Wi-Fi CSI çš„è®¾å¤‡æ‰®æ¼”çš„è§’è‰²</p></td>
</tr>
<tr class="row-odd"><td><p>mode</p></td>
<td><p>unsigned char</p></td>
<td><p>æŒ‡å®šè·å– Wi-Fi CSI çš„æ¨¡å¼</p>
<ul class="simple">
<li><p>0ï¼š Rx Normal Mode ï¼ˆé€šè¿‡è§£ç å½“å‰æ”¶åˆ°çš„æŠ¥æ–‡ä»¥è·å– CSIï¼‰</p></li>
<li><p>2ï¼š Rx Response Mode ï¼ˆé€šè¿‡è§£ç ä¸Šä¸€ CSI è§¦å‘å¸§çš„ ACK æŠ¥æ–‡ä»¥è·å– CSIï¼‰</p></li>
<li><p>å…¶ä»–ï¼šä¿ç•™</p></li>
</ul>
</td>
</tr>
<tr class="row-even"><td><p>act</p></td>
<td><p>unsigned char</p></td>
<td><p>ç”¨ä»¥åŒºåˆ† Wi-Fi CSI å‚æ•°é…ç½®å’Œå¯ç”¨/åœç”¨ W-Fi CSI åŠŸèƒ½</p></td>
</tr>
<tr class="row-odd"><td><p>trig_frame_mgnt</p></td>
<td><p>unsigned short</p></td>
<td><p>æŒ‡å®š CSI è§¦å‘å¸§çš„ç®¡ç†å¸§ç±»å‹ ï¼ˆç”¨äº Rx Normal Modeï¼ŒRx Response Mode ä¸‹æ— æ•ˆï¼‰</p></td>
</tr>
<tr class="row-even"><td><p>trig_frame_ctrl</p></td>
<td><p>unsigned short</p></td>
<td><p>æŒ‡å®š CSI è§¦å‘å¸§çš„æ§åˆ¶å¸§ç±»å‹ ï¼ˆç”¨äº Rx Normal Modeï¼ŒRx Response Mode ä¸‹æ— æ•ˆï¼‰</p></td>
</tr>
<tr class="row-odd"><td><p>trig_frame_data</p></td>
<td><p>unsigned short</p></td>
<td><p>æŒ‡å®š CSI è§¦å‘å¸§çš„æ•°æ®å¸§ç±»å‹ ï¼ˆç”¨äº Rx Normal Modeï¼ŒRx Response Mode ä¸‹æ— æ•ˆï¼‰</p></td>
</tr>
<tr class="row-even"><td><p>enable</p></td>
<td><p>unsigned char</p></td>
<td><ul class="simple">
<li><p>0ï¼š åœç”¨ Wi-Fi CSI åŠŸèƒ½</p></li>
<li><p>1ï¼š å¯ç”¨ Wi-Fi CSI åŠŸèƒ½</p></li>
</ul>
</td>
</tr>
<tr class="row-odd"><td><p>trig_period</p></td>
<td><p>unsigned char</p></td>
<td><p>Wi-Fi CSI ä¾¦æµ‹é¢‘ç‡ï¼Œå•ä½ï¼š 320us ï¼ˆå»ºè®®å€¼ï¼š 15~255ï¼‰</p></td>
</tr>
<tr class="row-even"><td><p>data_rate</p></td>
<td><p>unsigned char</p></td>
<td><p>æŒ‡å®š CSI è§¦å‘å¸§çš„ä¼ è¾“é€Ÿç‡ï¼Œä½†åœ¨ Rx Response Mode ä¸­æ— æ•ˆï¼Œå› ä¸º Wi-Fi CSI å–å†³äº ACK å“åº”å¸§çš„é€Ÿç‡</p>
<ul class="simple">
<li><p>ä»…æ”¯æŒ OFDM/HT/HE é€Ÿç‡</p></li>
</ul>
</td>
</tr>
<tr class="row-odd"><td><p>data_bw</p></td>
<td><p>unsigned char</p></td>
<td><p>æŒ‡å®š CSI è§¦å‘å¸§çš„å¸¦å®½ï¼Œä»…æ”¯æŒ 20MHz</p>
<ul class="simple">
<li><p>0ï¼š 20MHz</p></li>
<li><p>å…¶ä»–ï¼šä¿ç•™</p></li>
</ul>
</td>
</tr>
<tr class="row-even"><td><p>mac_addr[6]</p></td>
<td><p>unsigned char</p></td>
<td><p>æŒ‡å®š CSI è§¦å‘å¸§çš„ç›®çš„åœ°å€</p>
<ul class="simple">
<li><p>å¦‚æœ <code class="docutils literal notranslate"><span class="pre">multi_type</span></code> ç­‰äº 1ï¼Œ åˆ™ <code class="docutils literal notranslate"><span class="pre">mac_addr</span></code> ä¿ç•™ã€‚</p></li>
</ul>
</td>
</tr>
<tr class="row-odd"><td><p>multi_type</p></td>
<td><p>unsigned char</p></td>
<td><p>æŒ‡å®š CSI è§¦å‘å¸§æ˜¯å•æ’­è¿˜æ˜¯å¹¿æ’­ï¼Œä»…åœ¨ Active CSI ä¸­æœ‰æ•ˆ</p>
<ul class="simple">
<li><p>0ï¼š å•æ’­ ï¼ˆä½¿ç”¨å•æ’­å¸§ä¸”é€šè¿‡è§£ç å•æ’­å¸§çš„ ACK æŠ¥æ–‡ä»¥è·å– CSIï¼‰</p></li>
<li><p>1ï¼š å¹¿æ’­ ï¼ˆä½¿ç”¨å¹¿æ’­å¸§ä¸”å¦ä¸€æ–¹é€šè¿‡è§£ç è¯¥å¹¿æ’­å¸§ä»¥è·å– CSI ï¼‰</p></li>
</ul>
</td>
</tr>
<tr class="row-even"><td><p>trig_flag</p></td>
<td><p>unsigned char</p></td>
<td><p>æ–¹æ³•å››ä¸­ä½œä¸ºä¼ è¾“ CSI è§¦å‘å¸§è§’è‰²çš„æ ‡è¯†ç¬¦ï¼Œæ–¹æ³•ä¸€è¡ç”Ÿç‰ˆä¸­ä½œä¸ºä¼ è¾“ ACK å“åº”å¸§è§’è‰²çš„æ ‡è¯†ç¬¦ï¼Œå…¶ä»–ä¿ç•™</p>
<ul class="simple">
<li><p>å–å€¼èŒƒå›´ï¼š1 ~ 15 ï¼ˆ0 ä¿ç•™ï¼‰</p></li>
</ul>
</td>
</tr>
</tbody>
</table>
</div><div aria-labelledby="tab-0-0-3" class="sphinx-tabs-panel" hidden="true" id="panel-0-0-3" name="0-3" role="tabpanel" tabindex="0"><table class="docutils align-default" style="width: 100%">
<thead>
<tr class="row-odd"><th class="head"><p>å‚æ•°å</p></th>
<th class="head"><p>ç±»å‹</p></th>
<th class="head"><p>æè¿°</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>group_num</p></td>
<td><p>unsigned char</p></td>
<td><p>æŒ‡å®š CSI ä¿¡æ¯å­è½½æ³¢æŠ½å–æ–¹å¼</p>
<ul class="simple">
<li><p>0ï¼š é€ä¸ªå­è½½æ³¢æ•°æ®è·å–</p></li>
<li><p>1ï¼š æ¯ä¸¤ä¸ªå­è½½æ³¢æŠ½å–ä¸€ç»„æ•°æ®</p></li>
<li><p>2ï¼š æ¯å››ä¸ªå­è½½æ³¢æŠ½å–ä¸€ç»„æ•°æ®</p></li>
<li><p>3ï¼š æ¯åå…­ä¸ªå­è½½æ³¢æŠ½å–ä¸€ç»„æ•°æ®</p></li>
</ul>
</td>
</tr>
<tr class="row-odd"><td><p>accuracy</p></td>
<td><p>unsigned char</p></td>
<td><p>æŒ‡å®š CSI åŸå§‹æ•°æ® ï¼ˆCH I/Qï¼‰ ç²¾åº¦</p>
<ul class="simple">
<li><p>0ï¼š S(8,4) â†’ æœ‰ç¬¦å·æ•°ï¼Œ8 ä½æ€»é•¿ï¼ˆ4 ä½å°æ•°ï¼‰</p></li>
<li><p>1ï¼š S(16,12) â†’ æœ‰ç¬¦å·æ•°ï¼Œ16 ä½æ€»é•¿ï¼ˆ12 ä½å°æ•°ï¼‰</p></li>
</ul>
</td>
</tr>
<tr class="row-even"><td><p>alg_opt</p></td>
<td><p>unsigned char</p></td>
<td><p>ä¿ç•™</p></td>
</tr>
<tr class="row-odd"><td><p>ch_opt</p></td>
<td><p>unsigned char</p></td>
<td><p>é…ç½® CSI æ¥æºäºè§£ç ä¼ ç»Ÿè®­ç»ƒåºåˆ—éƒ¨åˆ†è¿˜æ˜¯éä¼ ç»Ÿçš„è®­ç»ƒåºåˆ—éƒ¨åˆ†</p></td>
</tr>
<tr class="row-even"><td><p>csi_role</p></td>
<td><p>unsigned char</p></td>
<td><p>æŒ‡å®šä½¿èƒ½ Wi-Fi CSI çš„è®¾å¤‡æ‰®æ¼”çš„è§’è‰²</p></td>
</tr>
<tr class="row-odd"><td><p>mode</p></td>
<td><p>unsigned char</p></td>
<td><p>æŒ‡å®šè·å– Wi-Fi CSI çš„æ¨¡å¼</p>
<ul class="simple">
<li><p>0ï¼š Rx Normal Mode ï¼ˆé€šè¿‡è§£ç å½“å‰æ”¶åˆ°çš„æŠ¥æ–‡ä»¥è·å– CSIï¼‰</p></li>
<li><p>2ï¼š Rx Response Mode ï¼ˆé€šè¿‡è§£ç ä¸Šä¸€ CSI è§¦å‘å¸§çš„ ACK æŠ¥æ–‡ä»¥è·å– CSIï¼‰</p></li>
<li><p>å…¶ä»–ï¼šä¿ç•™</p></li>
</ul>
</td>
</tr>
<tr class="row-even"><td><p>act</p></td>
<td><p>unsigned char</p></td>
<td><p>ç”¨ä»¥åŒºåˆ† Wi-Fi CSI å‚æ•°é…ç½®å’Œå¯ç”¨/åœç”¨ W-Fi CSI åŠŸèƒ½</p></td>
</tr>
<tr class="row-odd"><td><p>trig_frame_mgnt</p></td>
<td><p>unsigned short</p></td>
<td><p>æŒ‡å®š CSI è§¦å‘å¸§çš„ç®¡ç†å¸§ç±»å‹ ï¼ˆç”¨äº Rx Normal Modeï¼ŒRx Response Mode ä¸‹æ— æ•ˆï¼‰</p></td>
</tr>
<tr class="row-even"><td><p>trig_frame_ctrl</p></td>
<td><p>unsigned short</p></td>
<td><p>æŒ‡å®š CSI è§¦å‘å¸§çš„æ§åˆ¶å¸§ç±»å‹ ï¼ˆç”¨äº Rx Normal Modeï¼ŒRx Response Mode ä¸‹æ— æ•ˆï¼‰</p></td>
</tr>
<tr class="row-odd"><td><p>trig_frame_data</p></td>
<td><p>unsigned short</p></td>
<td><p>æŒ‡å®š CSI è§¦å‘å¸§çš„æ•°æ®å¸§ç±»å‹ ï¼ˆç”¨äº Rx Normal Modeï¼ŒRx Response Mode ä¸‹æ— æ•ˆï¼‰</p></td>
</tr>
<tr class="row-even"><td><p>enable</p></td>
<td><p>unsigned char</p></td>
<td><ul class="simple">
<li><p>0ï¼š åœç”¨ Wi-Fi CSI åŠŸèƒ½</p></li>
<li><p>1ï¼š å¯ç”¨ Wi-Fi CSI åŠŸèƒ½</p></li>
</ul>
</td>
</tr>
<tr class="row-odd"><td><p>trig_period</p></td>
<td><p>unsigned char</p></td>
<td><p>Wi-Fi CSI ä¾¦æµ‹é¢‘ç‡ï¼Œå•ä½ï¼š 320us ï¼ˆå»ºè®®å€¼ï¼š 15~255ï¼‰</p></td>
</tr>
<tr class="row-even"><td><p>data_rate</p></td>
<td><p>unsigned char</p></td>
<td><p>æŒ‡å®š CSI è§¦å‘å¸§çš„ä¼ è¾“é€Ÿç‡ï¼Œä½†åœ¨ Rx Response Mode ä¸­æ— æ•ˆï¼Œå› ä¸º Wi-Fi CSI å–å†³äº ACK å“åº”å¸§çš„é€Ÿç‡</p>
<ul class="simple">
<li><p>æ”¯æŒ OFDM/HT/VHT/HE é€Ÿç‡</p></li>
</ul>
</td>
</tr>
<tr class="row-odd"><td><p>data_bw</p></td>
<td><p>unsigned char</p></td>
<td><p>æŒ‡å®š CSI è§¦å‘å¸§çš„å¸¦å®½ï¼Œä»…æ”¯æŒ 20MHz</p>
<ul class="simple">
<li><p>0ï¼š 20MHz</p></li>
<li><p>å…¶ä»–ï¼šä¿ç•™</p></li>
</ul>
</td>
</tr>
<tr class="row-even"><td><p>mac_addr[6]</p></td>
<td><p>unsigned char</p></td>
<td><p>æŒ‡å®š CSI è§¦å‘å¸§çš„ç›®çš„åœ°å€</p>
<ul class="simple">
<li><p>å¦‚æœ <code class="docutils literal notranslate"><span class="pre">multi_type</span></code> ç­‰äº 1ï¼Œ åˆ™ <code class="docutils literal notranslate"><span class="pre">mac_addr</span></code> ä¿ç•™ã€‚</p></li>
</ul>
</td>
</tr>
<tr class="row-odd"><td><p>multi_type</p></td>
<td><p>unsigned char</p></td>
<td><p>æŒ‡å®š CSI è§¦å‘å¸§æ˜¯å•æ’­è¿˜æ˜¯å¹¿æ’­ï¼Œä»…åœ¨ Active CSI ä¸­æœ‰æ•ˆ</p>
<ul class="simple">
<li><p>0ï¼š å•æ’­ ï¼ˆä½¿ç”¨å•æ’­å¸§ä¸”é€šè¿‡è§£ç å•æ’­å¸§çš„ ACK æŠ¥æ–‡ä»¥è·å– CSIï¼‰</p></li>
<li><p>1ï¼š å¹¿æ’­ ï¼ˆä½¿ç”¨å¹¿æ’­å¸§ä¸”å¦ä¸€æ–¹é€šè¿‡è§£ç è¯¥å¹¿æ’­å¸§ä»¥è·å– CSI ï¼‰</p></li>
</ul>
</td>
</tr>
<tr class="row-even"><td><p>trig_flag</p></td>
<td><p>unsigned char</p></td>
<td><p>æ–¹æ³•å››ä¸­ä½œä¸ºä¼ è¾“ CSI è§¦å‘å¸§è§’è‰²çš„æ ‡è¯†ç¬¦ï¼Œæ–¹æ³•ä¸€è¡ç”Ÿç‰ˆä¸­ä½œä¸ºä¼ è¾“ ACK å“åº”å¸§è§’è‰²çš„æ ‡è¯†ç¬¦ï¼Œå…¶ä»–ä¿ç•™</p>
<ul class="simple">
<li><p>å–å€¼èŒƒå›´ï¼š1 ~ 15 ï¼ˆ0 ä¿ç•™ï¼‰</p></li>
</ul>
</td>
</tr>
</tbody>
</table>
</div></div>
</section>
<section id="id4">
<h3>å‚æ•°å–å€¼<a class="headerlink" href="#id4" title="Link to this heading">ïƒ</a></h3>
<ul>
<li><p><code class="docutils literal notranslate"><span class="pre">group_num</span></code> å–å€¼å¦‚ä¸‹ï¼š</p>
<div class="highlight-c notranslate"><div class="highlight"><pre><span></span><span class="cm">/**</span>
<span class="cm">* @brief csi group num.</span>
<span class="cm">*/</span>
<span class="k">enum</span><span class="w"> </span><span class="p">{</span>
<span class="w">   </span><span class="n">CSI_GROUP_NUM_1</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">0</span><span class="p">,</span><span class="w">  </span><span class="cm">/**&lt; per tone */</span>
<span class="w">   </span><span class="n">CSI_GROUP_NUM_2</span><span class="p">,</span><span class="w">      </span><span class="cm">/**&lt; per 2tone */</span>
<span class="w">   </span><span class="n">CSI_GROUP_NUM_4</span><span class="p">,</span><span class="w">      </span><span class="cm">/**&lt; per 4tone */</span>
<span class="w">   </span><span class="n">CSI_GROUP_NUM_8_16</span><span class="p">,</span><span class="w">   </span><span class="cm">/**&lt; per 8tone for dplus; per 16tone for others */</span>
<span class="w">   </span><span class="n">CSI_GROUP_NUM_MAX</span>
<span class="p">};</span>
</pre></div>
</div>
</li>
<li><p><code class="docutils literal notranslate"><span class="pre">accuracy</span></code> å–å€¼å¦‚ä¸‹ï¼š</p>
<div class="highlight-c notranslate"><div class="highlight"><pre><span></span><span class="cm">/**</span>
<span class="cm">* @brief csi accuracy.</span>
<span class="cm">*/</span>
<span class="k">enum</span><span class="w"> </span><span class="p">{</span>
<span class="w">   </span><span class="n">CSI_ACCU_1BYTE</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">0</span><span class="p">,</span><span class="w">   </span><span class="cm">/**&lt; CSI_ACCU_1BYTE: S(8,3) for dplus and S(8,4) for others */</span>
<span class="w">   </span><span class="n">CSI_ACCU_2BYTES</span><span class="p">,</span><span class="w">      </span><span class="cm">/**&lt; CSI_ACCU_2BYTE: S(16,11) for dplus and S(16,12) for others */</span>
<span class="w">   </span><span class="n">CSI_ACCU_MAX</span>
<span class="p">};</span>
</pre></div>
</div>
</li>
<li><p><code class="docutils literal notranslate"><span class="pre">ch_opt</span></code> å–å€¼å¦‚ä¸‹ï¼š</p>
<div class="highlight-c notranslate"><div class="highlight"><pre><span></span><span class="cm">/**</span>
<span class="cm">* @brief csi ch_opt.</span>
<span class="cm">*/</span>
<span class="k">enum</span><span class="w"> </span><span class="p">{</span>
<span class="w">   </span><span class="n">CSI_CH_LEGACY</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">0</span><span class="p">,</span><span class="w">    </span><span class="cm">/**&lt; legacy part(L-LTF) channel estmation result */</span>
<span class="w">   </span><span class="n">CSI_CH_NON_LEGACY</span><span class="p">,</span><span class="w">    </span><span class="cm">/**&lt; non-legacy(HT-LTF) part */</span>
<span class="w">   </span><span class="n">CSI_CH_MAX</span>
<span class="p">};</span>
</pre></div>
</div>
</li>
<li><p><code class="docutils literal notranslate"><span class="pre">csi_role</span></code> å–å€¼å¦‚ä¸‹ï¼š</p>
<div class="highlight-c notranslate"><div class="highlight"><pre><span></span><span class="cm">/**</span>
<span class="cm">* @brief csi csi_role.</span>
<span class="cm">*/</span>
<span class="k">enum</span><span class="w"> </span><span class="p">{</span>
<span class="w">   </span><span class="n">CSI_OP_ROLE_TRX</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">0</span><span class="p">,</span><span class="w">  </span><span class="cm">/**&lt; both trx */</span>
<span class="w">   </span><span class="n">CSI_OP_ROLE_TX</span><span class="w">  </span><span class="o">=</span><span class="w"> </span><span class="mi">1</span><span class="p">,</span><span class="w">  </span><span class="cm">/**&lt; only tx csi triggering frame */</span>
<span class="w">   </span><span class="n">CSI_OP_ROLE_RX</span><span class="w">  </span><span class="o">=</span><span class="w"> </span><span class="mi">2</span><span class="p">,</span><span class="w">  </span><span class="cm">/**&lt; only rx csi triggering frame for fetching csi report */</span>
<span class="w">   </span><span class="n">CSI_OP_ROLE_MAX</span>
<span class="p">};</span>
</pre></div>
</div>
</li>
<li><p><code class="docutils literal notranslate"><span class="pre">mode</span></code> å–å€¼å¦‚ä¸‹ï¼š</p>
<div class="highlight-c notranslate"><div class="highlight"><pre><span></span><span class="cm">/**</span>
<span class="cm">* @brief csi mode.</span>
<span class="cm">*/</span>
<span class="k">enum</span><span class="w"> </span><span class="p">{</span>
<span class="w">   </span><span class="n">CSI_MODE_NORMAL</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">0</span><span class="p">,</span><span class="w">  </span><span class="cm">/**&lt; rx normal mode */</span>
<span class="w">   </span><span class="n">CSI_MODE_NDP</span><span class="p">,</span><span class="w">         </span><span class="cm">/**&lt; rx ndp mode: not support */</span>
<span class="w">   </span><span class="n">CSI_MODE_RX_RESP</span><span class="p">,</span><span class="w">     </span><span class="cm">/**&lt; rx response mode */</span>
<span class="w">   </span><span class="n">CSI_MODE_MAX</span><span class="p">,</span>
<span class="p">};</span>
</pre></div>
</div>
</li>
<li><p><code class="docutils literal notranslate"><span class="pre">act</span></code> å–å€¼å¦‚ä¸‹ï¼š</p>
<div class="highlight-c notranslate"><div class="highlight"><pre><span></span><span class="cm">/**</span>
<span class="cm">* @brief csi enable or config.</span>
<span class="cm">*/</span>
<span class="k">enum</span><span class="w"> </span><span class="p">{</span>
<span class="w">   </span><span class="n">CSI_ACT_EN</span><span class="p">,</span><span class="w">           </span><span class="cm">/**&lt; enable or disable csi func */</span>
<span class="w">   </span><span class="n">CSI_ACT_CFG</span><span class="p">,</span><span class="w">          </span><span class="cm">/**&lt; config csi parameters */</span>
<span class="w">   </span><span class="n">CSI_ACT_MAX</span>
<span class="p">};</span>
</pre></div>
</div>
</li>
<li><p><code class="docutils literal notranslate"><span class="pre">trig_frame_mgnt</span></code> å–å€¼å¦‚ä¸‹ï¼š</p>
<div class="highlight-c notranslate"><div class="highlight"><pre><span></span><span class="cm">/**</span>
<span class="cm">* @brief csi trig management frame subtype.</span>
<span class="cm">*/</span>
<span class="k">enum</span><span class="w"> </span><span class="p">{</span>
<span class="w">   </span><span class="n">CSI_TRIG_ASSOCREQ</span><span class="w">   </span><span class="o">=</span><span class="w"> </span><span class="n">BIT</span><span class="p">(</span><span class="mi">0</span><span class="p">),</span>
<span class="w">   </span><span class="n">CSI_TRIG_ASSOCRSP</span><span class="w">   </span><span class="o">=</span><span class="w"> </span><span class="n">BIT</span><span class="p">(</span><span class="mi">1</span><span class="p">),</span>
<span class="w">   </span><span class="n">CSI_TRIG_REASSOCREQ</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">BIT</span><span class="p">(</span><span class="mi">2</span><span class="p">),</span>
<span class="w">   </span><span class="n">CSI_TRIG_REASSOCRSP</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">BIT</span><span class="p">(</span><span class="mi">3</span><span class="p">),</span>
<span class="w">   </span><span class="n">CSI_TRIG_PROBEREQ</span><span class="w">   </span><span class="o">=</span><span class="w"> </span><span class="n">BIT</span><span class="p">(</span><span class="mi">4</span><span class="p">),</span>
<span class="w">   </span><span class="n">CSI_TRIG_PROBERSP</span><span class="w">   </span><span class="o">=</span><span class="w"> </span><span class="n">BIT</span><span class="p">(</span><span class="mi">5</span><span class="p">),</span>
<span class="w">   </span><span class="n">CSI_TRIG_BEACON</span><span class="w">     </span><span class="o">=</span><span class="w"> </span><span class="n">BIT</span><span class="p">(</span><span class="mi">8</span><span class="p">),</span>
<span class="w">   </span><span class="n">CSI_TRIG_ATIM</span><span class="w">       </span><span class="o">=</span><span class="w"> </span><span class="n">BIT</span><span class="p">(</span><span class="mi">9</span><span class="p">),</span>
<span class="w">   </span><span class="n">CSI_TRIG_DISASSOC</span><span class="w">   </span><span class="o">=</span><span class="w"> </span><span class="n">BIT</span><span class="p">(</span><span class="mi">10</span><span class="p">),</span>
<span class="w">   </span><span class="n">CSI_TRIG_AUTH</span><span class="w">       </span><span class="o">=</span><span class="w"> </span><span class="n">BIT</span><span class="p">(</span><span class="mi">11</span><span class="p">),</span>
<span class="w">   </span><span class="n">CSI_TRIG_DEAUTH</span><span class="w">     </span><span class="o">=</span><span class="w"> </span><span class="n">BIT</span><span class="p">(</span><span class="mi">12</span><span class="p">),</span>
<span class="w">   </span><span class="n">CSI_TRIG_ACTION</span><span class="w">     </span><span class="o">=</span><span class="w"> </span><span class="n">BIT</span><span class="p">(</span><span class="mi">13</span><span class="p">)</span>
<span class="p">};</span>
</pre></div>
</div>
</li>
<li><p><code class="docutils literal notranslate"><span class="pre">trig_frame_ctrl</span></code> å–å€¼å¦‚ä¸‹ï¼š</p>
<div class="highlight-c notranslate"><div class="highlight"><pre><span></span><span class="cm">/**</span>
<span class="cm">* @brief csi trig control frame subtype.</span>
<span class="cm">*/</span>
<span class="k">enum</span><span class="w"> </span><span class="p">{</span>
<span class="w">   </span><span class="n">CSI_TRIG_TRIGGER</span><span class="w">     </span><span class="o">=</span><span class="w"> </span><span class="n">BIT</span><span class="p">(</span><span class="mi">2</span><span class="p">),</span>
<span class="w">   </span><span class="n">CSI_TRIG_BA</span><span class="w">          </span><span class="o">=</span><span class="w"> </span><span class="n">BIT</span><span class="p">(</span><span class="mi">9</span><span class="p">),</span>
<span class="w">   </span><span class="n">CSI_TRIG_PSPOLL</span><span class="w">      </span><span class="o">=</span><span class="w"> </span><span class="n">BIT</span><span class="p">(</span><span class="mi">10</span><span class="p">),</span>
<span class="w">   </span><span class="n">CSI_TRIG_RTS</span><span class="w">         </span><span class="o">=</span><span class="w"> </span><span class="n">BIT</span><span class="p">(</span><span class="mi">11</span><span class="p">),</span>
<span class="w">   </span><span class="n">CSI_TRIG_CTS</span><span class="w">         </span><span class="o">=</span><span class="w"> </span><span class="n">BIT</span><span class="p">(</span><span class="mi">12</span><span class="p">),</span>
<span class="w">   </span><span class="n">CSI_TRIG_ACK</span><span class="w">         </span><span class="o">=</span><span class="w"> </span><span class="n">BIT</span><span class="p">(</span><span class="mi">13</span><span class="p">),</span>
<span class="w">   </span><span class="n">CSI_TRIG_CFEND</span><span class="w">       </span><span class="o">=</span><span class="w"> </span><span class="n">BIT</span><span class="p">(</span><span class="mi">14</span><span class="p">),</span>
<span class="w">   </span><span class="n">CSI_TRIG_CFEND_CFACK</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">BIT</span><span class="p">(</span><span class="mi">15</span><span class="p">)</span>
<span class="p">};</span>
</pre></div>
</div>
</li>
<li><p><code class="docutils literal notranslate"><span class="pre">trig_frame_data</span></code> å–å€¼å¦‚ä¸‹ï¼š</p>
<div class="highlight-c notranslate"><div class="highlight"><pre><span></span><span class="cm">/**</span>
<span class="cm">* @brief csi trig data frame subtype.</span>
<span class="cm">*/</span>
<span class="k">enum</span><span class="w"> </span><span class="p">{</span>
<span class="w">   </span><span class="n">CSI_TRIG_DATA</span><span class="w">           </span><span class="o">=</span><span class="w"> </span><span class="n">BIT</span><span class="p">(</span><span class="mi">0</span><span class="p">),</span>
<span class="w">   </span><span class="n">CSI_TRIG_DATA_CFACK</span><span class="w">     </span><span class="o">=</span><span class="w"> </span><span class="n">BIT</span><span class="p">(</span><span class="mi">1</span><span class="p">),</span>
<span class="w">   </span><span class="n">CSI_TRIG_DATA_CFPOLL</span><span class="w">    </span><span class="o">=</span><span class="w"> </span><span class="n">BIT</span><span class="p">(</span><span class="mi">2</span><span class="p">),</span>
<span class="w">   </span><span class="n">CSI_TRIG_DATA_CFACKPOLL</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">BIT</span><span class="p">(</span><span class="mi">3</span><span class="p">),</span>
<span class="w">   </span><span class="n">CSI_TRIG_DATA_NULL</span><span class="w">      </span><span class="o">=</span><span class="w"> </span><span class="n">BIT</span><span class="p">(</span><span class="mi">4</span><span class="p">),</span>
<span class="w">   </span><span class="n">CSI_TRIG_CF_ACK</span><span class="w">         </span><span class="o">=</span><span class="w"> </span><span class="n">BIT</span><span class="p">(</span><span class="mi">5</span><span class="p">),</span>
<span class="w">   </span><span class="n">CSI_TRIG_CF_POLL</span><span class="w">        </span><span class="o">=</span><span class="w"> </span><span class="n">BIT</span><span class="p">(</span><span class="mi">6</span><span class="p">),</span>
<span class="w">   </span><span class="n">CSI_TRIG_CF_ACKPOLL</span><span class="w">     </span><span class="o">=</span><span class="w"> </span><span class="n">BIT</span><span class="p">(</span><span class="mi">7</span><span class="p">),</span>
<span class="w">   </span><span class="n">CSI_TRIG_QOS_DATA</span><span class="w">       </span><span class="o">=</span><span class="w"> </span><span class="n">BIT</span><span class="p">(</span><span class="mi">8</span><span class="p">),</span>
<span class="w">   </span><span class="n">CSI_TRIG_QOS_DATA_NULL</span><span class="w">  </span><span class="o">=</span><span class="w"> </span><span class="n">BIT</span><span class="p">(</span><span class="mi">12</span><span class="p">)</span>
<span class="p">};</span>
</pre></div>
</div>
</li>
<li><p><code class="docutils literal notranslate"><span class="pre">data_rate</span></code> å–å€¼å¦‚ä¸‹ï¼š</p></li>
</ul>
<div class="sphinx-tabs docutils container">
<div aria-label="Tabbed content" class="closeable" role="tablist"><button aria-controls="panel-1-1-0" aria-selected="true" class="sphinx-tabs-tab" id="tab-1-1-0" name="1-0" role="tab" tabindex="0">RTL8721Dx</button><button aria-controls="panel-1-1-1" aria-selected="false" class="sphinx-tabs-tab" id="tab-1-1-1" name="1-1" role="tab" tabindex="-1">RTL8720E</button><button aria-controls="panel-1-1-2" aria-selected="false" class="sphinx-tabs-tab" id="tab-1-1-2" name="1-2" role="tab" tabindex="-1">RTL8726E</button><button aria-controls="panel-1-1-3" aria-selected="false" class="sphinx-tabs-tab" id="tab-1-1-3" name="1-3" role="tab" tabindex="-1">RTL8730E</button></div><div aria-labelledby="tab-1-1-0" class="sphinx-tabs-panel" id="panel-1-1-0" name="1-0" role="tabpanel" tabindex="0"><blockquote>
<div><div class="highlight-c notranslate"><div class="highlight"><pre><span></span><span class="cm">/**</span>
<span class="cm">* @brief The enumeration lists the BIT 7 HT Rate.</span>
<span class="cm">*/</span>
<span class="k">enum</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="n">MGN_1M</span><span class="w">   </span><span class="o">=</span><span class="w"> </span><span class="mh">0x02</span><span class="p">,</span><span class="w">     </span><span class="cm">/**&lt; 0x02 */</span>
<span class="w">    </span><span class="n">MGN_2M</span><span class="w">   </span><span class="o">=</span><span class="w"> </span><span class="mh">0x04</span><span class="p">,</span><span class="w">     </span><span class="cm">/**&lt; 0x04 */</span>
<span class="w">    </span><span class="n">MGN_5_5M</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mh">0x0B</span><span class="p">,</span><span class="w">     </span><span class="cm">/**&lt; 0x0B */</span>
<span class="w">    </span><span class="n">MGN_6M</span><span class="w">   </span><span class="o">=</span><span class="w"> </span><span class="mh">0x0C</span><span class="p">,</span><span class="w">     </span><span class="cm">/**&lt; 0x0C */</span>
<span class="w">    </span><span class="n">MGN_9M</span><span class="w">   </span><span class="o">=</span><span class="w"> </span><span class="mh">0x12</span><span class="p">,</span><span class="w">     </span><span class="cm">/**&lt; 0x12 */</span>
<span class="w">    </span><span class="n">MGN_11M</span><span class="w">  </span><span class="o">=</span><span class="w"> </span><span class="mh">0x16</span><span class="p">,</span><span class="w">     </span><span class="cm">/**&lt; 0x16 */</span>
<span class="w">    </span><span class="n">MGN_12M</span><span class="w">  </span><span class="o">=</span><span class="w"> </span><span class="mh">0x18</span><span class="p">,</span><span class="w">     </span><span class="cm">/**&lt; 0x18 */</span>
<span class="w">    </span><span class="n">MGN_18M</span><span class="w">  </span><span class="o">=</span><span class="w"> </span><span class="mh">0x24</span><span class="p">,</span><span class="w">     </span><span class="cm">/**&lt; 0x24 */</span>
<span class="w">    </span><span class="n">MGN_24M</span><span class="w">  </span><span class="o">=</span><span class="w"> </span><span class="mh">0x30</span><span class="p">,</span><span class="w">     </span><span class="cm">/**&lt; 0x30 */</span>
<span class="w">    </span><span class="n">MGN_36M</span><span class="w">  </span><span class="o">=</span><span class="w"> </span><span class="mh">0x48</span><span class="p">,</span><span class="w">     </span><span class="cm">/**&lt; 0x48 */</span>
<span class="w">    </span><span class="n">MGN_48M</span><span class="w">  </span><span class="o">=</span><span class="w"> </span><span class="mh">0x60</span><span class="p">,</span><span class="w">     </span><span class="cm">/**&lt; 0x60 */</span>
<span class="w">    </span><span class="n">MGN_54M</span><span class="w">  </span><span class="o">=</span><span class="w"> </span><span class="mh">0x6C</span><span class="p">,</span><span class="w">     </span><span class="cm">/**&lt; 0x6C */</span>
<span class="w">    </span><span class="n">MGN_MCS0</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mh">0x80</span><span class="p">,</span><span class="w">     </span><span class="cm">/**&lt; 0x80 */</span>
<span class="w">    </span><span class="n">MGN_MCS1</span><span class="p">,</span><span class="w">            </span><span class="cm">/**&lt; 0x81 */</span>
<span class="w">    </span><span class="n">MGN_MCS2</span><span class="p">,</span><span class="w">            </span><span class="cm">/**&lt; 0x82 */</span>
<span class="w">    </span><span class="n">MGN_MCS3</span><span class="p">,</span><span class="w">            </span><span class="cm">/**&lt; 0x83 */</span>
<span class="w">    </span><span class="n">MGN_MCS4</span><span class="p">,</span><span class="w">            </span><span class="cm">/**&lt; 0x84 */</span>
<span class="w">    </span><span class="n">MGN_MCS5</span><span class="p">,</span><span class="w">            </span><span class="cm">/**&lt; 0x85 */</span>
<span class="w">    </span><span class="n">MGN_MCS6</span><span class="p">,</span>
<span class="w">    </span><span class="n">MGN_MCS7</span><span class="p">,</span>
<span class="w">    </span><span class="n">MGN_UNKNOWN</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mh">0x100</span>
<span class="p">};</span>
</pre></div>
</div>
</div></blockquote>
</div><div aria-labelledby="tab-1-1-1" class="sphinx-tabs-panel" hidden="true" id="panel-1-1-1" name="1-1" role="tabpanel" tabindex="0"><blockquote>
<div><div class="highlight-c notranslate"><div class="highlight"><pre><span></span><span class="cm">/**</span>
<span class="cm">* @brief The enumeration lists the BIT 7 HT Rate.</span>
<span class="cm">*/</span>
<span class="k">enum</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="n">MGN_1M</span><span class="w">         </span><span class="o">=</span><span class="w"> </span><span class="mh">0x02</span><span class="p">,</span><span class="w">    </span><span class="cm">/**&lt; 0x02 */</span>
<span class="w">    </span><span class="n">MGN_2M</span><span class="w">         </span><span class="o">=</span><span class="w"> </span><span class="mh">0x04</span><span class="p">,</span><span class="w">    </span><span class="cm">/**&lt; 0x04 */</span>
<span class="w">    </span><span class="n">MGN_5_5M</span><span class="w">       </span><span class="o">=</span><span class="w"> </span><span class="mh">0x0B</span><span class="p">,</span><span class="w">    </span><span class="cm">/**&lt; 0x0B */</span>
<span class="w">    </span><span class="n">MGN_6M</span><span class="w">         </span><span class="o">=</span><span class="w"> </span><span class="mh">0x0C</span><span class="p">,</span><span class="w">    </span><span class="cm">/**&lt; 0x0C */</span>
<span class="w">    </span><span class="n">MGN_9M</span><span class="w">         </span><span class="o">=</span><span class="w"> </span><span class="mh">0x12</span><span class="p">,</span><span class="w">    </span><span class="cm">/**&lt; 0x12 */</span>
<span class="w">    </span><span class="n">MGN_11M</span><span class="w">        </span><span class="o">=</span><span class="w"> </span><span class="mh">0x16</span><span class="p">,</span><span class="w">    </span><span class="cm">/**&lt; 0x16 */</span>
<span class="w">    </span><span class="n">MGN_12M</span><span class="w">        </span><span class="o">=</span><span class="w"> </span><span class="mh">0x18</span><span class="p">,</span><span class="w">    </span><span class="cm">/**&lt; 0x18 */</span>
<span class="w">    </span><span class="n">MGN_18M</span><span class="w">        </span><span class="o">=</span><span class="w"> </span><span class="mh">0x24</span><span class="p">,</span><span class="w">    </span><span class="cm">/**&lt; 0x24 */</span>
<span class="w">    </span><span class="n">MGN_24M</span><span class="w">        </span><span class="o">=</span><span class="w"> </span><span class="mh">0x30</span><span class="p">,</span><span class="w">    </span><span class="cm">/**&lt; 0x30 */</span>
<span class="w">    </span><span class="n">MGN_36M</span><span class="w">        </span><span class="o">=</span><span class="w"> </span><span class="mh">0x48</span><span class="p">,</span><span class="w">    </span><span class="cm">/**&lt; 0x48 */</span>
<span class="w">    </span><span class="n">MGN_48M</span><span class="w">        </span><span class="o">=</span><span class="w"> </span><span class="mh">0x60</span><span class="p">,</span><span class="w">    </span><span class="cm">/**&lt; 0x60 */</span>
<span class="w">    </span><span class="n">MGN_54M</span><span class="w">        </span><span class="o">=</span><span class="w"> </span><span class="mh">0x6C</span><span class="p">,</span><span class="w">    </span><span class="cm">/**&lt; 0x6C */</span>
<span class="w">    </span><span class="n">MGN_MCS0</span><span class="w">       </span><span class="o">=</span><span class="w"> </span><span class="mh">0x80</span><span class="p">,</span><span class="w">    </span><span class="cm">/**&lt; 0x80 */</span>
<span class="w">    </span><span class="n">MGN_MCS1</span><span class="p">,</span><span class="w">                 </span><span class="cm">/**&lt; 0x81 */</span>
<span class="w">    </span><span class="n">MGN_MCS2</span><span class="p">,</span><span class="w">                 </span><span class="cm">/**&lt; 0x82 */</span>
<span class="w">    </span><span class="n">MGN_MCS3</span><span class="p">,</span><span class="w">                 </span><span class="cm">/**&lt; 0x83 */</span>
<span class="w">    </span><span class="n">MGN_MCS4</span><span class="p">,</span><span class="w">                 </span><span class="cm">/**&lt; 0x84 */</span>
<span class="w">    </span><span class="n">MGN_MCS5</span><span class="p">,</span><span class="w">                 </span><span class="cm">/**&lt; 0x85 */</span>
<span class="w">    </span><span class="n">MGN_MCS6</span><span class="p">,</span>
<span class="w">    </span><span class="n">MGN_MCS7</span><span class="p">,</span>
<span class="w">    </span><span class="n">MGN_HE1SS_MCS0</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mh">0xD0</span><span class="p">,</span><span class="w">    </span><span class="cm">/**&lt; 0xD0 */</span>
<span class="w">    </span><span class="n">MGN_HE1SS_MCS1</span><span class="p">,</span>
<span class="w">    </span><span class="n">MGN_HE1SS_MCS2</span><span class="p">,</span>
<span class="w">    </span><span class="n">MGN_HE1SS_MCS3</span><span class="p">,</span>
<span class="w">    </span><span class="n">MGN_HE1SS_MCS4</span><span class="p">,</span>
<span class="w">    </span><span class="n">MGN_HE1SS_MCS5</span><span class="p">,</span>
<span class="w">    </span><span class="n">MGN_HE1SS_MCS6</span><span class="p">,</span>
<span class="w">    </span><span class="n">MGN_HE1SS_MCS7</span><span class="p">,</span>
<span class="w">    </span><span class="n">MGN_HE1SS_MCS8</span><span class="p">,</span>
<span class="w">    </span><span class="n">MGN_HE1SS_MCS9</span><span class="p">,</span>
<span class="w">    </span><span class="n">MGN_UNKNOWN</span><span class="w">    </span><span class="o">=</span><span class="w"> </span><span class="mh">0x100</span>
<span class="p">};</span>
</pre></div>
</div>
</div></blockquote>
</div><div aria-labelledby="tab-1-1-2" class="sphinx-tabs-panel" hidden="true" id="panel-1-1-2" name="1-2" role="tabpanel" tabindex="0"><blockquote>
<div><div class="highlight-c notranslate"><div class="highlight"><pre><span></span><span class="cm">/**</span>
<span class="cm">* @brief The enumeration lists the BIT 7 HT Rate.</span>
<span class="cm">*/</span>
<span class="k">enum</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="n">MGN_1M</span><span class="w">         </span><span class="o">=</span><span class="w"> </span><span class="mh">0x02</span><span class="p">,</span><span class="w">    </span><span class="cm">/**&lt; 0x02 */</span>
<span class="w">    </span><span class="n">MGN_2M</span><span class="w">         </span><span class="o">=</span><span class="w"> </span><span class="mh">0x04</span><span class="p">,</span><span class="w">    </span><span class="cm">/**&lt; 0x04 */</span>
<span class="w">    </span><span class="n">MGN_5_5M</span><span class="w">       </span><span class="o">=</span><span class="w"> </span><span class="mh">0x0B</span><span class="p">,</span><span class="w">    </span><span class="cm">/**&lt; 0x0B */</span>
<span class="w">    </span><span class="n">MGN_6M</span><span class="w">         </span><span class="o">=</span><span class="w"> </span><span class="mh">0x0C</span><span class="p">,</span><span class="w">    </span><span class="cm">/**&lt; 0x0C */</span>
<span class="w">    </span><span class="n">MGN_9M</span><span class="w">         </span><span class="o">=</span><span class="w"> </span><span class="mh">0x12</span><span class="p">,</span><span class="w">    </span><span class="cm">/**&lt; 0x12 */</span>
<span class="w">    </span><span class="n">MGN_11M</span><span class="w">        </span><span class="o">=</span><span class="w"> </span><span class="mh">0x16</span><span class="p">,</span><span class="w">    </span><span class="cm">/**&lt; 0x16 */</span>
<span class="w">    </span><span class="n">MGN_12M</span><span class="w">        </span><span class="o">=</span><span class="w"> </span><span class="mh">0x18</span><span class="p">,</span><span class="w">    </span><span class="cm">/**&lt; 0x18 */</span>
<span class="w">    </span><span class="n">MGN_18M</span><span class="w">        </span><span class="o">=</span><span class="w"> </span><span class="mh">0x24</span><span class="p">,</span><span class="w">    </span><span class="cm">/**&lt; 0x24 */</span>
<span class="w">    </span><span class="n">MGN_24M</span><span class="w">        </span><span class="o">=</span><span class="w"> </span><span class="mh">0x30</span><span class="p">,</span><span class="w">    </span><span class="cm">/**&lt; 0x30 */</span>
<span class="w">    </span><span class="n">MGN_36M</span><span class="w">        </span><span class="o">=</span><span class="w"> </span><span class="mh">0x48</span><span class="p">,</span><span class="w">    </span><span class="cm">/**&lt; 0x48 */</span>
<span class="w">    </span><span class="n">MGN_48M</span><span class="w">        </span><span class="o">=</span><span class="w"> </span><span class="mh">0x60</span><span class="p">,</span><span class="w">    </span><span class="cm">/**&lt; 0x60 */</span>
<span class="w">    </span><span class="n">MGN_54M</span><span class="w">        </span><span class="o">=</span><span class="w"> </span><span class="mh">0x6C</span><span class="p">,</span><span class="w">    </span><span class="cm">/**&lt; 0x6C */</span>
<span class="w">    </span><span class="n">MGN_MCS0</span><span class="w">       </span><span class="o">=</span><span class="w"> </span><span class="mh">0x80</span><span class="p">,</span><span class="w">    </span><span class="cm">/**&lt; 0x80 */</span>
<span class="w">    </span><span class="n">MGN_MCS1</span><span class="p">,</span><span class="w">                 </span><span class="cm">/**&lt; 0x81 */</span>
<span class="w">    </span><span class="n">MGN_MCS2</span><span class="p">,</span><span class="w">                 </span><span class="cm">/**&lt; 0x82 */</span>
<span class="w">    </span><span class="n">MGN_MCS3</span><span class="p">,</span><span class="w">                 </span><span class="cm">/**&lt; 0x83 */</span>
<span class="w">    </span><span class="n">MGN_MCS4</span><span class="p">,</span><span class="w">                 </span><span class="cm">/**&lt; 0x84 */</span>
<span class="w">    </span><span class="n">MGN_MCS5</span><span class="p">,</span><span class="w">                 </span><span class="cm">/**&lt; 0x85 */</span>
<span class="w">    </span><span class="n">MGN_MCS6</span><span class="p">,</span>
<span class="w">    </span><span class="n">MGN_MCS7</span><span class="p">,</span>
<span class="w">    </span><span class="n">MGN_HE1SS_MCS0</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mh">0xD0</span><span class="p">,</span><span class="w">    </span><span class="cm">/**&lt; 0xD0 */</span>
<span class="w">    </span><span class="n">MGN_HE1SS_MCS1</span><span class="p">,</span>
<span class="w">    </span><span class="n">MGN_HE1SS_MCS2</span><span class="p">,</span>
<span class="w">    </span><span class="n">MGN_HE1SS_MCS3</span><span class="p">,</span>
<span class="w">    </span><span class="n">MGN_HE1SS_MCS4</span><span class="p">,</span>
<span class="w">    </span><span class="n">MGN_HE1SS_MCS5</span><span class="p">,</span>
<span class="w">    </span><span class="n">MGN_HE1SS_MCS6</span><span class="p">,</span>
<span class="w">    </span><span class="n">MGN_HE1SS_MCS7</span><span class="p">,</span>
<span class="w">    </span><span class="n">MGN_HE1SS_MCS8</span><span class="p">,</span>
<span class="w">    </span><span class="n">MGN_HE1SS_MCS9</span><span class="p">,</span>
<span class="w">    </span><span class="n">MGN_UNKNOWN</span><span class="w">    </span><span class="o">=</span><span class="w"> </span><span class="mh">0x100</span>
<span class="p">};</span>
</pre></div>
</div>
</div></blockquote>
</div><div aria-labelledby="tab-1-1-3" class="sphinx-tabs-panel" hidden="true" id="panel-1-1-3" name="1-3" role="tabpanel" tabindex="0"><blockquote>
<div><div class="highlight-c notranslate"><div class="highlight"><pre><span></span><span class="cm">/**</span>
<span class="cm">* @brief The enumeration lists the BIT 7 HT Rate.</span>
<span class="cm">*/</span>
<span class="k">enum</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="n">MGN_1M</span><span class="w">          </span><span class="o">=</span><span class="w"> </span><span class="mh">0x02</span><span class="p">,</span><span class="w">   </span><span class="cm">/**&lt; 0x02 */</span>
<span class="w">    </span><span class="n">MGN_2M</span><span class="w">          </span><span class="o">=</span><span class="w"> </span><span class="mh">0x04</span><span class="p">,</span><span class="w">   </span><span class="cm">/**&lt; 0x04 */</span>
<span class="w">    </span><span class="n">MGN_5_5M</span><span class="w">        </span><span class="o">=</span><span class="w"> </span><span class="mh">0x0B</span><span class="p">,</span><span class="w">   </span><span class="cm">/**&lt; 0x0B */</span>
<span class="w">    </span><span class="n">MGN_6M</span><span class="w">          </span><span class="o">=</span><span class="w"> </span><span class="mh">0x0C</span><span class="p">,</span><span class="w">   </span><span class="cm">/**&lt; 0x0C */</span>
<span class="w">    </span><span class="n">MGN_9M</span><span class="w">          </span><span class="o">=</span><span class="w"> </span><span class="mh">0x12</span><span class="p">,</span><span class="w">   </span><span class="cm">/**&lt; 0x12 */</span>
<span class="w">    </span><span class="n">MGN_11M</span><span class="w">         </span><span class="o">=</span><span class="w"> </span><span class="mh">0x16</span><span class="p">,</span><span class="w">   </span><span class="cm">/**&lt; 0x16 */</span>
<span class="w">    </span><span class="n">MGN_12M</span><span class="w">         </span><span class="o">=</span><span class="w"> </span><span class="mh">0x18</span><span class="p">,</span><span class="w">   </span><span class="cm">/**&lt; 0x18 */</span>
<span class="w">    </span><span class="n">MGN_18M</span><span class="w">         </span><span class="o">=</span><span class="w"> </span><span class="mh">0x24</span><span class="p">,</span><span class="w">   </span><span class="cm">/**&lt; 0x24 */</span>
<span class="w">    </span><span class="n">MGN_24M</span><span class="w">         </span><span class="o">=</span><span class="w"> </span><span class="mh">0x30</span><span class="p">,</span><span class="w">   </span><span class="cm">/**&lt; 0x30 */</span>
<span class="w">    </span><span class="n">MGN_36M</span><span class="w">         </span><span class="o">=</span><span class="w"> </span><span class="mh">0x48</span><span class="p">,</span><span class="w">   </span><span class="cm">/**&lt; 0x48 */</span>
<span class="w">    </span><span class="n">MGN_48M</span><span class="w">         </span><span class="o">=</span><span class="w"> </span><span class="mh">0x60</span><span class="p">,</span><span class="w">   </span><span class="cm">/**&lt; 0x60 */</span>
<span class="w">    </span><span class="n">MGN_54M</span><span class="w">         </span><span class="o">=</span><span class="w"> </span><span class="mh">0x6C</span><span class="p">,</span><span class="w">   </span><span class="cm">/**&lt; 0x6C */</span>
<span class="w">    </span><span class="n">MGN_MCS0</span><span class="w">        </span><span class="o">=</span><span class="w"> </span><span class="mh">0x80</span><span class="p">,</span><span class="w">   </span><span class="cm">/**&lt; 0x80 */</span>
<span class="w">    </span><span class="n">MGN_MCS1</span><span class="p">,</span><span class="w">                 </span><span class="cm">/**&lt; 0x81 */</span>
<span class="w">    </span><span class="n">MGN_MCS2</span><span class="p">,</span><span class="w">                 </span><span class="cm">/**&lt; 0x82 */</span>
<span class="w">    </span><span class="n">MGN_MCS3</span><span class="p">,</span><span class="w">                 </span><span class="cm">/**&lt; 0x83 */</span>
<span class="w">    </span><span class="n">MGN_MCS4</span><span class="p">,</span><span class="w">                 </span><span class="cm">/**&lt; 0x84 */</span>
<span class="w">    </span><span class="n">MGN_MCS5</span><span class="p">,</span><span class="w">                 </span><span class="cm">/**&lt; 0x85 */</span>
<span class="w">    </span><span class="n">MGN_MCS6</span><span class="p">,</span>
<span class="w">    </span><span class="n">MGN_MCS7</span><span class="p">,</span>
<span class="w">    </span><span class="n">MGN_VHT1SS_MCS0</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mh">0xA0</span><span class="p">,</span><span class="w">   </span><span class="cm">/**&lt; 0xA0 */</span>
<span class="w">    </span><span class="n">MGN_VHT1SS_MCS1</span><span class="p">,</span>
<span class="w">    </span><span class="n">MGN_VHT1SS_MCS2</span><span class="p">,</span>
<span class="w">    </span><span class="n">MGN_VHT1SS_MCS3</span><span class="p">,</span>
<span class="w">    </span><span class="n">MGN_VHT1SS_MCS4</span><span class="p">,</span>
<span class="w">    </span><span class="n">MGN_VHT1SS_MCS5</span><span class="p">,</span>
<span class="w">    </span><span class="n">MGN_VHT1SS_MCS6</span><span class="p">,</span>
<span class="w">    </span><span class="n">MGN_VHT1SS_MCS7</span><span class="p">,</span>
<span class="w">    </span><span class="n">MGN_VHT1SS_MCS8</span><span class="p">,</span>
<span class="w">    </span><span class="n">MGN_VHT1SS_MCS9</span><span class="p">,</span>
<span class="w">    </span><span class="n">MGN_HE1SS_MCS0</span><span class="w">  </span><span class="o">=</span><span class="w"> </span><span class="mh">0xD0</span><span class="p">,</span><span class="w">   </span><span class="cm">/**&lt; 0xD0 */</span>
<span class="w">    </span><span class="n">MGN_HE1SS_MCS1</span><span class="p">,</span>
<span class="w">    </span><span class="n">MGN_HE1SS_MCS2</span><span class="p">,</span>
<span class="w">    </span><span class="n">MGN_HE1SS_MCS3</span><span class="p">,</span>
<span class="w">    </span><span class="n">MGN_HE1SS_MCS4</span><span class="p">,</span>
<span class="w">    </span><span class="n">MGN_HE1SS_MCS5</span><span class="p">,</span>
<span class="w">    </span><span class="n">MGN_HE1SS_MCS6</span><span class="p">,</span>
<span class="w">    </span><span class="n">MGN_HE1SS_MCS7</span><span class="p">,</span>
<span class="w">    </span><span class="n">MGN_HE1SS_MCS8</span><span class="p">,</span>
<span class="w">    </span><span class="n">MGN_HE1SS_MCS9</span><span class="p">,</span>
<span class="w">    </span><span class="n">MGN_UNKNOWN</span><span class="w">     </span><span class="o">=</span><span class="w"> </span><span class="mh">0x100</span>
<span class="p">};</span>
</pre></div>
</div>
</div></blockquote>
</div></div>
</section>
</section>
<section id="wifi-csi-report">
<h2>wifi_csi_report<a class="headerlink" href="#wifi-csi-report" title="Link to this heading">ïƒ</a></h2>
<ul>
<li><p>å‡½æ•°åŸå‹ï¼š</p>
<div class="highlight-c notranslate"><div class="highlight"><pre><span></span><span class="kt">int</span><span class="w"> </span><span class="n">wifi_csi_report</span><span class="p">(</span><span class="n">u32</span><span class="w"> </span><span class="n">buf_len</span><span class="p">,</span><span class="w"> </span><span class="n">u8</span><span class="w"> </span><span class="o">*</span><span class="n">csi_buf</span><span class="p">,</span><span class="w"> </span><span class="n">u32</span><span class="w"> </span><span class="o">*</span><span class="n">len</span><span class="p">)</span>
</pre></div>
</div>
</li>
<li><p>ç”¨é€”ï¼š è·å– Wi-Fi CSI æŠ¥æ–‡ï¼ˆåŒ…æ‹¬å¤´éƒ¨ä¿¡æ¯å’ŒåŸå§‹æ•°æ®ï¼‰</p></li>
</ul>
<section id="id5">
<h3>å‚æ•°å®šä¹‰<a class="headerlink" href="#id5" title="Link to this heading">ïƒ</a></h3>
<blockquote>
<div><table class="docutils align-default" style="width: 100%">
<thead>
<tr class="row-odd"><th class="head"><p>å‚æ•°</p></th>
<th class="head"><p>ç±»å‹</p></th>
<th class="head"><p>æè¿°</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>buf_len</p></td>
<td><p>u32</p></td>
<td><p>åº”ç”¨ç¨‹åºæŒ‡å®šå­˜å‚¨ CSI æŠ¥æ–‡çš„ç¼“å†²åŒºå¤§å°</p></td>
</tr>
<tr class="row-odd"><td><p>csi_buf</p></td>
<td><p>u8*</p></td>
<td><p>åº”ç”¨ç¨‹åºæŒ‡å®šå­˜å‚¨ CSI æŠ¥æ–‡çš„ç¼“å†²åŒºåœ°å€</p></td>
</tr>
<tr class="row-even"><td><p>len</p></td>
<td><p>u32*</p></td>
<td><p>CSI åŸå§‹æ•°æ®å¤§å°</p></td>
</tr>
</tbody>
</table>
</div></blockquote>
</section>
<section id="csi">
<h3>CSI ç¼“å†²åŒºå¸ƒå±€<a class="headerlink" href="#csi" title="Link to this heading">ïƒ</a></h3>
<p>CSI ç¼“å†²åŒºåˆ†ä¸ºä¸¤ä¸ªéƒ¨åˆ†ï¼š <strong>CSI æŠ¥æ–‡å¤´éƒ¨ä¿¡æ¯</strong> å’Œ <strong>CSI åŸå§‹æ•°æ®</strong>ã€‚åŸå§‹æ•°æ®çš„å¤§å°ç”± CSI æŠ¥æ–‡å¤´éƒ¨ä¿¡æ¯ä¸­çš„ <em>csi_data_length</em> å­—æ®µæŒ‡å®šã€‚</p>
<figure class="align-center" id="id24">
<a class="reference internal image-reference" href="../../_images/csi_buffer_layout.svg"><img alt="../../_images/csi_buffer_layout.svg" height="197" src="../../_images/csi_buffer_layout.svg" width="296" /></a>
<figcaption>
<p><span class="caption-text">CSI ç¼“å†²åŒºå¸ƒå±€</span><a class="headerlink" href="#id24" title="Link to this image">ïƒ</a></p>
</figcaption>
</figure>
<section id="id6">
<h4>CSI æŠ¥æ–‡å¤´ä¿¡æ¯<a class="headerlink" href="#id6" title="Link to this heading">ïƒ</a></h4>
<p>CSI æŠ¥æ–‡å¤´ä¿¡æ¯æ ¼å¼ç”±ä¸€ç»„æŒ‰å›ºå®šé¡ºåºæ’åˆ—çš„é¢„å®šä¹‰å­—æ®µæ„æˆï¼Œä¸‹å›¾å±•ç¤ºäº† CSI æŠ¥æ–‡å¤´ä¿¡æ¯çš„å¸ƒå±€ã€‚</p>
<figure class="align-center" id="id25">
<a class="reference internal image-reference" href="../../_images/csi_header_information_format.svg"><img alt="../../_images/csi_header_information_format.svg" height="172" src="../../_images/csi_header_information_format.svg" width="961" /></a>
<figcaption>
<p><span class="caption-text">CSI æŠ¥æ–‡å¤´ä¿¡æ¯æ ¼å¼</span><a class="headerlink" href="#id25" title="Link to this image">ïƒ</a></p>
</figcaption>
</figure>
<p>ä»¥ä¸‹åˆ—è¡¨æè¿°äº†å„å­—æ®µçš„å®šä¹‰ï¼š</p>
<table class="docutils align-default" style="width: 100%">
<thead>
<tr class="row-odd"><th class="head"><p>å­å­—æ®µ</p></th>
<th class="head"><p>å¤§å°ï¼ˆå­—èŠ‚ï¼‰</p></th>
<th class="head"><p>å®šä¹‰</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>csi_signature</p></td>
<td><p>2</p></td>
<td><p>ç”¨äºå®šä½æ–°çš„ CSI æŠ¥æ–‡çš„æ ‡è¯†ç¬¦ï¼Œå›ºå®šå€¼ 0xABCD</p></td>
</tr>
<tr class="row-odd"><td><p>hdr_len</p></td>
<td><p>1</p></td>
<td><p>CSI æŠ¥æ–‡å¤´ä¿¡æ¯é•¿åº¦ï¼ˆä¸åŒ…æ‹¬ <em>csi_signature</em> å’Œ <em>hdr_len</em>ï¼‰</p></td>
</tr>
<tr class="row-even"><td><p>mac_addr</p></td>
<td><p>6</p></td>
<td><p>è®¾å¤‡ MAC åœ°å€</p>
<ul class="simple">
<li><p>Active CSI ä¸­è¡¨ç¤º CSI è§¦å‘å¸§çš„å‘å°„åœ°å€</p></li>
<li><p>Passive CSI ä¸­è¡¨ç¤º CSI è§¦å‘å¸§çš„æ¥æ”¶åœ°å€</p></li>
</ul>
</td>
</tr>
<tr class="row-odd"><td><p>trig_addr</p></td>
<td><p>6</p></td>
<td><p>è®¾å¤‡ MAC åœ°å€</p>
<ul class="simple">
<li><p>Active CSI ä¸­è¡¨ç¤º CSI è§¦å‘å¸§çš„ç›®çš„åœ°å€</p></li>
<li><p>Passive CSI ä¸­è¡¨ç¤º CSI è§¦å‘å¸§çš„æºåœ°å€</p></li>
<li><p>æ–¹æ³•å››ä¿ç•™</p></li>
</ul>
</td>
</tr>
<tr class="row-even"><td><p>hw_assigned_timestamp</p></td>
<td><p>4</p></td>
<td><p>CSI æ—¶é—´æˆ³ï¼Œå•ä½ï¼šå¾®ç§’</p></td>
</tr>
<tr class="row-odd"><td><p>csi_sequence</p></td>
<td><p>4</p></td>
<td><p>CSI æŠ¥æ–‡åºåˆ—å·ï¼ˆæ–¹æ³•å››ä¸­æ— æ•ˆï¼‰</p></td>
</tr>
<tr class="row-even"><td><p>csi_data_length</p></td>
<td><p>4</p></td>
<td><p>CSI åŸå§‹æ•°æ®é•¿åº¦ï¼Œå•ä½ï¼šå­—èŠ‚</p></td>
</tr>
<tr class="row-odd"><td><p>csi_valid</p></td>
<td><p>1</p></td>
<td><p>æ ‡è¯†å½“å‰ CSI åŸå§‹æ•°æ®æ˜¯å¦æœ‰æ•ˆ</p></td>
</tr>
<tr class="row-even"><td><p>channel</p></td>
<td><p>1</p></td>
<td><p>è®¾å¤‡å½“å‰å·¥ä½œä¿¡é“</p></td>
</tr>
<tr class="row-odd"><td><p>bandwidth</p></td>
<td><p>1</p></td>
<td><p>å·¥ä½œå¸¦å®½</p>
<ul class="simple">
<li><p>0: 20MHz</p></li>
<li><p>1: 40MHz</p></li>
</ul>
</td>
</tr>
<tr class="row-even"><td><p>rx_rate</p></td>
<td><p>1</p></td>
<td><p>è·å– CSI çš„æ— çº¿æŠ¥æ–‡çš„ä¼ è¾“é€Ÿç‡</p></td>
</tr>
<tr class="row-odd"><td><p>protocol_mode</p></td>
<td><p>1</p></td>
<td><p>è·å– CSI çš„æ— çº¿æŠ¥æ–‡çš„åè®®æ¨¡å¼</p>
<ul class="simple">
<li><p>0: OFDM</p></li>
<li><p>1: HT</p></li>
<li><p>2: VHT</p></li>
<li><p>3: HE</p></li>
</ul>
</td>
</tr>
<tr class="row-even"><td><p>num_sub_carrier</p></td>
<td><p>2</p></td>
<td><p>CSI åŸå§‹æ•°æ®çš„å­è½½æ³¢æ•°é‡</p></td>
</tr>
<tr class="row-odd"><td><p>num_bit_per_tone</p></td>
<td><p>1</p></td>
<td><p>CSI æŠ¥æ–‡çš„ I å’Œ Q æ€»å­—é•¿</p>
<p>ç²¾åº¦ï¼š S(8,X) æˆ– S(16,X)</p>
</td>
</tr>
<tr class="row-even"><td><p>rssi[2]</p></td>
<td><p>2</p></td>
<td><p>æ¥æ”¶ä¿¡å·å¼ºåº¦ï¼ˆdBmï¼‰ï¼Œrssi[1] ä¿ç•™</p></td>
</tr>
<tr class="row-odd"><td><p>evm[2]</p></td>
<td><p>2</p></td>
<td><p>è¯¯å·®çŸ¢é‡å¹…åº¦ï¼ˆdBï¼‰ï¼Œå‡ä¿ç•™</p></td>
</tr>
<tr class="row-even"><td><p>rxsc</p></td>
<td><p>1</p></td>
<td><p>æŒ‡ç¤ºæ•°æ®åŒ…ä¼ è¾“ä½¿ç”¨çš„ 20MHz å­ä¿¡é“</p></td>
</tr>
<tr class="row-odd"><td><p>n_rx</p></td>
<td><p>1</p></td>
<td><p>ä¿ç•™å­—æ®µ</p></td>
</tr>
<tr class="row-even"><td><p>n_sts</p></td>
<td><p>1</p></td>
<td><p>ä¿ç•™å­—æ®µ</p></td>
</tr>
<tr class="row-odd"><td><p>trig_flag</p></td>
<td><p>1</p></td>
<td><p>æŒ‡ç¤ºè§¦å‘ CSI çš„æºè§’è‰²</p>
<ul class="simple">
<li><p>æ–¹æ³•å››æœ‰æ•ˆï¼Œå…¶ä½™æ–¹æ³•ä¿ç•™</p></li>
</ul>
</td>
</tr>
<tr class="row-even"><td><p>rsvd</p></td>
<td><p>5</p></td>
<td><p>ä¿ç•™å­—æ®µ</p></td>
</tr>
</tbody>
</table>
<p><strong>CSI æŠ¥æ–‡å¤´ä¿¡æ¯å’ŒåŸå§‹æ•°æ®ç¤ºä¾‹</strong></p>
<p>å¦‚ä¸‹æ˜¯ä¸€ç»„ CSI æŠ¥æ–‡ç¼“å­˜åŒºå†…å®¹å’Œè§£è¯‘å‡ºæ¥çš„ CSI å¤´éƒ¨ä¿¡æ¯å¯¹æ¯”ç»“æœï¼š</p>
<figure class="align-center" id="id26">
<a class="reference internal image-reference" href="../../_images/comparison_between_parsed_csi_header_information_data_and_csi_buffer_data.svg"><img alt="../../_images/comparison_between_parsed_csi_header_information_data_and_csi_buffer_data.svg" height="443" src="../../_images/comparison_between_parsed_csi_header_information_data_and_csi_buffer_data.svg" width="985" /></a>
<figcaption>
<p><span class="caption-text">CSI ç¼“å†²åŒºæ•°æ®å’Œè§£æå‡ºæ¥çš„ CSI å¤´ä¿¡æ¯æ¯”è¾ƒå›¾</span><a class="headerlink" href="#id26" title="Link to this image">ïƒ</a></p>
</figcaption>
</figure>
</section>
<section id="id7">
<h4>CSI åŸå§‹æ•°æ®å¸ƒå±€<a class="headerlink" href="#id7" title="Link to this heading">ïƒ</a></h4>
<div class="sphinx-tabs docutils container">
<div aria-label="Tabbed content" class="closeable" role="tablist"><button aria-controls="panel-2-2-0" aria-selected="true" class="sphinx-tabs-tab" id="tab-2-2-0" name="2-0" role="tab" tabindex="0">RTL8721Dx</button><button aria-controls="panel-2-2-1" aria-selected="false" class="sphinx-tabs-tab" id="tab-2-2-1" name="2-1" role="tab" tabindex="-1">RTL8720E</button><button aria-controls="panel-2-2-2" aria-selected="false" class="sphinx-tabs-tab" id="tab-2-2-2" name="2-2" role="tab" tabindex="-1">RTL8726E</button><button aria-controls="panel-2-2-3" aria-selected="false" class="sphinx-tabs-tab" id="tab-2-2-3" name="2-3" role="tab" tabindex="-1">RTL8730E</button></div><div aria-labelledby="tab-2-2-0" class="sphinx-tabs-panel" id="panel-2-2-0" name="2-0" role="tabpanel" tabindex="0"><p>å­è½½æ³¢ç´¢å¼•ä¸é¢‘æ®µå¯¹åº”å…³ç³»ï¼š-20MHz~0 å¯¹åº” 64ï¼š127ï¼Œ 0~20MHz å¯¹åº” 0ï¼š63ã€‚</p>
<p>å„æ¨¡å¼å­è½½æ³¢åˆ†å¸ƒï¼š</p>
<ul class="simple">
<li><p>ä¼ ç»Ÿ 20MHz æ¨¡å¼ï¼š å­è½½æ³¢ç´¢å¼• ï¼ˆ102ï¼Œ 103ï¼Œ â€¦ï¼Œ 127ï¼Œ 1ï¼Œ 2ï¼Œ â€¦ï¼Œ 26ï¼‰</p></li>
<li><p>éä¼ ç»Ÿ 20MHz æ¨¡å¼ï¼š å­è½½æ³¢ç´¢å¼• ï¼ˆ100ï¼Œ 101ï¼Œ 102ï¼Œ 103ï¼Œ â€¦ï¼Œ 127ï¼Œ 1ï¼Œ 2ï¼Œ â€¦ï¼Œ 26ï¼Œ 27ï¼Œ 28ï¼‰</p></li>
<li><p>ä¼ ç»Ÿ 40MHz æ¨¡å¼ï¼š å­è½½æ³¢ç´¢å¼• ï¼ˆ70ï¼Œ 71ï¼Œ â€¦ï¼Œ 94ï¼Œ 95ï¼Œ 97ï¼Œ 98ï¼Œ â€¦ï¼Œ 122ï¼Œ 6ï¼Œ 7ï¼Œ â€¦ï¼Œ 30ï¼Œ 31ï¼Œ 33ï¼Œ 34ï¼Œ â€¦ï¼Œ 57ï¼Œ 58ï¼‰</p></li>
<li><p>éä¼ ç»Ÿ 40MHz æ¨¡å¼ï¼š å­è½½æ³¢ç´¢å¼• ï¼ˆ71ï¼Œ 72ï¼Œ â€¦ï¼Œ 127ï¼Œ 1ï¼Œ 2ï¼Œ â€¦ï¼Œ 56ï¼Œ 57ï¼‰</p></li>
</ul>
<p><strong>CSIåŸå§‹æ•°æ®ç¤ºä¾‹ï¼ˆæ— æŠ½æ ·ï¼‰ï¼š20MHz</strong></p>
<p>æ¯ä¸ªå­è½½æ³¢åŒ…å« Nrx*Nsts ç»´ CSI çŸ©é˜µã€‚ä»¥ VHT MIMO 1x2 çŸ©é˜µä¸ºä¾‹ï¼ˆ<code class="docutils literal notranslate"><span class="pre">group_num</span></code>ï¼š 1 + <code class="docutils literal notranslate"><span class="pre">accuracy</span></code>ï¼š 0ï¼‰ï¼Œ H çš„æ’åˆ—é¡ºåºä¸º H11ã€ H12ã€‚å¯¹åº”çš„ CSI åŸå§‹æ•°æ®å¸ƒå±€å¦‚å›¾æ‰€ç¤ºï¼š</p>
<figure class="align-center" id="id27">
<a class="reference internal image-reference" href="../../_images/csi_raw_data_layout_without_decimation_dplus.svg"><img alt="../../_images/csi_raw_data_layout_without_decimation_dplus.svg" height="280" src="../../_images/csi_raw_data_layout_without_decimation_dplus.svg" width="604" /></a>
<figcaption>
<p><span class="caption-text">CSI åŸå§‹æ•°æ®å¸ƒå±€å›¾ï¼ˆæ— æŠ½æ ·ï¼‰</span><a class="headerlink" href="#id27" title="Link to this image">ïƒ</a></p>
</figcaption>
</figure>
<p><strong>CSIåŸå§‹æ•°æ®ç¤ºä¾‹ï¼ˆå¸¦æŠ½æ ·ï¼‰ï¼š20MHz</strong></p>
<p>æ¯ä¸ªå­è½½æ³¢åŒ…å« Nrx*Nsts ç»´ CSI çŸ©é˜µã€‚ä»¥ VHT MIMO 1x2 çŸ©é˜µä¸ºä¾‹ï¼ˆ<code class="docutils literal notranslate"><span class="pre">group_num</span></code>ï¼š 3 + <code class="docutils literal notranslate"><span class="pre">accuracy</span></code>ï¼š 0ï¼‰ï¼Œ H çš„æ’åˆ—é¡ºåºä¸º H11ã€ H12ã€‚æ ¹æ® <em>tone_idx%group_num==0</em> çš„åŸåˆ™é€‰æ‹©å­è½½æ³¢ç´¢å¼•ã€‚å¯¹åº”çš„ CSI åŸå§‹æ•°æ®å¸ƒå±€å¦‚å›¾æ‰€ç¤ºï¼š</p>
<figure class="align-center" id="id28">
<a class="reference internal image-reference" href="../../_images/csi_raw_data_layout_with_decimation_dplus.svg"><img alt="../../_images/csi_raw_data_layout_with_decimation_dplus.svg" height="56" src="../../_images/csi_raw_data_layout_with_decimation_dplus.svg" width="907" /></a>
<figcaption>
<p><span class="caption-text">CSI åŸå§‹æ•°æ®å¸ƒå±€å›¾ï¼ˆå¸¦æŠ½æ ·ï¼‰</span><a class="headerlink" href="#id28" title="Link to this image">ïƒ</a></p>
</figcaption>
</figure>
</div><div aria-labelledby="tab-2-2-1" class="sphinx-tabs-panel" hidden="true" id="panel-2-2-1" name="2-1" role="tabpanel" tabindex="0"><p>å­è½½æ³¢ç´¢å¼•ä¸é¢‘æ®µå¯¹åº”å…³ç³»ï¼š0~20MHz å¯¹åº” 0ï¼š63ã€‚</p>
<p><strong>CSIåŸå§‹æ•°æ®ç¤ºä¾‹ï¼ˆæ— æŠ½æ ·ï¼‰</strong></p>
<p>æ¯ä¸ªå­è½½æ³¢åŒ…å« Nrx*Nsts ç»´ CSI çŸ©é˜µã€‚ä»¥ HT MIMO 1x2 çŸ©é˜µä¸ºä¾‹ï¼ˆ<code class="docutils literal notranslate"><span class="pre">group_num</span></code>ï¼š 1 + <code class="docutils literal notranslate"><span class="pre">accuracy</span></code>ï¼š 0ï¼‰ï¼Œ H çš„æ’åˆ—é¡ºåºä¸º H11ã€ H12ã€‚å¯¹åº”çš„ CSI åŸå§‹æ•°æ®å¸ƒå±€å¦‚å›¾æ‰€ç¤ºï¼š</p>
<figure class="align-center" id="id29">
<a class="reference internal image-reference" href="../../_images/csi_raw_data_layout_without_decimation_lite_smart.svg"><img alt="../../_images/csi_raw_data_layout_without_decimation_lite_smart.svg" height="214" src="../../_images/csi_raw_data_layout_without_decimation_lite_smart.svg" width="604" /></a>
<figcaption>
<p><span class="caption-text">CSI åŸå§‹æ•°æ®å¸ƒå±€å›¾ï¼ˆæ— æŠ½æ ·ï¼‰</span><a class="headerlink" href="#id29" title="Link to this image">ïƒ</a></p>
</figcaption>
</figure>
<p><strong>CSIåŸå§‹æ•°æ®ç¤ºä¾‹ï¼ˆå¸¦æŠ½æ ·ï¼‰</strong></p>
<p>æ¯ä¸ªå­è½½æ³¢åŒ…å« Nrx*Nsts ç»´ CSI çŸ©é˜µã€‚ä»¥ HT MIMO 1x2 çŸ©é˜µä¸ºä¾‹ï¼ˆ<code class="docutils literal notranslate"><span class="pre">group_num</span></code>ï¼š 3 + <code class="docutils literal notranslate"><span class="pre">accuracy</span></code>ï¼š 0ï¼‰ï¼Œ H çš„æ’åˆ—é¡ºåºä¸º H11ã€ H12ã€‚æ€»çš„å­è½½æ³¢æ•°ä¸º <cite>ceil((tone_num/2)/group_num) * 2 = ceil(56/2/16)*2 = 4</cite>ã€‚å¯¹åº”çš„ CSI åŸå§‹æ•°æ®å¸ƒå±€å¦‚å›¾æ‰€ç¤ºï¼š</p>
<figure class="align-center" id="id30">
<a class="reference internal image-reference" href="../../_images/csi_raw_data_layout_with_decimation_lite_smart.svg"><img alt="../../_images/csi_raw_data_layout_with_decimation_lite_smart.svg" height="56" src="../../_images/csi_raw_data_layout_with_decimation_lite_smart.svg" width="604" /></a>
<figcaption>
<p><span class="caption-text">CSI åŸå§‹æ•°æ®å¸ƒå±€å›¾ï¼ˆå¸¦æŠ½æ ·ï¼‰</span><a class="headerlink" href="#id30" title="Link to this image">ïƒ</a></p>
</figcaption>
</figure>
</div><div aria-labelledby="tab-2-2-2" class="sphinx-tabs-panel" hidden="true" id="panel-2-2-2" name="2-2" role="tabpanel" tabindex="0"><p>å­è½½æ³¢ç´¢å¼•ä¸é¢‘æ®µå¯¹åº”å…³ç³»ï¼š0~20MHz å¯¹åº” 0ï¼š63ã€‚</p>
<p><strong>CSIåŸå§‹æ•°æ®ç¤ºä¾‹ï¼ˆæ— æŠ½æ ·ï¼‰</strong></p>
<p>æ¯ä¸ªå­è½½æ³¢åŒ…å« Nrx*Nsts ç»´ CSI çŸ©é˜µã€‚ä»¥ HT MIMO 1x2 çŸ©é˜µä¸ºä¾‹ï¼ˆ<code class="docutils literal notranslate"><span class="pre">group_num</span></code>ï¼š 1 + <code class="docutils literal notranslate"><span class="pre">accuracy</span></code>ï¼š 0ï¼‰ï¼Œ H çš„æ’åˆ—é¡ºåºä¸º H11ã€ H12ã€‚å¯¹åº”çš„ CSI åŸå§‹æ•°æ®å¸ƒå±€å¦‚å›¾æ‰€ç¤ºï¼š</p>
<figure class="align-center" id="id31">
<a class="reference internal image-reference" href="../../_images/csi_raw_data_layout_without_decimation_lite_smart.svg"><img alt="../../_images/csi_raw_data_layout_without_decimation_lite_smart.svg" height="214" src="../../_images/csi_raw_data_layout_without_decimation_lite_smart.svg" width="604" /></a>
<figcaption>
<p><span class="caption-text">CSI åŸå§‹æ•°æ®å¸ƒå±€å›¾ï¼ˆæ— æŠ½æ ·ï¼‰</span><a class="headerlink" href="#id31" title="Link to this image">ïƒ</a></p>
</figcaption>
</figure>
<p><strong>CSIåŸå§‹æ•°æ®ç¤ºä¾‹ï¼ˆå¸¦æŠ½æ ·ï¼‰</strong></p>
<p>æ¯ä¸ªå­è½½æ³¢åŒ…å« Nrx*Nsts ç»´ CSI çŸ©é˜µã€‚ä»¥ HT MIMO 1x2 çŸ©é˜µä¸ºä¾‹ï¼ˆ<code class="docutils literal notranslate"><span class="pre">group_num</span></code>ï¼š 3 + <code class="docutils literal notranslate"><span class="pre">accuracy</span></code>ï¼š 0ï¼‰ï¼Œ H çš„æ’åˆ—é¡ºåºä¸º H11ã€ H12ã€‚æ€»çš„å­è½½æ³¢æ•°ä¸º <cite>ceil((tone_num/2)/group_num) * 2 = ceil(56/2/16)*2 = 4</cite>ã€‚å¯¹åº”çš„ CSI åŸå§‹æ•°æ®å¸ƒå±€å¦‚å›¾æ‰€ç¤ºï¼š</p>
<figure class="align-center" id="id32">
<a class="reference internal image-reference" href="../../_images/csi_raw_data_layout_with_decimation_lite_smart.svg"><img alt="../../_images/csi_raw_data_layout_with_decimation_lite_smart.svg" height="56" src="../../_images/csi_raw_data_layout_with_decimation_lite_smart.svg" width="604" /></a>
<figcaption>
<p><span class="caption-text">CSI åŸå§‹æ•°æ®å¸ƒå±€å›¾ï¼ˆå¸¦æŠ½æ ·ï¼‰</span><a class="headerlink" href="#id32" title="Link to this image">ïƒ</a></p>
</figcaption>
</figure>
</div><div aria-labelledby="tab-2-2-3" class="sphinx-tabs-panel" hidden="true" id="panel-2-2-3" name="2-3" role="tabpanel" tabindex="0"><p>å­è½½æ³¢ç´¢å¼•ä¸é¢‘æ®µå¯¹åº”å…³ç³»ï¼š0~20MHz å¯¹åº” 0ï¼š63ã€‚</p>
<p><strong>CSIåŸå§‹æ•°æ®ç¤ºä¾‹ï¼ˆæ— æŠ½æ ·ï¼‰</strong></p>
<p>æ¯ä¸ªå­è½½æ³¢åŒ…å« Nrx*Nsts ç»´ CSI çŸ©é˜µã€‚ä»¥ HT MIMO 1x2 çŸ©é˜µä¸ºä¾‹ï¼ˆ<code class="docutils literal notranslate"><span class="pre">group_num</span></code>ï¼š 1 + <code class="docutils literal notranslate"><span class="pre">accuracy</span></code>ï¼š 0ï¼‰ï¼Œ H çš„æ’åˆ—é¡ºåºä¸º H11ã€ H12ã€‚å¯¹åº”çš„ CSI åŸå§‹æ•°æ®å¸ƒå±€å¦‚å›¾æ‰€ç¤ºï¼š</p>
<figure class="align-center" id="id33">
<a class="reference internal image-reference" href="../../_images/csi_raw_data_layout_without_decimation_lite_smart.svg"><img alt="../../_images/csi_raw_data_layout_without_decimation_lite_smart.svg" height="214" src="../../_images/csi_raw_data_layout_without_decimation_lite_smart.svg" width="604" /></a>
<figcaption>
<p><span class="caption-text">CSI åŸå§‹æ•°æ®å¸ƒå±€å›¾ï¼ˆæ— æŠ½æ ·ï¼‰</span><a class="headerlink" href="#id33" title="Link to this image">ïƒ</a></p>
</figcaption>
</figure>
<p><strong>CSIåŸå§‹æ•°æ®ç¤ºä¾‹ï¼ˆå¸¦æŠ½æ ·ï¼‰</strong></p>
<p>æ¯ä¸ªå­è½½æ³¢åŒ…å« Nrx*Nsts ç»´ CSI çŸ©é˜µã€‚ä»¥ HT MIMO 1x2 çŸ©é˜µä¸ºä¾‹ï¼ˆ<code class="docutils literal notranslate"><span class="pre">group_num</span></code>ï¼š 3 + <code class="docutils literal notranslate"><span class="pre">accuracy</span></code>ï¼š 0ï¼‰ï¼Œ H çš„æ’åˆ—é¡ºåºä¸º H11ã€ H12ã€‚æ€»çš„å­è½½æ³¢æ•°ä¸º <cite>ceil((tone_num/2)/group_num) * 2 = ceil(56/2/16)*2 = 4</cite>ã€‚å¯¹åº”çš„ CSI åŸå§‹æ•°æ®å¸ƒå±€å¦‚å›¾æ‰€ç¤ºï¼š</p>
<figure class="align-center" id="id34">
<a class="reference internal image-reference" href="../../_images/csi_raw_data_layout_with_decimation_lite_smart.svg"><img alt="../../_images/csi_raw_data_layout_with_decimation_lite_smart.svg" height="56" src="../../_images/csi_raw_data_layout_with_decimation_lite_smart.svg" width="604" /></a>
<figcaption>
<p><span class="caption-text">CSI åŸå§‹æ•°æ®å¸ƒå±€å›¾ï¼ˆå¸¦æŠ½æ ·ï¼‰</span><a class="headerlink" href="#id34" title="Link to this image">ïƒ</a></p>
</figcaption>
</figure>
</div></div>
</section>
</section>
<section id="id8">
<h3>CSI åŸå§‹æ•°æ®å­è½½æ³¢æ•°ç›®<a class="headerlink" href="#id8" title="Link to this heading">ïƒ</a></h3>
<div class="sphinx-tabs docutils container">
<div aria-label="Tabbed content" class="closeable" role="tablist"><button aria-controls="panel-3-3-0" aria-selected="true" class="sphinx-tabs-tab" id="tab-3-3-0" name="3-0" role="tab" tabindex="0">RTL8721Dx</button><button aria-controls="panel-3-3-1" aria-selected="false" class="sphinx-tabs-tab" id="tab-3-3-1" name="3-1" role="tab" tabindex="-1">RTL8720E</button><button aria-controls="panel-3-3-2" aria-selected="false" class="sphinx-tabs-tab" id="tab-3-3-2" name="3-2" role="tab" tabindex="-1">RTL8726E</button><button aria-controls="panel-3-3-3" aria-selected="false" class="sphinx-tabs-tab" id="tab-3-3-3" name="3-3" role="tab" tabindex="-1">RTL8730E</button></div><div aria-labelledby="tab-3-3-0" class="sphinx-tabs-panel" id="panel-3-3-0" name="3-0" role="tabpanel" tabindex="0"><table class="docutils align-default" id="id35" style="width: 100%">
<caption><span class="caption-text">{N_tone(BW) * group_num}</span><a class="headerlink" href="#id35" title="Link to this table">ïƒ</a></caption>
<thead>
<tr class="row-odd"><th class="head"></th>
<th class="head"><p>BW</p></th>
<th class="head"><p>1</p></th>
<th class="head"><p>1/2</p></th>
<th class="head"><p>1/4</p></th>
<th class="head"><p>1/8</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>Non-HT</p></td>
<td><p>20M</p></td>
<td><p>52</p></td>
<td><p>26</p></td>
<td><p>12</p></td>
<td><p>6</p></td>
</tr>
<tr class="row-odd"><td><p>HT</p></td>
<td><p>20M</p></td>
<td><p>56</p></td>
<td><p>28</p></td>
<td><p>14</p></td>
<td><p>6</p></td>
</tr>
<tr class="row-even"><td><p>VHT</p></td>
<td><p>20M</p></td>
<td><p>56</p></td>
<td><p>28</p></td>
<td><p>14</p></td>
<td><p>6</p></td>
</tr>
<tr class="row-odd"><td><p>Non-HT</p></td>
<td><p>40M</p></td>
<td><p>104</p></td>
<td><p>52</p></td>
<td><p>24</p></td>
<td><p>12</p></td>
</tr>
<tr class="row-even"><td><p>HT</p></td>
<td><p>40M</p></td>
<td><p>114</p></td>
<td><p>56</p></td>
<td><p>28</p></td>
<td><p>14</p></td>
</tr>
<tr class="row-odd"><td><p>VHT</p></td>
<td><p>40M</p></td>
<td><p>114</p></td>
<td><p>56</p></td>
<td><p>28</p></td>
<td><p>14</p></td>
</tr>
</tbody>
</table>
</div><div aria-labelledby="tab-3-3-1" class="sphinx-tabs-panel" hidden="true" id="panel-3-3-1" name="3-1" role="tabpanel" tabindex="0"><table class="docutils align-default" id="id36" style="width: 100%">
<caption><span class="caption-text">{N_tone(BW) * group_num}</span><a class="headerlink" href="#id36" title="Link to this table">ïƒ</a></caption>
<thead>
<tr class="row-odd"><th class="head"></th>
<th class="head"><p>1</p></th>
<th class="head"><p>1/2</p></th>
<th class="head"><p>1/4</p></th>
<th class="head"><p>1/16</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>Non-HT</p></td>
<td><p>52</p></td>
<td><p>26</p></td>
<td><p>14</p></td>
<td><p>4</p></td>
</tr>
<tr class="row-odd"><td><p>HT</p></td>
<td><p>56</p></td>
<td><p>28</p></td>
<td><p>14</p></td>
<td><p>4</p></td>
</tr>
<tr class="row-even"><td><p>HE</p></td>
<td><p>242</p></td>
<td><p>122</p></td>
<td><p>62</p></td>
<td><p>16</p></td>
</tr>
</tbody>
</table>
</div><div aria-labelledby="tab-3-3-2" class="sphinx-tabs-panel" hidden="true" id="panel-3-3-2" name="3-2" role="tabpanel" tabindex="0"><table class="docutils align-default" id="id37" style="width: 100%">
<caption><span class="caption-text">{N_tone(BW) * group_num}</span><a class="headerlink" href="#id37" title="Link to this table">ïƒ</a></caption>
<thead>
<tr class="row-odd"><th class="head"></th>
<th class="head"><p>1</p></th>
<th class="head"><p>1/2</p></th>
<th class="head"><p>1/4</p></th>
<th class="head"><p>1/16</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>Non-HT</p></td>
<td><p>52</p></td>
<td><p>26</p></td>
<td><p>14</p></td>
<td><p>4</p></td>
</tr>
<tr class="row-odd"><td><p>HT</p></td>
<td><p>56</p></td>
<td><p>28</p></td>
<td><p>14</p></td>
<td><p>4</p></td>
</tr>
<tr class="row-even"><td><p>HE</p></td>
<td><p>242</p></td>
<td><p>122</p></td>
<td><p>62</p></td>
<td><p>16</p></td>
</tr>
</tbody>
</table>
</div><div aria-labelledby="tab-3-3-3" class="sphinx-tabs-panel" hidden="true" id="panel-3-3-3" name="3-3" role="tabpanel" tabindex="0"><table class="docutils align-default" id="id38" style="width: 100%">
<caption><span class="caption-text">{N_tone(BW) * group_num}</span><a class="headerlink" href="#id38" title="Link to this table">ïƒ</a></caption>
<thead>
<tr class="row-odd"><th class="head"></th>
<th class="head"><p>1</p></th>
<th class="head"><p>1/2</p></th>
<th class="head"><p>1/4</p></th>
<th class="head"><p>1/16</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>Non-HT</p></td>
<td><p>52</p></td>
<td><p>26</p></td>
<td><p>14</p></td>
<td><p>4</p></td>
</tr>
<tr class="row-odd"><td><p>HT</p></td>
<td><p>56</p></td>
<td><p>28</p></td>
<td><p>14</p></td>
<td><p>4</p></td>
</tr>
<tr class="row-even"><td><p>VHT</p></td>
<td><p>56</p></td>
<td><p>28</p></td>
<td><p>14</p></td>
<td><p>4</p></td>
</tr>
<tr class="row-odd"><td><p>HE</p></td>
<td><p>242</p></td>
<td><p>122</p></td>
<td><p>62</p></td>
<td><p>16</p></td>
</tr>
</tbody>
</table>
</div></div>
</section>
</section>
<section id="wifi-reg-event-handler">
<h2>wifi_reg_event_handler<a class="headerlink" href="#wifi-reg-event-handler" title="Link to this heading">ïƒ</a></h2>
<ul>
<li><p>å‡½æ•°åŸå‹ï¼š</p>
<div class="highlight-c notranslate"><div class="highlight"><pre><span></span><span class="kt">void</span><span class="w"> </span><span class="n">wifi_reg_event_handler</span><span class="p">(</span><span class="kt">unsigned</span><span class="w"> </span><span class="kt">int</span><span class="w"> </span><span class="n">event_cmds</span><span class="p">,</span><span class="w"> </span><span class="kt">void</span><span class="w"> </span><span class="p">(</span><span class="o">*</span><span class="n">handler_func</span><span class="p">)(</span><span class="kt">char</span><span class="w"> </span><span class="o">*</span><span class="n">buf</span><span class="p">,</span><span class="w"> </span><span class="kt">int</span><span class="w"> </span><span class="n">len</span><span class="p">,</span><span class="w"> </span><span class="kt">int</span><span class="w"> </span><span class="n">flag</span><span class="p">,</span><span class="w"> </span><span class="kt">void</span><span class="w"> </span><span class="o">*</span><span class="n">user_data</span><span class="p">),</span><span class="w"> </span><span class="kt">void</span><span class="w"> </span><span class="o">*</span><span class="n">handler_user_data</span><span class="p">)</span>
</pre></div>
</div>
</li>
<li><p>ç”¨é€”ï¼šæ³¨å†Œå›è°ƒå‡½æ•°</p>
<dl class="field-list simple">
<dt class="field-odd">event_cmds<span class="colon">:</span></dt>
<dd class="field-odd"><p>è¾“å…¥å‚æ•°ï¼Œæ— ç¬¦å·æ•´å‹ï¼ŒWi-Fi CSI åŠŸèƒ½ä¸‹èµ‹å€¼ä¸º <code class="docutils literal notranslate"><span class="pre">WIFI_EVENT_CSI_DONE</span></code></p>
</dd>
<dt class="field-even">handler_func<span class="colon">:</span></dt>
<dd class="field-even"><p>è¾“å…¥å‚æ•°ï¼Œå‡½æ•°æŒ‡é’ˆç±»å‹ï¼Œéœ€ç»‘å®šå…·ä½“çš„å‡½æ•°å</p>
</dd>
<dt class="field-odd">handler_user_data<span class="colon">:</span></dt>
<dd class="field-odd"><p>è¾“å…¥å‚æ•°ï¼Œç©ºæŒ‡é’ˆç±»å‹ï¼Œä¸€èˆ¬æŒ‡å‘ç”¨æˆ·æ•°æ®ï¼Œé€šå¸¸è®¾å®šä¸º <code class="docutils literal notranslate"><span class="pre">NULL</span></code></p>
</dd>
</dl>
</li>
<li><p>ç¤ºä¾‹å¦‚ä¸‹ï¼š</p>
<div class="highlight-c notranslate"><div class="highlight"><pre><span></span><span class="cm">/* å›è°ƒå‡½æ•°ç¤ºä¾‹ */</span>
<span class="kt">void</span><span class="w"> </span><span class="nf">example_callback_func</span><span class="p">(</span><span class="kt">char</span><span class="w"> </span><span class="o">*</span><span class="n">buf</span><span class="p">,</span><span class="w"> </span><span class="kt">int</span><span class="w"> </span><span class="n">buf_len</span><span class="p">,</span><span class="w"> </span><span class="kt">int</span><span class="w"> </span><span class="n">flags</span><span class="p">,</span><span class="w"> </span><span class="kt">void</span><span class="w"> </span><span class="o">*</span><span class="n">userdata</span><span class="p">)</span>
<span class="p">{</span>
<span class="w">   </span><span class="n">UNUSED</span><span class="p">(</span><span class="n">buf</span><span class="p">);</span>
<span class="w">   </span><span class="n">UNUSED</span><span class="p">(</span><span class="n">buf_len</span><span class="p">);</span>
<span class="w">   </span><span class="n">UNUSED</span><span class="p">(</span><span class="n">flags</span><span class="p">);</span>
<span class="w">   </span><span class="n">UNUSED</span><span class="p">(</span><span class="n">userdata</span><span class="p">);</span>
<span class="w">   </span><span class="cm">/* å‡½æ•°ç›¸å…³å¤„ç†åŠ¨ä½œ */</span>
<span class="w">   </span><span class="k">return</span><span class="p">;</span>
<span class="p">}</span>

<span class="cm">/* æ³¨å†Œ Wi-Fi äº‹ä»¶å›è°ƒå‡½æ•° */</span>
<span class="n">wifi_reg_event_handler</span><span class="p">(</span><span class="n">Element_ID</span><span class="p">,</span><span class="w"> </span><span class="n">example_callback_func</span><span class="p">,</span><span class="w"> </span><span class="nb">NULL</span><span class="p">);</span>
</pre></div>
</div>
</li>
</ul>
</section>
<section id="wifi-unreg-event-handler">
<h2>wifi_unreg_event_handler<a class="headerlink" href="#wifi-unreg-event-handler" title="Link to this heading">ïƒ</a></h2>
<ul>
<li><p>å‡½æ•°åŸå‹ï¼š</p>
<div class="highlight-c notranslate"><div class="highlight"><pre><span></span><span class="kt">void</span><span class="w"> </span><span class="n">wifi_unreg_event_handler</span><span class="p">(</span><span class="kt">unsigned</span><span class="w"> </span><span class="kt">int</span><span class="w"> </span><span class="n">event_cmds</span><span class="p">,</span><span class="w"> </span><span class="kt">void</span><span class="w"> </span><span class="p">(</span><span class="o">*</span><span class="n">handler_func</span><span class="p">)(</span><span class="kt">char</span><span class="w"> </span><span class="o">*</span><span class="n">buf</span><span class="p">,</span><span class="w"> </span><span class="kt">int</span><span class="w"> </span><span class="n">len</span><span class="p">,</span><span class="w"> </span><span class="kt">int</span><span class="w"> </span><span class="n">flag</span><span class="p">,</span><span class="w"> </span><span class="kt">void</span><span class="w"> </span><span class="o">*</span><span class="n">user_data</span><span class="p">))</span>
</pre></div>
</div>
</li>
<li><p>ç”¨é€”ï¼šé‡Šæ”¾å·²æ³¨å†Œçš„å›è°ƒå‡½æ•°</p>
<dl class="field-list simple">
<dt class="field-odd">event_cmds<span class="colon">:</span></dt>
<dd class="field-odd"><p>è¾“å…¥å‚æ•°ï¼Œæ— ç¬¦å·æ•´å‹ï¼ŒWi-Fi CSI åŠŸèƒ½ä¸‹èµ‹å€¼ä¸º <code class="docutils literal notranslate"><span class="pre">WIFI_EVENT_CSI_DONE</span></code></p>
</dd>
<dt class="field-even">handler_func<span class="colon">:</span></dt>
<dd class="field-even"><p>è¾“å…¥å‚æ•°ï¼Œå‡½æ•°æŒ‡é’ˆç±»å‹ï¼Œéœ€ç»‘å®šå…·ä½“çš„å‡½æ•°å</p>
</dd>
</dl>
</li>
<li><p>ç¤ºä¾‹å¦‚ä¸‹ï¼š</p>
<div class="highlight-c notranslate"><div class="highlight"><pre><span></span><span class="cm">/* é‡Šæ”¾ Wi-Fi äº‹ä»¶å›è°ƒå‡½æ•° */</span>
<span class="n">wifi_unreg_event_handler</span><span class="p">(</span><span class="n">WIFI_EVENT_CSI_DONE</span><span class="p">,</span><span class="w"> </span><span class="n">example_callback_func</span><span class="p">);</span>
</pre></div>
</div>
</li>
</ul>
</section>
</section>
<section id="id9">
<h1>Wi-Fi CSI ä½¿ç”¨é¡»çŸ¥<a class="headerlink" href="#id9" title="Link to this heading">ïƒ</a></h1>
<section id="id10">
<h2>åŸºæœ¬è¦æ±‚<a class="headerlink" href="#id10" title="Link to this heading">ïƒ</a></h2>
<ul>
<li><p>ä¸åŒ CSI æ–¹æ³•çš„å‚æ•°é…ç½®è¯·ä¾ç…§ <a class="reference internal" href="#collecting-csi-from-rx-ack-packet-response-mode"><span class="std std-ref">åŸºäº ACK å“åº”æŠ¥æ–‡çš„ CSI é‡‡é›†ï¼ˆRx Response Modeï¼‰</span></a>ï¼Œ <a class="reference internal" href="#collecting-csi-from-rx-broadcast-packet-normal-mode"><span class="std std-ref">åŸºäºå¹¿æ’­æŠ¥æ–‡çš„ CSI é‡‡é›†ï¼ˆRx Normal Modeï¼‰</span></a> å’Œ <a class="reference internal" href="#collecting-csi-from-rx-packet-normal-mode"><span class="std std-ref">åŸºäºæ¥æ”¶æŠ¥æ–‡çš„ CSI é‡‡é›†ï¼ˆRx Normal Modeï¼‰</span></a> ä¸­ç¤ºä¾‹è¿›è¡Œã€‚</p></li>
<li><p>å¯ç”¨ Wi-Fi CSI åŠŸèƒ½å‰å¿…é¡» <strong>å…³é—­çœç”µæ¨¡å¼</strong>ã€‚</p>
<blockquote>
<div><ul class="simple">
<li><p>å…³é—­çœç”µæ¨¡å¼æ–¹æ³•ï¼šå®šä½åˆ° <code class="docutils literal notranslate"><span class="pre">component/soc/amebaxxx/usrcfg/ameba_wificfg.c</span></code> ç›®å½•ï¼Œæ‰¾åˆ°å‡½æ•° <code class="xref py py-func docutils literal notranslate"><span class="pre">wifi_set_user_config()</span></code> åä¿®æ”¹å¦‚ä¸‹ï¼š</p></li>
</ul>
<div class="highlight-c notranslate"><div class="highlight"><pre><span></span><span class="n">wifi_user_config</span><span class="p">.</span><span class="n">lps_enable</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">0</span><span class="p">;</span>
<span class="n">wifi_user_config</span><span class="p">.</span><span class="n">lps_mode</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">PS_MODE_ACTIVE</span><span class="p">;</span>
</pre></div>
</div>
</div></blockquote>
</li>
<li><p><strong>å¿…éœ€å‚æ•°</strong>ï¼š <em>data_rate</em> ä¸”è¦æ±‚è®¾ç½®ä¸º OFDM é€Ÿç‡åŠä»¥ä¸Šã€‚</p></li>
<li><p><strong>å¯é€‰å‚æ•°</strong>ï¼š <em>group_num</em>ï¼Œ <em>accuarcy</em>ï¼Œ <em>ch_opt</em>ï¼Œ <em>csi_role</em>ï¼Œ <em>trig_period</em>ï¼Œ <em>data_bw</em>ï¼Œ <em>trig_frame_xx</em>ï¼Œ <em>trig_flag</em>ï¼Œ <em>multi_type</em>ï¼Œ æŒ‰ç…§éœ€æ±‚é…ç½®å³å¯ã€‚</p></li>
</ul>
</section>
<section id="id11">
<h2>æ–¹æ³•å››è®¾è®¡è€ƒé‡<a class="headerlink" href="#id11" title="Link to this heading">ïƒ</a></h2>
<p><strong>æ–¹æ³•ä¸€</strong>ï¼Œ <strong>æ–¹æ³•äºŒ</strong>ï¼Œ <strong>æ–¹æ³•ä¸‰</strong> å’Œ <strong>æ–¹æ³•äº”</strong> å±äºåŸºç¡€è®¾æ–½æ¨¡å¼ä¸‹ STA å’Œ AP ä¹‹é—´çš„æ­£å¸¸äº¤äº’ï¼ŒRealtek é©±åŠ¨è½¯ä»¶å°†éµå¾ªæ— çº¿åè®®æ ‡å‡†æ¥æ„é€  CSI è§¦å‘å¸§çš„ MAC åœ°å€ã€‚</p>
<p>ä¾‹å¦‚ï¼šå¦‚æœ Ameba èŠ¯ç‰‡ä½œä¸º STA è§’è‰²ï¼Œæ— çº¿åè®®æ ‡å‡†å®šä¹‰çš„å¸§æ ¼å¼å¦‚ä¸‹å›¾æ‰€ç¤ºï¼š</p>
<figure class="align-center" id="id39">
<a class="reference internal image-reference" href="../../_images/interaction_between_sta_and_ap_infrastructure_mode.svg"><img alt="../../_images/interaction_between_sta_and_ap_infrastructure_mode.svg" height="178" src="../../_images/interaction_between_sta_and_ap_infrastructure_mode.svg" width="666" /></a>
<figcaption>
<p><span class="caption-text">åŸºç¡€è®¾æ–½æ¨¡å¼ä¸‹ STA å’Œ AP ä¹‹é—´çš„äº¤äº’</span><a class="headerlink" href="#id39" title="Link to this image">ïƒ</a></p>
</figcaption>
</figure>
<p>ç„¶è€Œï¼Œ <strong>æ–¹æ³•å››</strong> ä¸ºåŸºç¡€è®¾æ–½æ¨¡å¼ä¸‹ STAs ä¹‹é—´çš„äº¤äº’ï¼Œå¹¶ä¸å®Œå…¨å…¼å®¹æ— çº¿åè®®æ ‡å‡†ã€‚ä¸ºäº†ä¿è¯å…¶ä»– STAs å¯ä»¥æ”¶ä¸‹æ¥è‡ªç›®æ ‡ STA çš„æ•°æ®æŠ¥æ–‡ï¼ŒAmeba èŠ¯ç‰‡å°†ä¼šä¼ªé€  CSI è§¦å‘å¸§ï¼Œé€šè¿‡ä¿®æ”¹ CSI è§¦å‘å¸§çš„åœ°å€å­—æ®µä¸º <code class="docutils literal notranslate"><span class="pre">A1=broadcast</span> <span class="pre">address</span></code> å’Œ <code class="docutils literal notranslate"><span class="pre">A2=BSSID</span></code> ä»¥ä¿è¯ Realtek æ¥æ”¶è®¾å¤‡çš„ MAC å±‚ä¸ä¼šå°†å…¶è¿‡æ»¤æ‰ã€‚</p>
<div class="admonition note">
<p class="admonition-title">å¤‡æ³¨</p>
<p>åªæœ‰ Realtek MAC å±‚æ¥æ”¶åˆ°è¿™ç¬”å°åŒ…åæ‰ä¼šè§¦å‘ CSI ç”µè·¯è·å– CSI æŠ¥æ–‡ã€‚</p>
</div>
<figure class="align-center" id="id40">
<a class="reference internal image-reference" href="../../_images/interaction_between_sta_and_sta_infrastructure_mode.svg"><img alt="../../_images/interaction_between_sta_and_sta_infrastructure_mode.svg" height="297" src="../../_images/interaction_between_sta_and_sta_infrastructure_mode.svg" width="792" /></a>
<figcaption>
<p><span class="caption-text">åŸºç¡€è®¾æ–½æ¨¡å¼ä¸‹ STA å’Œ STA ä¹‹é—´çš„äº¤äº’</span><a class="headerlink" href="#id40" title="Link to this image">ïƒ</a></p>
</figcaption>
</figure>
<p>å…¶æ¬¡ <strong>æ–¹æ³•å››</strong> è¿˜å­˜åœ¨ä¸€ä¸ªé—®é¢˜ï¼Œå¦‚ä¸Šå›¾æ‰€ç¤º Ameba2 æ¥æ”¶åˆ°çš„æ¥è‡ª Ameba3 å’Œ Ameba1 çš„æ— çº¿æŠ¥æ–‡å…·æœ‰å®Œå…¨ç›¸åŒçš„å†…å®¹ï¼Œæ‰€ä»¥ Ameba2 ä¸èƒ½åŒºåˆ†è¿™ç¬”æ— çº¿æŠ¥æ–‡è§¦å‘çš„ CSI æŠ¥æ–‡å±äº  Ameba1 è¿˜æ˜¯ Ameba3ã€‚ä¸ºäº†è§£å†³è¿™ä¸€é—®é¢˜ï¼Œæˆ‘ä»¬å°†å”¯ä¸€æ ‡è¯†ç¬¦ <code class="docutils literal notranslate"><span class="pre">trig_flag</span></code> å†™å…¥æ— çº¿æŠ¥æ–‡åºåˆ—æ§åˆ¶å­—æ®µçš„â€œç‰‡æ®µå·â€å­æ ä½ï¼Œæœªæ¥è¿™ä¸ªæ ‡è¯†ç¬¦å°†ä¼šæºå¸¦åœ¨ CSI æŠ¥æ–‡ä¸­ï¼Œåº”ç”¨ç¨‹åºå°†å¯ä»¥æ ¹æ® <code class="docutils literal notranslate"><span class="pre">trig_flag</span></code> åŒºåˆ†è¯¥ç¬” CSI æŠ¥æ–‡å±äºå“ªä¸€ä¸ªè®¾å¤‡ã€‚</p>
<figure class="align-center" id="id41">
<a class="reference internal image-reference" href="../../_images/mapping_trig_flag_with_sta.svg"><img alt="../../_images/mapping_trig_flag_with_sta.svg" height="598" src="../../_images/mapping_trig_flag_with_sta.svg" width="974" /></a>
<figcaption>
<p><span class="caption-text">trig_flag å’Œ STAx çš„æ˜ å°„å…³ç³»</span><a class="headerlink" href="#id41" title="Link to this image">ïƒ</a></p>
</figcaption>
</figure>
</section>
<section id="id12">
<h2>ç¼–è¯‘ Wi-Fi CSI å›ºä»¶<a class="headerlink" href="#id12" title="Link to this heading">ïƒ</a></h2>
<ol class="arabic">
<li><p>å¯¼èˆªè‡³ <code class="docutils literal notranslate"><span class="pre">{SDK}/amebaxxx_gcc_project</span></code> ç›®å½•æ‰§è¡Œä»¥ä¸‹æŒ‡ä»¤ï¼š</p>
<div class="highlight-c notranslate"><div class="highlight"><pre><span></span><span class="p">.</span><span class="o">/</span><span class="n">menuconfig</span><span class="p">.</span><span class="n">py</span>
</pre></div>
</div>
</li>
<li><p>æ‰¾åˆ° <span class="menuselection">CONFIG WIFI &gt; Enable CSI</span>ï¼Œé€‰æ‹© <span class="menuselection">Enable CSI</span> åä¿å­˜é€€å‡ºã€‚</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="o">----</span><span class="n">Connectivity</span> <span class="n">config</span><span class="o">----</span>
    <span class="n">CONFIG</span> <span class="n">WHC</span> <span class="n">INTF</span> <span class="o">---&gt;</span>
<span class="hll">    <span class="n">CONFIG</span> <span class="n">WIFI</span> <span class="o">---&gt;</span>
</span>             <span class="n">SDK</span> <span class="n">MODE</span> <span class="p">(</span><span class="n">NORMAL</span> <span class="n">INIC</span><span class="p">)</span>  <span class="o">---&gt;</span>
      <span class="p">[</span> <span class="p">]</span>    <span class="n">Enable</span> <span class="n">WPS</span>
<span class="hll">      <span class="p">[</span><span class="o">*</span><span class="p">]</span>    <span class="n">Enable</span> <span class="n">CSI</span>
</span>      <span class="p">[</span> <span class="p">]</span>    <span class="n">Enable</span> <span class="n">ANTDIV</span>
      <span class="o">---</span>
    <span class="n">CONFIG</span> <span class="n">BT</span> <span class="o">---&gt;</span>
    <span class="o">...</span> <span class="o">---&gt;</span>
</pre></div>
</div>
</li>
<li><p>å†æ¬¡å®šä½åˆ° <code class="docutils literal notranslate"><span class="pre">{SDK}/amebaxxx_gcc_project</span></code> ç›®å½•å¹¶æ‰§è¡Œä»¥ä¸‹æŒ‡ä»¤ï¼š</p>
<div class="highlight-c notranslate"><div class="highlight"><pre><span></span><span class="p">.</span><span class="o">/</span><span class="n">build</span><span class="p">.</span><span class="n">py</span><span class="w"> </span><span class="o">-</span><span class="n">p</span><span class="w"> </span><span class="o">-</span><span class="n">a</span><span class="w"> </span><span class="n">wifi_csi</span><span class="w">     </span><span class="cm">/* compile image with Wi-Fi CSI example */</span>
<span class="p">.</span><span class="o">/</span><span class="n">build</span><span class="p">.</span><span class="n">py</span><span class="w"> </span><span class="o">-</span><span class="n">p</span><span class="w">                 </span><span class="cm">/* compile image without Wi-Fi CSI example */</span>
</pre></div>
</div>
</li>
</ol>
<p>ç¼–è¯‘ç»“æŸåå›ºä»¶ï¼ˆ<strong>xxx_app.bin</strong> &amp; <strong>xxx_boot_all.bin</strong>ï¼‰å¯ä»¥åœ¨ <code class="docutils literal notranslate"><span class="pre">{SDK}/amebaxxx_gcc_project</span></code> ç›®å½•ä¸‹æ‰¾åˆ°ã€‚</p>
</section>
</section>
<section id="id13">
<h1>Wi-Fi CSI åº”ç”¨ç¤ºä¾‹<a class="headerlink" href="#id13" title="Link to this heading">ïƒ</a></h1>
<p>æœ¬èŠ‚æè¿°äº† Wi-Fi CSI ç¤ºä¾‹çš„æ¡†æ¶å’Œå®ç°ç»†èŠ‚ã€‚CSI ç¤ºä¾‹æ–‡ä»¶è·¯å¾„ä¸º <code class="docutils literal notranslate"><span class="pre">{SDK}\component\example\wifi\wifi_csi</span></code>ã€‚</p>
<section id="id14">
<h2>Wi-Fi CSI ç¤ºä¾‹æ¦‚è¿°<a class="headerlink" href="#id14" title="Link to this heading">ïƒ</a></h2>
<figure class="align-center" id="id42">
<a class="reference internal image-reference" href="../../_images/csi_example_flowchart.svg"><img alt="../../_images/csi_example_flowchart.svg" height="536" src="../../_images/csi_example_flowchart.svg" width="713" /></a>
<figcaption>
<p><span class="caption-text">Wi-Fi CSI ç¤ºä¾‹å®ç°æ¡†å›¾</span><a class="headerlink" href="#id42" title="Link to this image">ïƒ</a></p>
</figcaption>
</figure>
</section>
<section id="id15">
<h2>Wi-Fi CSI ç¤ºä¾‹è¯¦è§£<a class="headerlink" href="#id15" title="Link to this heading">ïƒ</a></h2>
<p>ç¤ºä¾‹å¦‚ä½•åµŒå…¥ Ameba SDK ä»¥åŠå¦‚ä½•ç¼–è¯‘ä»–ä»¬å¯å‚è€ƒ <a class="reference internal" href="../0_sdk_example/1_sdk_example_toprst_cn.html#id2"><span class="std std-ref">åº”ç”¨ç¤ºä¾‹</span></a>ï¼Œä¸‹é¢è¯¦è¿° Wi-Fi CSI ç¤ºä¾‹çš„å…·ä½“å®ç°ã€‚</p>
<section id="id16">
<h3>ç¤ºä¾‹åˆå§‹åŒ–<a class="headerlink" href="#id16" title="Link to this heading">ïƒ</a></h3>
<p><code class="xref py py-func docutils literal notranslate"><span class="pre">app_example()</span></code> ä¸­å®šä¹‰äº† Wi-Fi CSI ç¤ºä¾‹çš„å…¥å£å‡½æ•°ã€‚</p>
<div class="highlight-c notranslate"><div class="highlight"><pre><span></span><span class="kt">void</span><span class="w"> </span><span class="nf">app_example</span><span class="p">(</span><span class="kt">void</span><span class="p">)</span>
<span class="p">{</span>
<span class="w">   </span><span class="n">example_wifi_csi</span><span class="p">();</span><span class="w">  </span><span class="cm">/* è°ƒç”¨ Wi-Fi CSI ç¤ºä¾‹çš„å…¥å£å‡½æ•° */</span>
<span class="p">}</span>
</pre></div>
</div>
</section>
<section id="id17">
<h3>Wi-Fi CSI å…¥å£å‡½æ•°<a class="headerlink" href="#id17" title="Link to this heading">ïƒ</a></h3>
<p>Wi-Fi CSI ç¤ºä¾‹å…¥å£å‡½æ•°æ‰§è¡Œååˆ›å»ºäº†ä¸€ä¸ª CSI å¤„ç†çº¿ç¨‹ã€‚</p>
<div class="highlight-c notranslate"><div class="highlight"><pre><span></span><span class="kt">void</span><span class="w"> </span><span class="nf">example_wifi_csi</span><span class="p">(</span><span class="kt">void</span><span class="p">)</span>
<span class="p">{</span>
<span class="w">   </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="n">rtos_task_create</span><span class="p">(</span><span class="nb">NULL</span><span class="p">,</span><span class="w"> </span><span class="p">((</span><span class="k">const</span><span class="w"> </span><span class="kt">char</span><span class="w"> </span><span class="o">*</span><span class="p">)</span><span class="s">&quot;wifi_csi_thread&quot;</span><span class="p">),</span><span class="w"> </span><span class="n">wifi_csi_thread</span><span class="p">,</span><span class="w"> </span><span class="nb">NULL</span><span class="p">,</span><span class="w"> </span><span class="mi">1024</span><span class="w"> </span><span class="o">*</span><span class="w"> </span><span class="mi">4</span><span class="p">,</span><span class="w"> </span><span class="mi">0</span><span class="p">)</span><span class="w"> </span><span class="o">!=</span><span class="w"> </span><span class="n">SUCCESS</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">      </span><span class="n">RTK_LOGA</span><span class="p">(</span><span class="n">NOTAG</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;</span><span class="se">\n\r</span><span class="s">%s rtos_task_create(wifi_csi_thread) failed&quot;</span><span class="p">,</span><span class="w"> </span><span class="n">__FUNCTION__</span><span class="p">);</span>
<span class="w">   </span><span class="p">}</span>

<span class="w">   </span><span class="k">return</span><span class="p">;</span>
<span class="p">}</span>
</pre></div>
</div>
</section>
<section id="id18">
<h3>Wi-Fi CSI å¤„ç†çº¿ç¨‹<a class="headerlink" href="#id18" title="Link to this heading">ïƒ</a></h3>
<ol class="arabic">
<li><p>ç­‰å¾… Wi-Fi ä¸Šç”µå¹¶ä¸”è¿çº¿æˆåŠŸã€‚</p>
<ol class="loweralpha">
<li><p>å¦‚æœå¯ç”¨ Softap è§’è‰²ï¼Œæ— è®º STA è§’è‰²æ˜¯å¦å¤„äºè¿çº¿çŠ¶æ€ï¼ŒWi-Fi CSI åªä¼šç”± Softap è§’è‰²å‘èµ·ã€‚ç­‰åˆ°å…¶å®ƒè®¾å¤‡å…³è”ä¸Š Softap è§’è‰²åé€‰æ‹©ç¬¬ä¸€å°è¿ä¸Šè¯¥ Softap çš„è®¾å¤‡ä¸ä¹‹å¯ç”¨ Wi-Fi CSI åŠŸèƒ½ã€‚</p>
<p>å¦‚æœæ²¡æœ‰å…¶ä»–è®¾å¤‡å…³è”ä¸Š Softap è§’è‰²ï¼Œæ‰§è¡Œ <code class="docutils literal notranslate"><span class="pre">rtos_time_delay_ms(2000)</span></code>ã€‚</p>
</li>
<li><p>å¦‚æœæœªå¯ç”¨ Softap è§’è‰²ï¼Œå°†ä¼šåœ¨ STA è§’è‰²å…³è”ä¸Š realAP åå¯ç”¨ Wi-Fi CSI åŠŸèƒ½ã€‚</p>
<p>å¦‚æœ STA è§’è‰²æœªè¿çº¿æˆåŠŸï¼Œæ‰§è¡Œ <code class="docutils literal notranslate"><span class="pre">rtos_time_delay_ms(2000)</span></code>ã€‚</p>
</li>
</ol>
<div class="highlight-c notranslate"><div class="highlight"><pre><span></span><span class="k">while</span><span class="w"> </span><span class="p">(</span><span class="mi">1</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">   </span><span class="nl">NEXT</span><span class="p">:</span>
<span class="w">      </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="n">wifi_is_running</span><span class="p">(</span><span class="n">SOFTAP_WLAN_INDEX</span><span class="p">))</span><span class="w"> </span><span class="p">{</span>
<span class="w">         </span><span class="n">wifi_get_associated_client_list</span><span class="p">(</span><span class="o">&amp;</span><span class="n">client_info</span><span class="p">);</span>
<span class="w">         </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="n">client_info</span><span class="p">.</span><span class="n">count</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">            </span><span class="n">memcpy</span><span class="p">(</span><span class="n">act_param</span><span class="p">.</span><span class="n">mac_addr</span><span class="p">,</span><span class="w"> </span><span class="n">client_info</span><span class="p">.</span><span class="n">mac_list</span><span class="p">[</span><span class="mi">0</span><span class="p">].</span><span class="n">octet</span><span class="p">,</span><span class="w"> </span><span class="mi">6</span><span class="p">);</span>
<span class="w">            </span><span class="n">RTK_LOGA</span><span class="p">(</span><span class="n">NOTAG</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;### SOFTAP Break ###</span><span class="se">\r\n</span><span class="s">&quot;</span><span class="p">);</span>
<span class="w">            </span><span class="k">break</span><span class="p">;</span>
<span class="w">         </span><span class="p">}</span>
<span class="w">         </span><span class="n">rtos_time_delay_ms</span><span class="p">(</span><span class="mi">2000</span><span class="p">);</span><span class="w">  </span><span class="cm">/* 2s */</span>
<span class="w">         </span><span class="k">goto</span><span class="w"> </span><span class="n">NEXT</span><span class="p">;</span>

<span class="w">      </span><span class="p">}</span>
<span class="w">      </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="n">wifi_is_running</span><span class="p">(</span><span class="n">STA_WLAN_INDEX</span><span class="p">)</span><span class="w"> </span><span class="o">&amp;&amp;</span><span class="w"> </span><span class="p">(</span><span class="n">wifi_get_join_status</span><span class="p">()</span><span class="w"> </span><span class="o">==</span><span class="w"> </span><span class="n">RTW_JOINSTATUS_SUCCESS</span><span class="p">)</span><span class="w"> </span><span class="o">&amp;&amp;</span><span class="w"> </span><span class="p">(</span><span class="o">*</span><span class="p">(</span><span class="n">u32</span><span class="w"> </span><span class="o">*</span><span class="p">)</span><span class="n">LwIP_GetIP</span><span class="p">(</span><span class="mi">0</span><span class="p">)</span><span class="w"> </span><span class="o">!=</span><span class="w"> </span><span class="n">IP_ADDR_INVALID</span><span class="p">))</span><span class="w"> </span><span class="p">{</span>
<span class="w">         </span><span class="n">rtos_time_delay_ms</span><span class="p">(</span><span class="mi">2000</span><span class="p">);</span><span class="w">  </span><span class="cm">/* 2s */</span>
<span class="w">         </span><span class="n">RTK_LOGA</span><span class="p">(</span><span class="n">NOTAG</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;### STA Break ###</span><span class="se">\r\n</span><span class="s">&quot;</span><span class="p">);</span>
<span class="w">         </span><span class="k">break</span><span class="p">;</span>
<span class="w">      </span><span class="p">}</span>
<span class="w">      </span><span class="n">rtos_time_delay_ms</span><span class="p">(</span><span class="mi">2000</span><span class="p">);</span><span class="w">  </span><span class="cm">/* 2s */</span>
<span class="p">}</span>
</pre></div>
</div>
</li>
<li><p>æ³¨å†Œä¸€ä¸ª Wi-Fi CSI å›è°ƒå‡½æ•° <code class="xref py py-func docutils literal notranslate"><span class="pre">example_wifi_csi_report_cb()</span></code>ã€‚</p>
<div class="highlight-c notranslate"><div class="highlight"><pre><span></span><span class="cm">/* æ³¨å†Œ Wi-Fi äº‹ä»¶å›è°ƒå‡½æ•° */</span>
<span class="n">wifi_reg_event_handler</span><span class="p">(</span><span class="n">WIFI_EVENT_CSI_DONE</span><span class="p">,</span><span class="w"> </span><span class="n">example_wifi_csi_report_cb</span><span class="p">,</span><span class="w"> </span><span class="nb">NULL</span><span class="p">);</span>
</pre></div>
</div>
</li>
<li><p>åˆå§‹åŒ–ä¸€ä¸ªä¿¡å·é‡ <code class="docutils literal notranslate"><span class="pre">wc_ready_sema</span></code>ï¼Œå¹¶ä½¿ç”¨æ”¹ä¿¡å·é‡æ¥æŒ‡ç¤º Wi-Fi CSI äº‹ä»¶çš„å‘ç”Ÿã€‚</p>
<div class="highlight-c notranslate"><div class="highlight"><pre><span></span><span class="cm">/**</span>
<span class="cm">* å»ºè®®ä½¿ç”¨ä¿¡å·é‡æ¥æŒ‡ç¤º Wi-Fi äº‹ä»¶çš„å‘ç”Ÿï¼Œç¤ºä¾‹ä½¿ç”¨ä¿¡å·é‡ wc_ready_sema æ¥æ ‡è¯† Wi-Fi CSI æŠ¥æ–‡å‡†å¤‡å°±ç»ª</span>
<span class="cm">*/</span>
<span class="n">rtos_sema_create</span><span class="p">(</span><span class="o">&amp;</span><span class="n">wc_ready_sema</span><span class="p">,</span><span class="w"> </span><span class="mi">0</span><span class="p">,</span><span class="w"> </span><span class="mh">0xFFFFFFFF</span><span class="p">);</span>
<span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="o">!</span><span class="n">wc_ready_sema</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">   </span><span class="n">RTK_LOGE</span><span class="p">(</span><span class="n">NOTAG</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;</span><span class="se">\r\n</span><span class="s">Init wc_ready_sema failed</span><span class="se">\r\n\n</span><span class="s">&quot;</span><span class="p">);</span>
<span class="p">}</span>
</pre></div>
</div>
</li>
<li><p>Wi-Fi CSI ç›¸å…³å‚æ•°è¿›è¡Œèµ‹å€¼ï¼ˆç¤ºä¾‹ç»™å‡º <strong>æ–¹æ³•ä¸€/æ–¹æ³•äºŒ</strong> çš„é…ç½®ï¼‰ã€‚</p>
<div class="highlight-c notranslate"><div class="highlight"><pre><span></span><span class="cm">/* Wi-Fi CSI å‚æ•°èµ‹å€¼ */</span>
<span class="n">act_param</span><span class="p">.</span><span class="n">group_num</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">CSI_GROUP_NUM_1</span><span class="p">;</span>
<span class="n">act_param</span><span class="p">.</span><span class="n">mode</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">CSI_MODE_RX_RESP</span><span class="p">;</span>
<span class="n">act_param</span><span class="p">.</span><span class="n">accuracy</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">CSI_ACCU_1BYTE</span><span class="p">;</span>
<span class="n">act_param</span><span class="p">.</span><span class="n">trig_period</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">200</span><span class="p">;</span><span class="w">     </span><span class="cm">/* å•ä½: 320 å¾®ç§’ */</span>
<span class="n">act_param</span><span class="p">.</span><span class="n">data_rate</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">MGN_6M</span><span class="p">;</span><span class="w">    </span><span class="cm">/* OFDM 6 Mbps */</span>
<span class="n">act_param</span><span class="p">.</span><span class="n">trig_frame_mgnt</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">0</span><span class="p">;</span><span class="w">   </span><span class="cm">/* Rx Resp Mode æ— éœ€é…ç½®ï¼Œé»˜è®¤è®¾ 0 */</span>
<span class="n">act_param</span><span class="p">.</span><span class="n">trig_frame_ctrl</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">0</span><span class="p">;</span><span class="w">   </span><span class="cm">/* Rx Resp Mode æ— éœ€é…ç½®ï¼Œé»˜è®¤è®¾ 0 */</span>
<span class="n">act_param</span><span class="p">.</span><span class="n">trig_frame_data</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">0</span><span class="p">;</span><span class="w">   </span><span class="cm">/* Rx Resp Mode æ— éœ€é…ç½®ï¼Œé»˜è®¤è®¾ 0 */</span>
<span class="n">act_param</span><span class="p">.</span><span class="n">csi_role</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">CSI_OP_ROLE_TRX</span><span class="p">;</span>
</pre></div>
</div>
</li>
<li><p>é…ç½®å‚æ•°å¹¶å¯ç”¨ Wi-Fi CSI åŠŸèƒ½ã€‚</p>
<div class="highlight-c notranslate"><div class="highlight"><pre><span></span><span class="cm">/* Wi-Fi CSI å‚æ•°é…ç½®å’ŒåŠŸèƒ½å¯ç”¨ */</span>
<span class="n">act_param</span><span class="p">.</span><span class="n">act</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">CSI_ACT_CFG</span><span class="p">;</span><span class="w">  </span><span class="cm">/* å‚æ•°é…ç½® */</span>
<span class="n">wifi_csi_config</span><span class="p">(</span><span class="o">&amp;</span><span class="n">act_param</span><span class="p">);</span>

<span class="n">act_param</span><span class="p">.</span><span class="n">act</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">CSI_ACT_EN</span><span class="p">;</span><span class="w">  </span><span class="cm">/* åŠŸèƒ½å¯ç”¨ */</span>
<span class="n">act_param</span><span class="p">.</span><span class="n">enable</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">1</span><span class="p">;</span>
<span class="n">wifi_csi_config</span><span class="p">(</span><span class="o">&amp;</span><span class="n">act_param</span><span class="p">);</span>
</pre></div>
</div>
</li>
<li><p>ç­‰å¾…ä¿¡å·é‡ <code class="docutils literal notranslate"><span class="pre">wc_ready_sema</span></code> å°±ç»ªåè°ƒç”¨ API <code class="xref py py-func docutils literal notranslate"><span class="pre">wifi_csi_report()</span></code> è·å– Wi-Fi CSI æŠ¥æ–‡ã€‚</p>
<div class="highlight-c notranslate"><div class="highlight"><pre><span></span><span class="k">while</span><span class="w"> </span><span class="p">(</span><span class="mi">1</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">   </span><span class="cm">/* ç¤ºä¾‹ï¼šè·å–åˆ° Wi-Fi CSI æŠ¥æ–‡åï¼Œé’ˆå¯¹æŠ¥æ–‡åšä¸€äº›ç›¸å…³å¤„ç† */</span>
<span class="w">   </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="n">rtos_sema_take</span><span class="p">(</span><span class="n">wc_ready_sema</span><span class="p">,</span><span class="w"> </span><span class="mh">0xFFFFFFFF</span><span class="p">)</span><span class="w"> </span><span class="o">!=</span><span class="w"> </span><span class="n">SUCCESS</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">      </span><span class="n">rtos_sema_delete</span><span class="p">(</span><span class="n">wc_ready_sema</span><span class="p">);</span>

<span class="w">      </span><span class="n">act_param</span><span class="p">.</span><span class="n">act</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">CSI_ACT_EN</span><span class="p">;</span><span class="w">  </span><span class="cm">/* csi dis */</span>
<span class="w">      </span><span class="n">act_param</span><span class="p">.</span><span class="n">enable</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">0</span><span class="p">;</span>
<span class="w">      </span><span class="n">wifi_csi_config</span><span class="p">(</span><span class="o">&amp;</span><span class="n">act_param</span><span class="p">);</span>
<span class="w">      </span><span class="k">break</span><span class="p">;</span>
<span class="w">   </span><span class="p">}</span>

<span class="w">   </span><span class="n">csi_buf</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">rtos_mem_malloc</span><span class="p">(</span><span class="n">csi_data_len</span><span class="p">);</span>
<span class="w">   </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="n">csi_buf</span><span class="w"> </span><span class="o">!=</span><span class="w"> </span><span class="nb">NULL</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">      </span><span class="n">wifi_csi_report</span><span class="p">(</span><span class="n">csi_data_len</span><span class="p">,</span><span class="w"> </span><span class="n">csi_buf</span><span class="p">,</span><span class="w"> </span><span class="o">&amp;</span><span class="n">len</span><span class="p">);</span>

<span class="w">      </span><span class="cm">/* Wi-Fi CSI æŠ¥æ–‡å¤„ç†ï¼šä¾‹å¦‚æ•°æ®æ‰“å° */</span>
<span class="w">      </span><span class="n">wifi_csi_show</span><span class="p">(</span><span class="n">csi_buf</span><span class="p">);</span>

<span class="w">   </span><span class="p">}</span><span class="w"> </span><span class="k">else</span><span class="w"> </span><span class="p">{</span>
<span class="w">      </span><span class="n">RTK_LOGE</span><span class="p">(</span><span class="n">NOTAG</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;</span><span class="se">\r\n</span><span class="s"> csi_buf malloc fail</span><span class="se">\r\n</span><span class="s">&quot;</span><span class="p">);</span>
<span class="w">   </span><span class="p">}</span>

<span class="w">   </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="n">csi_buf</span><span class="w"> </span><span class="o">!=</span><span class="w"> </span><span class="nb">NULL</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">      </span><span class="n">rtos_mem_free</span><span class="p">(</span><span class="n">csi_buf</span><span class="p">);</span>
<span class="w">   </span><span class="p">}</span>
<span class="p">}</span>
</pre></div>
</div>
</li>
<li><p>ç»“æŸ</p>
<ol class="loweralpha simple">
<li><p>åœç”¨ Wi-Fi CSI å¹¶é‡Šæ”¾ Wi-Fi CSI å›è°ƒå‡½æ•°</p></li>
<li><p>é”€æ¯ä¿¡å·é‡ <code class="docutils literal notranslate"><span class="pre">wc_ready_sema</span></code></p></li>
<li><p>ä»»åŠ¡åˆ é™¤</p></li>
</ol>
<div class="highlight-c notranslate"><div class="highlight"><pre><span></span><span class="cm">/* é‡Šæ”¾ Wi-Fi äº‹ä»¶å›è°ƒå‡½æ•° */</span>
<span class="n">wifi_unreg_event_handler</span><span class="p">(</span><span class="n">WIFI_EVENT_CSI_DONE</span><span class="p">,</span><span class="w"> </span><span class="n">example_wifi_csi_report_cb</span><span class="p">);</span>

<span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="n">wc_ready_sema</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">   </span><span class="n">rtos_sema_delete</span><span class="p">(</span><span class="n">wc_ready_sema</span><span class="p">);</span>
<span class="p">}</span>

<span class="n">rtos_task_delete</span><span class="p">(</span><span class="nb">NULL</span><span class="p">);</span>
</pre></div>
</div>
</li>
</ol>
</section>
<section id="id19">
<h3>Wi-Fi CSI å›è°ƒå‡½æ•°<a class="headerlink" href="#id19" title="Link to this heading">ïƒ</a></h3>
<p>å½“ Wi-Fi é©±åŠ¨ç¨‹åºå‡†å¤‡å¥½ä¸€ç¬” CSI æŠ¥æ–‡åï¼Œå°†ä¼šå€ŸåŠ© Wi-Fi CSI å›è°ƒå‡½æ•°å‘åº”ç”¨ç¨‹åºå‘é€ä¸€ä¸ªä¿¡å·ã€‚ä¾‹å¦‚ï¼Œåº”ç”¨ç¨‹åºå¯ä»¥åœ¨å›è°ƒå‡½æ•°ä¸­é‡Šæ”¾ä¸€ä¸ªä¿¡å·é‡ä»¥è§¦å‘ <code class="xref py py-func docutils literal notranslate"><span class="pre">wifi_csi_thread()</span></code> æ¥è·å– Wi-Fi CSI æŠ¥æ–‡ã€‚</p>
<div class="admonition note">
<p class="admonition-title">å¤‡æ³¨</p>
<ul class="simple">
<li><p>å°½é‡é¿å…å›è°ƒå‡½æ•°ä¸­è¿›è¡Œå¤§é‡è€—æ—¶çš„æ“ä½œï¼Œå¦åˆ™ä¼šå½±å“åˆ°æ¥æ”¶æ€§èƒ½ã€‚</p></li>
<li><p>åº”ç”¨ç¨‹åºå¯ä»¥ä½¿ç”¨å‚æ•° <code class="docutils literal notranslate"><span class="pre">flags</span></code>ï¼Œè¿™ä¸ªå‚æ•°æŒ‡ç¤º Wi-Fi CSI æŠ¥æ–‡çš„å¤§å°ã€‚</p></li>
</ul>
</div>
<div class="highlight-c notranslate"><div class="highlight"><pre><span></span><span class="kt">void</span><span class="w"> </span><span class="nf">example_wifi_csi_report_cb</span><span class="p">(</span><span class="kt">char</span><span class="w"> </span><span class="o">*</span><span class="n">buf</span><span class="p">,</span><span class="w"> </span><span class="kt">int</span><span class="w"> </span><span class="n">buf_len</span><span class="p">,</span><span class="w"> </span><span class="kt">int</span><span class="w"> </span><span class="n">flags</span><span class="p">,</span><span class="w"> </span><span class="kt">void</span><span class="w"> </span><span class="o">*</span><span class="n">userdata</span><span class="p">)</span>
<span class="p">{</span>
<span class="w">   </span><span class="p">(</span><span class="kt">void</span><span class="p">)</span><span class="n">buf</span><span class="p">;</span>
<span class="w">   </span><span class="p">(</span><span class="kt">void</span><span class="p">)</span><span class="n">buf_len</span><span class="p">;</span>
<span class="w">   </span><span class="p">(</span><span class="kt">void</span><span class="p">)</span><span class="n">userdata</span><span class="p">;</span>
<span class="w">   </span><span class="n">rtos_sema_give</span><span class="p">(</span><span class="n">wc_ready_sema</span><span class="p">);</span><span class="w">  </span><span class="cm">/* è§¦å‘çº¿ç¨‹æ‰§è¡Œ */</span>
<span class="w">   </span><span class="n">csi_data_len</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">flags</span><span class="p">;</span><span class="w">           </span><span class="cm">/* åº”ç”¨ç¨‹åºå‚è€ƒ flags æ¥ç”³è¯·ç¼“å­˜å¤§å° */</span>
<span class="w">   </span><span class="k">return</span><span class="p">;</span>
<span class="p">}</span>
</pre></div>
</div>
</section>
</section>
</section>


           </div>
          </div>
          <footer><div class="rst-footer-buttons" role="navigation" aria-label="é¡µè„š">
        <a href="0_wifi_csi_index_cn.html" class="btn btn-neutral float-left" title="Wi-Fi CSI" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left" aria-hidden="true"></span> ä¸Šä¸€é¡µ</a>
        <a href="../2_wifi_adaptivity_test/0_wifi_adaptivity_index_cn.html" class="btn btn-neutral float-right" title="Wi-Fi Adaptivity Test" accesskey="n" rel="next">ä¸‹ä¸€é¡µ <span class="fa fa-arrow-circle-right" aria-hidden="true"></span></a>
    </div>

  <hr/>

  <div role="contentinfo">
    <p>&#169; ç‰ˆæƒæ‰€æœ‰ 2025, Realsilã€‚</p>
  </div>

  åˆ©ç”¨ <a href="https://www.sphinx-doc.org/">Sphinx</a> æ„å»ºï¼Œä½¿ç”¨çš„ 
    <a href="https://github.com/readthedocs/sphinx_rtd_theme">ä¸»é¢˜</a>
    ç”± <a href="https://readthedocs.org">Read the Docs</a> å¼€å‘.
   

</footer>
        </div>
    <!-- é—®é¢˜åé¦ˆæŒ‰é’®å’Œå¯¹è¯æ¡† -->
    
    <div id="feedback-dialog" class="feedback-dialog" style="display: none;">
        <p>Please describe your issue:</p>
        <textarea id="feedback-text" placeholder="Feature enhancement in progress, please stay tuned..."></textarea>
        <button id="submit-feedback">Submit</button>
        <button id="cancel-feedback">Cancel</button>
    </div>

      </div>
    </section>
  </div>
  <script>
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script>
     
    


</body>
</html>