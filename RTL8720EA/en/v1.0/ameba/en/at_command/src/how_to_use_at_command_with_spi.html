<!DOCTYPE html>
<html class="writer-html5" lang="en" data-content_root="../../../../">
<head>
  <meta charset="utf-8" /><meta name="viewport" content="width=device-width, initial-scale=1" />

  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>How to Use AT Command with SPI &mdash; RTL8720EA Docs  documentation</title>
      <link rel="stylesheet" type="text/css" href="../../../../_static/pygments.css?v=80d5e7a1" />
      <link rel="stylesheet" type="text/css" href="../../../../_static/css/theme.css?v=19f00094" />
      <link rel="stylesheet" type="text/css" href="../../../../_static/togglebutton.css?v=13237357" />
      <link rel="stylesheet" type="text/css" href="../../../../_static/tabs.css?v=a5c4661c" />

  
    <link rel="shortcut icon" href="../../../../_static/favicon.ico"/>
  <!--[if lt IE 9]>
    <script src="../../../../_static/js/html5shiv.min.js"></script>
  <![endif]-->
  
        <script src="../../../../_static/jquery.js?v=5d32c60e"></script>
        <script src="../../../../_static/_sphinx_javascript_frameworks_compat.js?v=2cd50e6c"></script>
        <script src="../../../../_static/documentation_options.js?v=5929fcd5"></script>
        <script src="../../../../_static/doctools.js?v=9a2dae69"></script>
        <script src="../../../../_static/sphinx_highlight.js?v=dc90522c"></script>
        <script src="../../../../_static/toggleprompt.js?v=d7ede5d2"></script>
        <script>let toggleHintShow = 'Click to show';</script>
        <script>let toggleHintHide = 'Click to hide';</script>
        <script>let toggleOpenOnPrint = 'true';</script>
        <script src="../../../../_static/togglebutton.js?v=4a39c7ea"></script>
        <script>var togglebuttonSelector = '.toggle, .admonition.dropdown';</script>
        <script>var togglebuttonSelector = '.toggle, .admonition.dropdown';</script>
    <script src="../../../../_static/js/theme.js"></script>
    <link rel="index" title="Index" href="../../../../genindex.html" />
    <link rel="search" title="Search" href="../../../../search.html" />
    <link rel="next" title="Software Tools" href="../../software_tools/index.html" />
    <link rel="prev" title="File System AT Commands" href="file_system_at_command.html" />  
     
  <link href="https://cdn.jsdelivr.net/npm/sweetalert2@11/dist/sweetalert2.min.css" rel="stylesheet">
  <script src="https://cdn.jsdelivr.net/npm/sweetalert2@11"></script>
  <script type="text/javascript" src="../../../../_static/js/selector.js"></script>
<style>
      .wy-nav-content {
      max-width: 1000px; /* 设置最大宽度 */
      }
</style>



</head>

<body class="wy-body-for-nav"> 
  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >

          
          
          <a href="../../../../index.html" class="icon icon-home">
            RTL8720EA Docs
          </a>
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../../../../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" aria-label="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>
        </div><div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
              <ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../../../../product_overview/src/index.html">Product Overview</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../../application_note/index.html">Application Note</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../fullmac/src/index.html">FullMAC</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../wifi/index.html">Wi-Fi Guide</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../wifi_tunnel/src/index.html">Wi-Fi R-Mesh</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../wifi_bridge/src/index.html">Wi-Fi Bridge</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../wifi_csi/src/index.html">Wi-Fi CSI</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../dsp/index.html">DSP</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../usb/usb_otg/src/index.html">USB Host &amp; Device</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../audio/src/index.html">Audio</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../multimedia/src/index.html">Multimedia</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../gui/src/index.html">GUI</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../ai/index.html">AI</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../ai_voice/src/index.html">AIVoice</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../low_power/src/index.html">Low Power Solution</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../security_encryption/src/index.html">Security &amp; Encryption</a></li>
<li class="toctree-l1 current"><a class="reference internal" href="index.html">AT Command</a><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="introduction.html">Introduction</a></li>
<li class="toctree-l2"><a class="reference internal" href="common_at_command.html">Common AT Commands</a></li>
<li class="toctree-l2"><a class="reference internal" href="wifi_at_command.html">Wi-Fi AT Commands</a></li>
<li class="toctree-l2"><a class="reference internal" href="mqtt_at_command.html">MQTT AT Commands</a></li>
<li class="toctree-l2"><a class="reference internal" href="http_at_command.html">HTTP AT Commands</a></li>
<li class="toctree-l2"><a class="reference internal" href="websocket_at_command.html">WebSocket AT Commands</a></li>
<li class="toctree-l2"><a class="reference internal" href="tcp_ip_at_command.html">TCP/IP AT Commands</a></li>
<li class="toctree-l2"><a class="reference internal" href="bluetooth_at_command.html">Bluetooth AT Commands</a></li>
<li class="toctree-l2"><a class="reference internal" href="file_system_at_command.html">File System AT Commands</a></li>
<li class="toctree-l2 current"><a class="current reference internal" href="#">How to Use AT Command with SPI</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#introduction">Introduction</a></li>
<li class="toctree-l3"><a class="reference internal" href="#default-spi-at-command-module-pins">Default SPI AT Command Module Pins</a></li>
<li class="toctree-l3"><a class="reference internal" href="#use-at-command-with-spi">Use AT Command with SPI</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#communication-format">Communication Format</a></li>
<li class="toctree-l4"><a class="reference internal" href="#spi-at-command-interaction-process">SPI AT Command Interaction Process</a></li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../../software_tools/index.html">Software Tools</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../mp_tools/src/index.html">MP Tools</a></li>
</ul>

        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap"><nav class="wy-nav-top" aria-label="Mobile navigation menu" >
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../../../../index.html">RTL8720EA Docs</a>
      </nav>

      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="Page navigation">
  <ul class="wy-breadcrumbs">
      <li><a href="../../../../index.html" class="icon icon-home" aria-label="Home"></a></li>
          <li class="breadcrumb-item"><a href="index.html">AT Command</a></li>
      <li class="breadcrumb-item active">How to Use AT Command with SPI</li>
      <li class="wy-breadcrumbs-aside">
      </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
             
  <section id="how-to-use-at-command-with-spi">
<h1>How to Use AT Command with SPI<a class="headerlink" href="#how-to-use-at-command-with-spi" title="Link to this heading"></a></h1>
<section id="introduction">
<h2>Introduction<a class="headerlink" href="#introduction" title="Link to this heading"></a></h2>
<p>When utilizing an AT Command module via an SPI port, MCU devices act as SPI masters and the AT Command device functions as an SPI slave.
Data exchange for AT commands between both parties is conducted through the SPI protocol and a specific communication format.
Compared to the default UART port, the SPI port offers advantages in scenarios requiring high-speed data transfer.</p>
<p>You can refer to <a class="reference internal" href="introduction.html#atcmd-mcu-control-mode-configuration"><span class="std std-ref">AT Command MCU Control Mode Configuration</span></a> to enable the SPI port.
If no pins are configured, the AT Command module will use the default pins, including SPI MOSI, MISO, CLK, CS, as well as two synchronization pins.</p>
</section>
<section id="default-spi-at-command-module-pins">
<h2>Default SPI AT Command Module Pins<a class="headerlink" href="#default-spi-at-command-module-pins" title="Link to this heading"></a></h2>
<p>For different chips, the default SPI AT Command module pins are listed in the following table.</p>
<table class="docutils align-default" id="id2" style="width: 100%">
<caption><span class="caption-text">Default SPI AT Command module pins for chips</span><a class="headerlink" href="#id2" title="Link to this table"></a></caption>
<thead>
<tr class="row-odd"><th class="head"><p>Chip name</p></th>
<th class="head"><p>SPI MOSI</p></th>
<th class="head"><p>SPI MISO</p></th>
<th class="head"><p>SPI CLK</p></th>
<th class="head"><p>SPI CS</p></th>
<th class="head"><p>MASTER SYNC PIN</p></th>
<th class="head"><p>SLAVE SYNC PIN</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td rowspan="4"><p>RTL8726EA</p>
<p>RTL8713EC</p>
<p>RTL8720EA</p>
<p>RTL8710EC</p>
</td>
<td rowspan="4"><p>PA_29</p></td>
<td rowspan="4"><p>PA_30</p></td>
<td rowspan="4"><p>PA_28</p></td>
<td rowspan="4"><p>PA_31</p></td>
<td rowspan="4"><p>PB_2</p></td>
<td rowspan="4"><p>PB_3</p></td>
</tr>
<tr class="row-odd"></tr>
<tr class="row-even"></tr>
<tr class="row-odd"></tr>
</tbody>
</table>
</section>
<section id="use-at-command-with-spi">
<h2>Use AT Command with SPI<a class="headerlink" href="#use-at-command-with-spi" title="Link to this heading"></a></h2>
<p>For example code on using SPI master to communicate with an SPI slave, please refer to <code class="docutils literal notranslate"><span class="pre">{SDK}component/example/atcmd_host/spi_master/example_spi_master.c</span></code>.
Before starting development on an MCU, it is highly recommended to run the example code to verify that the wiring and configuration are correct.
After this, you can refer to our host example to adapt it to the specific MCU platform application you intend to use.</p>
<p>In the example code, we added an UART task to receive AT commands and print the AT responses.The overall data flow diagram is as follows:</p>
<figure class="align-center" id="id4">
<a class="reference internal image-reference" href="../../../../_images/spi_at_data_flow.svg"><img alt="../../../../_images/spi_at_data_flow.svg" height="79" src="../../../../_images/spi_at_data_flow.svg" width="588" /></a>
<figcaption>
<p><span class="caption-text">SPI AT Command data flow</span><a class="headerlink" href="#id4" title="Link to this image"></a></p>
</figcaption>
</figure>
<section id="communication-format">
<h3>Communication Format<a class="headerlink" href="#communication-format" title="Link to this heading"></a></h3>
<p>When the SPI AT Command host sends AT commands or transparent data, or receives AT responses from the AT Command module, the following format must be used.</p>
<table class="docutils align-default" id="id5" style="width: 100%">
<caption><span class="caption-text">SPI AT Command communication format</span><a class="headerlink" href="#id5" title="Link to this table"></a></caption>
<tbody>
<tr class="row-odd"><td><p>Magic Number(2 bytes)</p></td>
<td><p>Data Len(2 bytes)</p></td>
<td><p>Data(Data Len bytes)</p></td>
<td><p>Checksum(4 bytes)</p></td>
</tr>
</tbody>
</table>
<p>Where:</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">Magic</span> <span class="pre">Number</span></code>: “AT” in ASCII code.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">Data</span> <span class="pre">Len</span></code>: Data length in bytes.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">Checksum</span></code>: CRC32 checksum of all except Checksum field.</p></li>
</ul>
</section>
<section id="spi-at-command-interaction-process">
<h3>SPI AT Command Interaction Process<a class="headerlink" href="#spi-at-command-interaction-process" title="Link to this heading"></a></h3>
<p>The SPI AT Command exchange process mainly consists of two aspects:</p>
<ul class="simple">
<li><p>SPI master sends AT command to slave:</p></li>
</ul>
<figure class="align-center" id="id6">
<a class="reference internal image-reference" href="../../../../_images/spi_master_send_at_command_to_slave.svg"><img alt="../../../../_images/spi_master_send_at_command_to_slave.svg" height="231" src="../../../../_images/spi_master_send_at_command_to_slave.svg" width="397" /></a>
<figcaption>
<p><span class="caption-text">SPI master sends AT command to slave</span><a class="headerlink" href="#id6" title="Link to this image"></a></p>
</figcaption>
</figure>
<p>The specific instructions for each step are as follows:</p>
<blockquote>
<div><p>Step 1: SPI master signals the SPI slave to prepare for data reception by pulling down the Master Sync Pin.</p>
<p>Step 2: SPI slave receives the master’s request through a GPIO interrupt and, upon preparing to receive data,
informs the master that it can transmit data by pulling up the Slave Sync Pin.</p>
<p>Step 3:  SPI master begins data transmission, and after the transmission is complete, both the master
and the slave reset their respective Sync Pins to their initial states.</p>
</div></blockquote>
<ul class="simple">
<li><p>SPI slave sends AT command response to master:</p></li>
</ul>
<figure class="align-center" id="id7">
<a class="reference internal image-reference" href="../../../../_images/spi_slave_send_response_to_master.svg"><img alt="../../../../_images/spi_slave_send_response_to_master.svg" height="207" src="../../../../_images/spi_slave_send_response_to_master.svg" width="397" /></a>
<figcaption>
<p><span class="caption-text">SPI slave sends AT command response to master</span><a class="headerlink" href="#id7" title="Link to this image"></a></p>
</figcaption>
</figure>
<p>The specific instructions for each step are as follows:</p>
<blockquote>
<div><p>Step 1: SPI slave signals the master that it is ready to receive the AT command response by pulling up the Slave Sync Pin.</p>
<p>Step 2: SPI master begins receiving data, and after the transmission is complete, the slave resets the Slave Sync Pin to its initial state.</p>
</div></blockquote>
</section>
</section>
</section>


           </div>
          </div>
          <footer><div class="rst-footer-buttons" role="navigation" aria-label="Footer">
        <a href="file_system_at_command.html" class="btn btn-neutral float-left" title="File System AT Commands" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left" aria-hidden="true"></span> Previous</a>
        <a href="../../software_tools/index.html" class="btn btn-neutral float-right" title="Software Tools" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right" aria-hidden="true"></span></a>
    </div>

  <hr/>

  <div role="contentinfo">
    <p>&#169; Copyright 2025, Realsil.</p>
  </div>

  Built with <a href="https://www.sphinx-doc.org/">Sphinx</a> using a
    <a href="https://github.com/readthedocs/sphinx_rtd_theme">theme</a>
    provided by <a href="https://readthedocs.org">Read the Docs</a>.
   

</footer>
        </div>
      </div>
    </section>
  </div>
  <script>
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script> 

</body>
</html>