

<!DOCTYPE html>
<html class="writer-html5" lang="zh-CN" data-content_root="../../">
<head>
  <meta charset="utf-8" /><meta name="viewport" content="width=device-width, initial-scale=1" />

  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Introduction &mdash; Ameba IoT Docs  文档</title>
      <link rel="stylesheet" type="text/css" href="../../_static/pygments.css?v=80d5e7a1" />
      <link rel="stylesheet" type="text/css" href="../../_static/css/theme.css?v=19f00094" />
      <link rel="stylesheet" type="text/css" href="../../_static/togglebutton.css?v=13237357" />
      <link rel="stylesheet" type="text/css" href="../../_static/custom_cn.css?v=0d22fac7" />
      <link rel="stylesheet" type="text/css" href="../../_static/tabs.css?v=a5c4661c" />
      <link rel="stylesheet" type="text/css" href="../../_static/_static/custom_cn.css" />

  
    <link rel="shortcut icon" href="../../_static/favicon.ico"/>
  <!--[if lt IE 9]>
    <script src="../../_static/js/html5shiv.min.js"></script>
  <![endif]-->
  
        <script src="../../_static/jquery.js?v=5d32c60e"></script>
        <script src="../../_static/_sphinx_javascript_frameworks_compat.js?v=2cd50e6c"></script>
        <script src="../../_static/documentation_options.js?v=7d86a446"></script>
        <script src="../../_static/doctools.js?v=9a2dae69"></script>
        <script src="../../_static/sphinx_highlight.js?v=dc90522c"></script>
        <script src="../../_static/toggleprompt.js?v=d7ede5d2"></script>
        <script>let toggleHintShow = 'Click to show';</script>
        <script>let toggleHintHide = 'Click to hide';</script>
        <script>let toggleOpenOnPrint = 'true';</script>
        <script src="../../_static/togglebutton.js?v=4a39c7ea"></script>
        <script src="../../_static/translations.js?v=beaddf03"></script>
        <script>var togglebuttonSelector = '.toggle, .admonition.dropdown';</script>
        <script>var togglebuttonSelector = '.toggle, .admonition.dropdown';</script>
    <script src="../../_static/js/theme.js"></script>
    <link rel="index" title="索引" href="../../genindex.html" />
    <link rel="search" title="搜索" href="../../search.html" />
    <link rel="next" title="Serial Peripheral Interface (SPI)" href="../8_spi/0_spi_index_cn.html" />
    <link rel="prev" title="LCD控制器（LCDC）" href="0_lcdc_index_cn.html" />
   
  
  <script type="text/javascript" src="../../_static/js/selector.js"></script>

  <style>
    .wy-nav-content {max-width: 1000px;} /* 设置最大宽度 */
  </style>

</head>

<body class="wy-body-for-nav"> 
  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >

          
          
          <a href="../../index.html" class="icon icon-home">
            Ameba IoT Docs
          </a>
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../../search.html" method="get">
    <input type="text" name="q" placeholder="搜索文档" aria-label="搜索文档" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>
        </div><div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="导航菜单">
              <ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../../rst_rtos/0_ameba_product/0_ameba_product_center_index_cn.html">产品中心</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../rst_rtos/0_ameba_sdk/0_ameba_sdks_index_cn.html">Ameba SDK</a></li>
<li class="toctree-l1"><a class="reference internal" href="../0_release_packages/0_release_packages_index_cn.html">0.0 释放包</a></li>
<li class="toctree-l1"><a class="reference internal" href="../0_gcc_build_environment/0_gcc_build_index_cn.html">0.1 GCC 编译环境</a></li>
<li class="toctree-l1"><a class="reference internal" href="../0_sdk_architecture/0_sdk_architecture_index_cn.html">0.2 SDK 架构</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../rst_rtos/0_tools/0_tools_index_cn.html">0.7 工具</a></li>
<li class="toctree-l1"><a class="reference internal" href="../0_question_help/0_question_help_index_cn.html">0.A 问题与帮助</a></li>
<li class="toctree-l1"><a class="reference internal" href="../0_debugging/0_debugging_index_cn.html">0.B 系统调试</a></li>
<li class="toctree-l1"><a class="reference internal" href="../1_boot_process/0_boot_index_cn.html">1.1 启动流程</a></li>
<li class="toctree-l1"><a class="reference internal" href="../1_ota/0_ota_index_cn.html">1.2 固件在线升级（OTA）</a></li>
<li class="toctree-l1"><a class="reference internal" href="../1_otpc/0_otpc_index_cn.html">1.3 OTP 存储器</a></li>
<li class="toctree-l1"><a class="reference internal" href="../1_flash/0_flash_index_cn.html">1.4 闪存</a></li>
<li class="toctree-l1"><a class="reference internal" href="../1_gpio/0_gpio_index_cn.html">1.7 通用输入输出端口</a></li>
<li class="toctree-l1"><a class="reference internal" href="../1_power_save/0_ps_index_cn.html">1.8 电源管理</a></li>
<li class="toctree-l1"><a class="reference internal" href="../3_nda_secure_boot/0_secure_boot_index_nda_cn.html">3.6 安全启动</a></li>
<li class="toctree-l1"><a class="reference internal" href="../7_usb_boot/0_usb_boot_index_cn.html">3.7 USB 启动</a></li>
<li class="toctree-l1"><a class="reference internal" href="../3_crypto_engine/0_crypto_engine_index_cn.html">3.8 加密引擎</a></li>
<li class="toctree-l1"><a class="reference internal" href="../4_multimedia/0_multimedia_index_cn.html">4.3 多媒体</a></li>
<li class="toctree-l1"><a class="reference internal" href="../7_usb/0_usb_index_cn.html">7.1 USB 主机与设备</a></li>
<li class="toctree-l1"><a class="reference internal" href="../7_sdio/0_sdioh_index_cn.html">7.2 SDIO 主机</a></li>
<li class="toctree-l1"><a class="reference internal" href="../8_dmac/0_dmac_index_cn.html">8.1 DMA 控制器</a></li>
<li class="toctree-l1"><a class="reference internal" href="../8_rtc/0_rtc_index_cn.html">8.2 实时时钟（RTC）</a></li>
<li class="toctree-l1"><a class="reference internal" href="../8_thermal/0_thermal_index_cn.html">8.3 热计量器（Thermel）</a></li>
<li class="toctree-l1"><a class="reference internal" href="../8_adc/0_adc_index_cn.html">8.4 模数转换器（ADC）</a></li>
<li class="toctree-l1"><a class="reference internal" href="../8_cap_touch/0_cap_touch_index_cn.html">8.5 电容触摸（Cap-touch）</a></li>
<li class="toctree-l1"><a class="reference internal" href="../8_ir/0_ir_index_cn.html">8.6 红外收发器（IR）</a></li>
<li class="toctree-l1"><a class="reference internal" href="../8_ledc/0_ledc_index_cn.html">8.7 LED 灯控制器</a></li>
<li class="toctree-l1"><a class="reference internal" href="../8_i2c/0_i2c_index_cn.html">8.8 集成电路间通信（I2C）</a></li>
<li class="toctree-l1"><a class="reference internal" href="../8_uart/0_uart_index_cn.html">8.9 通用异步收发传输器（UART）</a></li>
<li class="toctree-l1 current"><a class="reference internal" href="0_lcdc_index_cn.html">8.A 液晶显示控制器（LCDC）</a><ul class="current">
<li class="toctree-l2 current"><a class="current reference internal" href="#">Introduction</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#architecture">Architecture</a></li>
<li class="toctree-l3"><a class="reference internal" href="#implementation">Implementation</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#configuration">Configuration</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#dts-configure">DTS Configure</a></li>
<li class="toctree-l3"><a class="reference internal" href="#build-configuration">Build Configuration</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#apis">APIs</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#apis-for-user-space">APIs for User Space</a></li>
<li class="toctree-l3"><a class="reference internal" href="#apis-for-kernel-space">APIs for Kernel Space</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#lcdc-function-interfaces">LCDC Function Interfaces</a></li>
<li class="toctree-l4"><a class="reference internal" href="#mipi-dsi-function-interfaces">MIPI_DSI Function Interfaces</a></li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../8_spi/0_spi_index_cn.html">8.B 串行外设接口（SPI）</a></li>
<li class="toctree-l1"><a class="reference internal" href="../8_spic/0_spic_index_cn.html">8.C SPI 闪存控制器</a></li>
<li class="toctree-l1"><a class="reference internal" href="../8_timer/0_timer_index_cn.html">8.D 计时器</a></li>
<li class="toctree-l1"><a class="reference internal" href="../8_wdg/0_wdg_index_cn.html">8.E 看门狗</a></li>
<li class="toctree-l1"><a class="reference internal" href="../9_bluetooth/0_bluetooth_index_cn.html">9.1 蓝牙</a></li>
</ul>

        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap"><nav class="wy-nav-top" aria-label="移动版导航菜单" >
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../../index.html">Ameba IoT Docs</a>
      </nav>

      <div class="wy-nav-content">

        <div class="rst-content">
          <div role="navigation" aria-label="页面导航">
  <ul class="wy-breadcrumbs">
      <li><a href="../../index.html" class="icon icon-home" aria-label="Home"></a></li>
          <li class="breadcrumb-item"><a href="0_lcdc_index_cn.html">LCD控制器（LCDC）</a></li>
      <li class="breadcrumb-item active">Introduction</li>
      <li class="wy-breadcrumbs-aside">
      </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
             
  <p id="lcdc">The LCD-TFT (Liquid Crystal Display-Thin Film Transistor) display controller provides a 24-bit parallel digital RGB (Red, Green, Blue) and delivers all signals to VO interface, which can be used by MIPI Display Serial Interface directly to a broad range of LCD and TFT panels.</p>
<section id="introduction">
<h1>Introduction<a class="headerlink" href="#introduction" title="Link to this heading"></a></h1>
<p>Realtek LCDC driver follows Linux’s DRM Framework architecture. The Linux Direct Rendering Manager (DRM) layer contains code intended to support the needs of complex graphics devices. Graphics drivers in the kernel may make use of DRM functions to make tasks like memory management, interrupt handling and DMA easier, and provide a uniform interface to applications.</p>
<p>The LCDC driver basically consists of two parts:</p>
<ul class="simple">
<li><p>LCDC driver - The LCDC driver handles the liquid crystal display controller, send the command to the controller.</p></li>
<li><p>MIPI-DSI driver - The MIPI-DSI driver handles the MIPI-DSI device, send the command to the Device and get the reply.</p></li>
</ul>
<section id="architecture">
<h2>Architecture<a class="headerlink" href="#architecture" title="Link to this heading"></a></h2>
<p>LCDC uses the DRM (Direct Rendering Manager) framework to driver the LCDC device. The LCDC software architecture is illustrated in figure below.</p>
<figure class="align-center" id="id1">
<a class="reference internal image-reference" href="../../_images/lcdc_drm_software_arch.svg"><img alt="../../_images/lcdc_drm_software_arch.svg" height="584" src="../../_images/lcdc_drm_software_arch.svg" width="464" /></a>
<figcaption>
<p><span class="caption-text">DRM software architecture</span><a class="headerlink" href="#id1" title="Link to this image"></a></p>
</figcaption>
</figure>
<div class="admonition note">
<p class="admonition-title">备注</p>
<p>LCDC has two parts, one is LCDC, and another is MIPI-DSI. DRM drivers the two parts.</p>
</div>
<p>For details of Linux DRM system, refer to</p>
</section>
<section id="implementation">
<h2>Implementation<a class="headerlink" href="#implementation" title="Link to this heading"></a></h2>
<p>The implementation of Realtek DRM driver lies in the following directories.</p>
<table class="docutils align-default" style="width: 100%">
<thead>
<tr class="row-odd"><th class="head"><p>Driver location</p></th>
<th class="head"><p>Introduction</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p><code class="file docutils literal notranslate"><span class="pre">&lt;linux&gt;/drivers/rtkdrivers/drm/ameba_drm_drv.c</span></code></p></td>
<td><p>Realtek LCDC Driver function.</p></td>
</tr>
<tr class="row-odd"><td><p><code class="file docutils literal notranslate"><span class="pre">&lt;linux&gt;/drivers/rtkdrivers/drm/ameba_drm_drv.h</span></code></p></td>
<td><p>Realtek LCDC Driver related function declaration, macro definition,</p>
<p>structure definition and the other header files quoted.</p>
</td>
</tr>
<tr class="row-even"><td><p><code class="file docutils literal notranslate"><span class="pre">&lt;linux&gt;/drivers/rtkdrivers/drm/ameba_drm_obj.c</span></code></p></td>
<td><p>Realtek LCDC Driver functions.</p></td>
</tr>
<tr class="row-odd"><td><p><code class="file docutils literal notranslate"><span class="pre">&lt;linux&gt;/drivers/rtkdrivers/drm/ameba_drm_dsi.c</span></code></p></td>
<td><p>Realtek MIPI-DSI Driver function.</p></td>
</tr>
<tr class="row-even"><td><p><code class="file docutils literal notranslate"><span class="pre">&lt;linux&gt;/drivers/rtkdrivers/drm/ameba_drm_dsi.h</span></code></p></td>
<td><p>Realtek MIPI-DSI Driver related function declaration, macro definition,</p>
<p>structure definition and the other header files quoted.</p>
</td>
</tr>
<tr class="row-odd"><td><p><code class="file docutils literal notranslate"><span class="pre">&lt;linux&gt;/drivers/rtkdrivers/drm/ameba_drm_util.c</span></code></p></td>
<td><p>Realtek DRM Driver common function</p></td>
</tr>
<tr class="row-even"><td><p><code class="file docutils literal notranslate"><span class="pre">&lt;linux&gt;/drivers/rtkdrivers/drm/ameba_drm_util.h</span></code></p></td>
<td><p>Realtek DRM Driver common related function declaration, macro definition,</p>
<p>structure definition and the other header files quoted.</p>
</td>
</tr>
<tr class="row-odd"><td><p><code class="file docutils literal notranslate"><span class="pre">&lt;linux&gt;/drivers/rtkdrivers/drm/ameba_lcdc.c</span></code></p></td>
<td><p>Realtek LCDC hardware function</p></td>
</tr>
<tr class="row-even"><td><p><code class="file docutils literal notranslate"><span class="pre">&lt;linux&gt;/drivers/rtkdrivers/drm/ameba_lcdc.h</span></code></p></td>
<td><p>Realtek LCDC hardware related function declaration, macro definition,</p>
<p>structure definition and the other header files quoted.</p>
</td>
</tr>
<tr class="row-odd"><td><p><code class="file docutils literal notranslate"><span class="pre">&lt;linux&gt;/drivers/rtkdrivers/drm/ameba_mipi.c</span></code></p></td>
<td><p>Realtek MIPI_DSI hardware function.</p></td>
</tr>
<tr class="row-even"><td><p><code class="file docutils literal notranslate"><span class="pre">&lt;linux&gt;/drivers/rtkdrivers/drm/ameba_mipi.h</span></code></p></td>
<td><p>Realtek MIPI_DSI hardware related function declaration, macro definition,</p>
<p>structure definition and the other header files quoted.</p>
</td>
</tr>
</tbody>
</table>
</section>
</section>
<section id="configuration">
<h1>Configuration<a class="headerlink" href="#configuration" title="Link to this heading"></a></h1>
<section id="dts-configure">
<h2>DTS Configure<a class="headerlink" href="#dts-configure" title="Link to this heading"></a></h2>
<p>The LCDC DTS includes two parts: LCDC and MIPI-DSI. The main DTS file locates at <code class="file docutils literal notranslate"><span class="pre">&lt;dts&gt;/rtl8730e-drm.dtsi</span></code>.</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">drm</span><span class="p">:</span><span class="n">drm</span><span class="o">@</span><span class="mh">0x400D8000</span> <span class="p">{</span>
   <span class="n">compatible</span> <span class="o">=</span> <span class="s2">&quot;realtek,ameba-drm&quot;</span><span class="p">;</span>
   <span class="n">reg</span> <span class="o">=</span> <span class="o">&lt;</span><span class="mh">0x400D8000</span> <span class="mh">0xE0</span><span class="o">&gt;</span><span class="p">;</span>
   <span class="n">interrupts</span> <span class="o">=</span> <span class="o">&lt;</span><span class="n">GIC_SPI</span> <span class="mi">33</span> <span class="n">IRQ_TYPE_LEVEL_HIGH</span><span class="o">&gt;</span><span class="p">;</span>
   <span class="n">clocks</span> <span class="o">=</span> <span class="o">&lt;&amp;</span><span class="n">rcc</span> <span class="n">RTK_CKE_LCDCMIPI</span><span class="o">&gt;</span><span class="p">;</span>
   <span class="n">memory</span><span class="o">-</span><span class="n">region</span> <span class="o">=</span> <span class="o">&lt;&amp;</span><span class="n">mem_drm_reserved</span><span class="o">&gt;</span><span class="p">;</span>
   <span class="n">port</span> <span class="p">{</span>
      <span class="c1">#address-cells = &lt;1&gt;;</span>
      <span class="c1">#size-cells = &lt;0&gt;;</span>
      <span class="n">dsi_out</span><span class="p">:</span> <span class="n">endpoint</span><span class="o">@</span><span class="mi">0</span> <span class="p">{</span>
         <span class="n">reg</span> <span class="o">=</span> <span class="o">&lt;</span><span class="mi">0</span><span class="o">&gt;</span><span class="p">;</span>
         <span class="n">remote</span><span class="o">-</span><span class="n">endpoint</span> <span class="o">=</span> <span class="o">&lt;&amp;</span><span class="n">dsi_in</span><span class="o">&gt;</span><span class="p">;</span>
      <span class="p">};</span>
      <span class="n">panel_out</span><span class="p">:</span> <span class="n">endpoint</span><span class="o">@</span><span class="mi">1</span> <span class="p">{</span>
         <span class="n">reg</span> <span class="o">=</span> <span class="o">&lt;</span><span class="mi">1</span><span class="o">&gt;</span><span class="p">;</span>
         <span class="n">remote</span><span class="o">-</span><span class="n">endpoint</span> <span class="o">=</span> <span class="o">&lt;&amp;</span><span class="n">panel_in</span><span class="o">&gt;</span><span class="p">;</span>
      <span class="p">};</span>
   <span class="p">};</span>
<span class="p">};</span>
<span class="n">dsi</span><span class="p">:</span> <span class="n">dsi</span><span class="o">@</span><span class="mh">0x400EA000</span> <span class="p">{</span>
   <span class="n">compatible</span> <span class="o">=</span> <span class="s2">&quot;realtek,ameba-dsi&quot;</span><span class="p">;</span>
   <span class="n">reg</span> <span class="o">=</span> <span class="o">&lt;</span><span class="mh">0x400EA000</span> <span class="mh">0xC10</span><span class="o">&gt;</span><span class="p">,</span>
   <span class="o">&lt;</span><span class="mh">0x4200825C</span> <span class="mh">0x04</span><span class="o">&gt;</span><span class="p">;</span>
   <span class="n">interrupts</span> <span class="o">=</span> <span class="o">&lt;</span><span class="n">GIC_SPI</span> <span class="mi">70</span> <span class="n">IRQ_TYPE_LEVEL_HIGH</span><span class="o">&gt;</span><span class="p">;</span>
   <span class="n">clocks</span> <span class="o">=</span> <span class="o">&lt;&amp;</span><span class="n">rcc</span> <span class="n">RTK_CKE_HPERI</span><span class="o">&gt;</span><span class="p">;</span>
   <span class="n">rtk</span><span class="p">,</span><span class="n">lcdc</span><span class="o">-</span><span class="n">vo</span><span class="o">-</span><span class="n">clock</span> <span class="o">=</span> <span class="o">&lt;&amp;</span><span class="n">rcc</span><span class="o">&gt;</span><span class="p">;</span>
   <span class="n">status</span> <span class="o">=</span> <span class="s2">&quot;disabled&quot;</span><span class="p">;</span>
   <span class="o">//</span> <span class="mi">0</span> <span class="k">for</span> <span class="nb">input</span> <span class="n">port</span>
   <span class="n">port</span> <span class="p">{</span>
      <span class="c1">#address-cells = &lt;1&gt;;</span>
      <span class="c1">#size-cells = &lt;0&gt;;</span>
      <span class="n">dsi_in</span><span class="p">:</span> <span class="n">endpoint</span><span class="o">@</span><span class="mi">0</span> <span class="p">{</span>
         <span class="n">reg</span> <span class="o">=</span> <span class="o">&lt;</span><span class="mi">0</span><span class="o">&gt;</span><span class="p">;</span>
         <span class="n">remote</span><span class="o">-</span><span class="n">endpoint</span> <span class="o">=</span> <span class="o">&lt;&amp;</span><span class="n">dsi_out</span><span class="o">&gt;</span><span class="p">;</span>
      <span class="p">};</span>
   <span class="p">};</span>
<span class="p">};</span>
</pre></div>
</div>
<p><code class="file docutils literal notranslate"><span class="pre">&lt;dts&gt;/rtl8730e-pinctrl.dtsi</span></code></p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">drm_disable_swd_pins</span><span class="p">:</span><span class="n">drm_swd</span><span class="o">@</span><span class="mi">0</span> <span class="p">{</span>
   <span class="n">pins</span> <span class="p">{</span>
      <span class="n">pinmux</span> <span class="o">=</span> <span class="o">&lt;</span><span class="n">REALTEK_PINMUX</span><span class="p">(</span><span class="s1">&#39;A&#39;</span><span class="p">,</span><span class="mi">14</span><span class="p">,</span> <span class="n">GPIO</span><span class="p">)</span><span class="o">&gt;</span><span class="p">;</span>
      <span class="n">bias</span><span class="o">-</span><span class="n">disable</span><span class="p">;</span>
      <span class="n">swd</span><span class="o">-</span><span class="n">disable</span><span class="p">;</span>
   <span class="p">};</span>
<span class="p">};</span>
</pre></div>
</div>
<p>LCDC needs CMA (Contiguous Memory Allocation) support, according to different boards, modify &lt;reserved-memory&gt; in the DTS.</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">reserved</span><span class="o">-</span><span class="n">memory</span> <span class="p">{</span>
   <span class="c1">#address-cells = &lt;1&gt;;</span>
   <span class="c1">#size-cells = &lt;1&gt;;</span>
   <span class="n">ranges</span><span class="p">;</span>
   <span class="o">/*</span><span class="n">reserver</span> <span class="mi">32</span><span class="n">M</span> <span class="n">mem</span> <span class="k">for</span> <span class="n">drm</span> <span class="n">graphics</span> <span class="p">,</span> <span class="kn">from</span> <span class="mh">0x61000000</span> <span class="n">to</span> <span class="mh">0x63000000</span><span class="o">*/</span>
   <span class="n">mem_drm_reserved</span><span class="p">:</span> <span class="n">drm_buffer</span><span class="o">@</span><span class="mh">0x61000000</span> <span class="p">{</span>
      <span class="n">compatible</span> <span class="o">=</span> <span class="s2">&quot;shared-dma-pool&quot;</span><span class="p">;</span>
      <span class="n">no</span><span class="o">-</span><span class="nb">map</span><span class="p">;</span>
      <span class="n">reg</span> <span class="o">=</span> <span class="o">&lt;</span><span class="mh">0x61000000</span> <span class="mh">0x2000000</span><span class="o">&gt;</span><span class="p">;</span>
   <span class="p">};</span>
<span class="p">};</span>
</pre></div>
</div>
<p>The basic information of LCDC is not suggested to revise.</p>
<ul class="simple">
<li><p>For driver and device matching: compatible.</p></li>
<li><p>LCDC device REG: <code class="docutils literal notranslate"><span class="pre">0x400D8000.MIPI_DSI</span></code> device REG: <code class="docutils literal notranslate"><span class="pre">0x400EA000</span></code></p></li>
<li><p>LCDCMIPI Clock: &lt;&amp;rcc RTK_CKE_LCDCMIPI &gt;</p></li>
<li><p>LCDC interrupt: irq num 33; MIPI_DSI interrupt: irq num 70.</p></li>
</ul>
<p>The pin assignments of LCDC are listed in table below.</p>
<table class="docutils align-default" style="width: 100%">
<thead>
<tr class="row-odd"><th class="head"><p>Port name</p></th>
<th class="head"><p>Pin control DTS configuration</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>PA4</p></td>
<td><p>&lt;&amp;drm_disable_swd_pins&gt;</p></td>
</tr>
</tbody>
</table>
<p>LCDC has only one pinmux, therefore, only one pin is defined. PA13, PA14 also can be used in SWD, when used in LCDC, should disable SWD in DTS.</p>
<p>LCDC needs CMA support, for different display resolution, CMA can be set to different size.</p>
</section>
<section id="build-configuration">
<h2>Build Configuration<a class="headerlink" href="#build-configuration" title="Link to this heading"></a></h2>
<p>To change LCDC driver config, type the following command and choose “Device Drivers” &gt; “Drivers for Realtek” &gt; “DRM driver” in order.</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">make</span> <span class="n">kernelconfig</span>
</pre></div>
</div>
<figure class="align-center">
<a class="reference internal image-reference" href="../../_images/lcdc_build_config.svg"><img alt="../../_images/lcdc_build_config.svg" height="536" src="../../_images/lcdc_build_config.svg" width="1307" /></a>
</figure>
</section>
</section>
<section id="apis">
<h1>APIs<a class="headerlink" href="#apis" title="Link to this heading"></a></h1>
<section id="apis-for-user-space">
<h2>APIs for User Space<a class="headerlink" href="#apis-for-user-space" title="Link to this heading"></a></h2>
<p>LCDC core APIs: The LCDC driver exports standard DRM interfaces to user space as bellow.</p>
<table class="docutils align-default" style="width: 100%">
<thead>
<tr class="row-odd"><th class="head"><p>Interfaces</p></th>
<th class="head"><p>Introduction</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>Open</p></td>
<td><p>Open a DRM device (<code class="file docutils literal notranslate"><span class="pre">/dev/dri/card0</span></code>).</p></td>
</tr>
<tr class="row-odd"><td><p>Close</p></td>
<td><p>Close a DRM device.</p></td>
</tr>
<tr class="row-even"><td><p>Ioctl</p></td>
<td><p>Interaction with DRM driver to read, write the property.</p></td>
</tr>
</tbody>
</table>
<p>Libdrm APIs: Libdrm is a standard library to interface with DRM in the Linux kernel. It is open-source. The aims are:</p>
<ul class="simple">
<li><p>The library offers 100% of the functionality of the kernel API.</p></li>
<li><p>The library adds major improvements in usability, making the application code simpler and better looking.</p></li>
<li><p>Future fixes or compatibility code may be placed in the library code instead of the kernel driver.</p></li>
</ul>
<p>For more details, refer to <a class="reference external" href="https://01.org/linuxgraphics/community/libdrm">libdrm</a>.</p>
<p>LCDC demo for user space locates at <code class="file docutils literal notranslate"><span class="pre">tests/fwk/display/libdrm</span></code>. There are many different test demos, shows in table below.</p>
<table class="docutils align-default" style="width: 100%">
<thead>
<tr class="row-odd"><th class="head"><p>Demo name</p></th>
<th class="head"><p>Demo description</p></th>
<th class="head"><p>Location</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>drm_plane_test_demo</p></td>
<td><p>Plane test demo</p></td>
<td><p><code class="file docutils literal notranslate"><span class="pre">tests/fwk/display/libdrm/planetest</span></code></p></td>
</tr>
<tr class="row-odd"><td><p>drm_vbl_test</p></td>
<td><p>Drm vblank event test</p></td>
<td><p><code class="file docutils literal notranslate"><span class="pre">tests/fwk/display/libdrm/vbltest</span></code></p></td>
</tr>
</tbody>
</table>
<p>The LCDC demo just enables demo drm_plane_test_demo and drm_vbl_test to compile in SDK while lunch the test product target, refer to System Application Note (Chapter: Building Environment) to compile the test cases.</p>
<p>After compiling and burning successfully, you can find the test case located in <code class="file docutils literal notranslate"><span class="pre">/bin/</span></code> directory.</p>
</section>
<section id="apis-for-kernel-space">
<h2>APIs for Kernel Space<a class="headerlink" href="#apis-for-kernel-space" title="Link to this heading"></a></h2>
<section id="lcdc-function-interfaces">
<h3>LCDC Function Interfaces<a class="headerlink" href="#lcdc-function-interfaces" title="Link to this heading"></a></h3>
<section id="lcdc-init">
<h4>LCDC_Init<a class="headerlink" href="#lcdc-init" title="Link to this heading"></a></h4>
<table class="docutils align-default" style="width: 100%">
<thead>
<tr class="row-odd"><th class="head"><p>Items</p></th>
<th class="head"><p>Description</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>Introduction</p></td>
<td><p>Initialize the LCDC register value with the <code class="docutils literal notranslate"><span class="pre">LCDC_InitTypeDef</span></code> struct value.</p></td>
</tr>
<tr class="row-odd"><td><p>Parameters</p></td>
<td><ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">LCDCx</span></code>: point to the register address.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">LCDC_InitStruct</span></code>: point to an <code class="docutils literal notranslate"><span class="pre">LCDC_InitTypeDef</span></code> structure which is initialized.</p></li>
</ul>
</td>
</tr>
<tr class="row-even"><td><p>Return</p></td>
<td><p>None</p></td>
</tr>
</tbody>
</table>
</section>
<section id="lcdc-structinit">
<h4>LCDC_StructInit<a class="headerlink" href="#lcdc-structinit" title="Link to this heading"></a></h4>
<table class="docutils align-default" style="width: 100%">
<thead>
<tr class="row-odd"><th class="head"><p>Items</p></th>
<th class="head"><p>Description</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>Introduction</p></td>
<td><p>Initialize the parameters in the <code class="docutils literal notranslate"><span class="pre">LCDC_InitTypeDef</span></code> with default values.</p></td>
</tr>
<tr class="row-odd"><td><p>Parameters</p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">LCDC_InitStruct</span></code>: point to an <code class="docutils literal notranslate"><span class="pre">LCDC_InitTypeDef</span></code> structure which will be initialized.</p></td>
</tr>
<tr class="row-even"><td><p>Return</p></td>
<td><p>None</p></td>
</tr>
</tbody>
</table>
</section>
<section id="lcdc-trigershwreload">
<h4>LCDC_TrigerSHWReload<a class="headerlink" href="#lcdc-trigershwreload" title="Link to this heading"></a></h4>
<table class="docutils align-default" style="width: 100%">
<thead>
<tr class="row-odd"><th class="head"><p>Items</p></th>
<th class="head"><p>Description</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>Introduction</p></td>
<td><p>Triger Layer’s shadow register reload to apply new configuration.</p></td>
</tr>
<tr class="row-odd"><td><p>Parameters</p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">LCDCx</span></code>: point to the register address.</p></td>
</tr>
<tr class="row-even"><td><p>Return</p></td>
<td><p>None</p></td>
</tr>
</tbody>
</table>
</section>
<section id="lcdc-setbkgcolor">
<h4>LCDC_SetBkgColor<a class="headerlink" href="#lcdc-setbkgcolor" title="Link to this heading"></a></h4>
<table class="docutils align-default" style="width: 100%">
<thead>
<tr class="row-odd"><th class="head"><p>Items</p></th>
<th class="head"><p>Description</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>Introduction</p></td>
<td><p>Set the back ground color</p></td>
</tr>
<tr class="row-odd"><td><p>Parameters</p></td>
<td><ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">LCDCx</span></code>: point to the register address</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">red_color</span></code>: red color value</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">green_color</span></code>: green color value</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">blue_color</span></code>: blue color value</p></li>
</ul>
</td>
</tr>
<tr class="row-even"><td><p>Return</p></td>
<td><p>None</p></td>
</tr>
</tbody>
</table>
</section>
<section id="lcdc-setplanesize">
<h4>LCDC_SetPlaneSize<a class="headerlink" href="#lcdc-setplanesize" title="Link to this heading"></a></h4>
<table class="docutils align-default" style="width: 100%">
<thead>
<tr class="row-odd"><th class="head"><p>Items</p></th>
<th class="head"><p>Description</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>Introduction</p></td>
<td><p>Set the display plane size</p></td>
</tr>
<tr class="row-odd"><td><p>Parameters</p></td>
<td><ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">LCDCx</span></code>: point to the register address</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">ImageWidth</span></code>: display plane width</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">ImageHeight</span></code>: display plane height</p></li>
</ul>
</td>
</tr>
<tr class="row-even"><td><p>Return</p></td>
<td><p>None</p></td>
</tr>
</tbody>
</table>
</section>
<section id="lcdc-cmd">
<h4>LCDC_Cmd<a class="headerlink" href="#lcdc-cmd" title="Link to this heading"></a></h4>
<table class="docutils align-default" style="width: 100%">
<thead>
<tr class="row-odd"><th class="head"><p>Items</p></th>
<th class="head"><p>Description</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>Introduction</p></td>
<td><p>Enable or disable the LCDC.</p></td>
</tr>
<tr class="row-odd"><td><p>Parameters</p></td>
<td><ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">LCDCx</span></code>: where LCDCx can be LCDC.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">NewState</span></code>: new state of the LCDC. This parameter can be <code class="docutils literal notranslate"><span class="pre">ENABLE</span></code> or <code class="docutils literal notranslate"><span class="pre">DISABLE</span></code>.</p></li>
</ul>
</td>
</tr>
<tr class="row-even"><td><p>Return</p></td>
<td><p>None</p></td>
</tr>
</tbody>
</table>
</section>
<section id="lcdc-getintstatus">
<h4>LCDC_GetINTStatus<a class="headerlink" href="#lcdc-getintstatus" title="Link to this heading"></a></h4>
<table class="docutils align-default" style="width: 100%">
<thead>
<tr class="row-odd"><th class="head"><p>Items</p></th>
<th class="head"><p>Description</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>Introduction</p></td>
<td><p>Get LCDC interrupt status.</p></td>
</tr>
<tr class="row-odd"><td><p>Parameters</p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">LCDCx</span></code>: where LCDCx can be LCDC.</p></td>
</tr>
<tr class="row-even"><td><p>Return</p></td>
<td><p>The interrupt status</p></td>
</tr>
</tbody>
</table>
</section>
<section id="lcdc-clearint">
<h4>LCDC_ClearINT<a class="headerlink" href="#lcdc-clearint" title="Link to this heading"></a></h4>
<table class="docutils align-default" style="width: 100%">
<thead>
<tr class="row-odd"><th class="head"><p>Items</p></th>
<th class="head"><p>Description</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>Introduction</p></td>
<td><p>Clears the LCDC’s interrupt pending bits.</p></td>
</tr>
<tr class="row-odd"><td><p>Parameters</p></td>
<td><ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">LCDCx</span></code>: where LCDCx can be LCDC.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">LCDC_IT</span></code>: specifies the interrupt to be cleared. This parameter can be any combination of the following values:</p>
<ul>
<li><p><code class="docutils literal notranslate"><span class="pre">LCDC_BIT_DMA_UN_INTS</span></code>: DMA FIFO under flow interrupt</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">LCDC_BIT_LCD_FRD_INTS</span></code>: refresh frame done interrupt</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">LCDC_BIT_LCD_LIN_INTS</span></code>: line interrupt</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">LCDC_BIT_FRM_START_INTS</span></code>: Frame Start interrupt</p></li>
</ul>
</li>
</ul>
</td>
</tr>
<tr class="row-even"><td><p>Return</p></td>
<td><p>None</p></td>
</tr>
</tbody>
</table>
</section>
<section id="lcdc-dmamodeconfig">
<h4>LCDC_DMAModeConfig<a class="headerlink" href="#lcdc-dmamodeconfig" title="Link to this heading"></a></h4>
<table class="docutils align-default" style="width: 100%">
<thead>
<tr class="row-odd"><th class="head"><p>Items</p></th>
<th class="head"><p>Description</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>Introduction</p></td>
<td><p>Configure LCDC DMA burst size.</p></td>
</tr>
<tr class="row-odd"><td><p>Parameters</p></td>
<td><ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">LCDCx</span></code>: where LCDCx can be LCDC.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">BurstSize</span></code>: DMA burst size; unit is 64 bytes.</p>
<ul>
<li><p><code class="docutils literal notranslate"><span class="pre">LCDC_LAYER_BURSTSIZE_1X64BYTES</span></code>:  Burst Transactions = 1;</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">LCDC_LAYER_BURSTSIZE_2X64BYTES</span></code>:  Burst Transactions = 2;</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">LCDC_LAYER_BURSTSIZE_3X64BYTES</span></code>:  Burst Transactions = 3;</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">LCDC_LAYER_BURSTSIZE_4X64BYTES</span></code>:  Burst Transactions = 4;</p></li>
</ul>
</li>
</ul>
</td>
</tr>
<tr class="row-even"><td><p>Return</p></td>
<td><p>None</p></td>
</tr>
</tbody>
</table>
</section>
<section id="lcdc-dmaunderflowconfig">
<h4>LCDC_DMAUnderFlowConfig<a class="headerlink" href="#lcdc-dmaunderflowconfig" title="Link to this heading"></a></h4>
<table class="docutils align-default" style="width: 100%">
<thead>
<tr class="row-odd"><th class="head"><p>Items</p></th>
<th class="head"><p>Description</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>Introduction</p></td>
<td><p>Configure LCDC DMA under flow mode and under flow error data .</p></td>
</tr>
<tr class="row-odd"><td><p>Parameters</p></td>
<td><ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">LCDCx</span></code>: where LCDCx can be LCDC.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">DmaUnFlwMode</span></code>: DMA under flow mode, this parameter can be one of the following values:</p>
<ul>
<li><p><code class="docutils literal notranslate"><span class="pre">LCDC_DMAUNFW_OUTPUT_LASTDATA</span></code>: output last data</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">LCDC_DMAUNFW_OUTPUT_ERRORDATA</span></code>: output error data</p></li>
</ul>
</li>
<li><p><code class="docutils literal notranslate"><span class="pre">ErrorData</span></code>: the output data when DMA FIFO underflow occurs. When under flow mode is configured</p></li>
</ul>
<p>as <code class="docutils literal notranslate"><span class="pre">LCDC_DMAUNFW_OUTPUT_ERRORDATA</span></code>, this parameter is needed; otherwise, it can be ignored.</p>
</td>
</tr>
<tr class="row-even"><td><p>Return</p></td>
<td><p>None</p></td>
</tr>
</tbody>
</table>
</section>
<section id="lcdc-getcurposstatus">
<h4>LCDC_GetCurPosStatus<a class="headerlink" href="#lcdc-getcurposstatus" title="Link to this heading"></a></h4>
<table class="docutils align-default" style="width: 100%">
<thead>
<tr class="row-odd"><th class="head"><p>Items</p></th>
<th class="head"><p>Description</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>Introduction</p></td>
<td><p>Get the current position.</p></td>
</tr>
<tr class="row-odd"><td><p>Parameters</p></td>
<td><ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">LCDCx</span></code>: where LCDCx can be LCDC.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">pCurPosX</span></code>: the current X position pointer.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">pCurPosY</span></code>: the current Y position pointer.</p></li>
</ul>
</td>
</tr>
<tr class="row-even"><td><p>Return</p></td>
<td><p>None</p></td>
</tr>
</tbody>
</table>
</section>
<section id="lcdc-getdmaunintcnt">
<h4>LCDC_GetDmaUnINTCnt<a class="headerlink" href="#lcdc-getdmaunintcnt" title="Link to this heading"></a></h4>
<table class="docutils align-default" style="width: 100%">
<thead>
<tr class="row-odd"><th class="head"><p>Items</p></th>
<th class="head"><p>Description</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>Introduction</p></td>
<td><p>Get the DMA FIFO under flow interrupt count.</p></td>
</tr>
<tr class="row-odd"><td><p>Parameters</p></td>
<td><ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">LCDCx</span></code>: where LCDCx can be LCDC.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">DmaUnIntCnt</span></code>: the DMA under flow interrupt count pointer.</p></li>
</ul>
</td>
</tr>
<tr class="row-even"><td><p>Return</p></td>
<td><p>None</p></td>
</tr>
</tbody>
</table>
</section>
<section id="lcdc-intconfig">
<h4>LCDC_INTConfig<a class="headerlink" href="#lcdc-intconfig" title="Link to this heading"></a></h4>
<table class="docutils align-default" style="width: 100%">
<thead>
<tr class="row-odd"><th class="head"><p>Items</p></th>
<th class="head"><p>Description</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>Introduction</p></td>
<td><p>Enables or disables the specified LCDC interrupts.</p></td>
</tr>
<tr class="row-odd"><td><p>Parameters</p></td>
<td><ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">LCDCx</span></code>: where LCDCx can be LCDC.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">LCDC_IT</span></code>: specifies the LCDC interrupt sources to be enabled or disabled.</p>
<ul>
<li><p><code class="docutils literal notranslate"><span class="pre">LCDC_BIT_DMA_UN_INTEN</span></code>: DMA FIFO underflow interrupt</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">LCDC_BIT_LCD_FRD_INTEN</span></code>: LCD refresh done interrupt</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">LCDC_BIT_LCD_LIN_INTEN</span></code>: line interrupt</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">LCDC_BIT_FRM_START_INTEN</span></code>: Frame Start interrupt</p></li>
</ul>
</li>
<li><p><code class="docutils literal notranslate"><span class="pre">NewState</span></code>: new state of the specified LCDC interrupts. This parameter can be: <code class="docutils literal notranslate"><span class="pre">ENABLE</span></code> or <code class="docutils literal notranslate"><span class="pre">DISABLE</span></code>.</p></li>
</ul>
</td>
</tr>
<tr class="row-even"><td><p>Return</p></td>
<td><p>The read value</p></td>
</tr>
</tbody>
</table>
</section>
<section id="lcdc-lineintposconfig">
<h4>LCDC_LineINTPosConfig<a class="headerlink" href="#lcdc-lineintposconfig" title="Link to this heading"></a></h4>
<table class="docutils align-default" style="width: 100%">
<thead>
<tr class="row-odd"><th class="head"><p>Items</p></th>
<th class="head"><p>Description</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>Introduction</p></td>
<td><p>Configure line interrupt position.</p></td>
</tr>
<tr class="row-odd"><td><p>Parameters</p></td>
<td><ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">LCDCx</span></code>: where LCDCx can be LCDC.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">LineNum</span></code>: the line number.</p></li>
</ul>
</td>
</tr>
<tr class="row-even"><td><p>Return</p></td>
<td><p>None</p></td>
</tr>
</tbody>
</table>
</section>
<section id="lcdc-layerconfig">
<h4>LCDC_LayerConfig<a class="headerlink" href="#lcdc-layerconfig" title="Link to this heading"></a></h4>
<table class="docutils align-default" style="width: 100%">
<thead>
<tr class="row-odd"><th class="head"><p>Items</p></th>
<th class="head"><p>Description</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>Introduction</p></td>
<td><p>Initializes the LCDC Layer according to the specified parameters in the <code class="docutils literal notranslate"><span class="pre">EachLayer</span></code>.</p></td>
</tr>
<tr class="row-odd"><td><p>Parameters</p></td>
<td><ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">LCDCx</span></code>: where LCDCx can be LCDC.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">LayerId</span></code>: layer index.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">EachLayer</span></code>: pointer to a <code class="docutils literal notranslate"><span class="pre">LCDC_EachLayerInitTypeDef</span></code> structure that contains the configuration information for the specified LCDC layer.</p></li>
</ul>
</td>
</tr>
<tr class="row-even"><td><p>Return</p></td>
<td><p>None</p></td>
</tr>
</tbody>
</table>
</section>
<section id="lcdc-checklcdcready">
<h4>LCDC_CheckLCDCReady<a class="headerlink" href="#lcdc-checklcdcready" title="Link to this heading"></a></h4>
<table class="docutils align-default" style="width: 100%">
<thead>
<tr class="row-odd"><th class="head"><p>Items</p></th>
<th class="head"><p>Description</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>Introduction</p></td>
<td><p>Check LCDC is ready to work with VO interface after LCDC is enable.</p></td>
</tr>
<tr class="row-odd"><td><p>Parameters</p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">LCDCx</span></code>: where LCDCx can be LCDC.</p></td>
</tr>
<tr class="row-even"><td><p>Return</p></td>
<td><p>Status:</p>
<ul class="simple">
<li><p>1: Ready</p></li>
<li><p>Others: Not Ready</p></li>
</ul>
</td>
</tr>
</tbody>
</table>
</section>
</section>
<section id="mipi-dsi-function-interfaces">
<h3>MIPI_DSI Function Interfaces<a class="headerlink" href="#mipi-dsi-function-interfaces" title="Link to this heading"></a></h3>
<section id="mipi-init">
<h4>MIPI_Init<a class="headerlink" href="#mipi-init" title="Link to this heading"></a></h4>
<table class="docutils align-default" style="width: 100%">
<thead>
<tr class="row-odd"><th class="head"><p>Items</p></th>
<th class="head"><p>Description</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>Introduction</p></td>
<td><p>Initialize the MIPI register value with the <code class="docutils literal notranslate"><span class="pre">MIPI_InitTypeDef</span></code> struct value.</p></td>
</tr>
<tr class="row-odd"><td><p>Parameters</p></td>
<td><ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">MIPIx</span></code>: point to the MIPI register address.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">MIPI_InitStruct</span></code>: point to a <code class="docutils literal notranslate"><span class="pre">MIPI_InitTypeDef</span></code> structure which is initialized.</p></li>
</ul>
</td>
</tr>
<tr class="row-even"><td><p>Return</p></td>
<td><p>None</p></td>
</tr>
</tbody>
</table>
</section>
<section id="mipi-dsi-init">
<h4>MIPI_DSI_init<a class="headerlink" href="#mipi-dsi-init" title="Link to this heading"></a></h4>
<table class="docutils align-default" style="width: 100%">
<thead>
<tr class="row-odd"><th class="head"><p>Items</p></th>
<th class="head"><p>Description</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>Introduction</p></td>
<td><p>Initialize the MIPI_DSI register value with the <code class="docutils literal notranslate"><span class="pre">MIPI_InitTypeDef</span></code> struct value.</p></td>
</tr>
<tr class="row-odd"><td><p>Parameters</p></td>
<td><ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">MIPIx</span></code>: point to the MIPI register address.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">MIPI_InitStruct</span></code>: point to a <code class="docutils literal notranslate"><span class="pre">MIPI_InitTypeDef</span></code> structure which is initialized.</p></li>
</ul>
</td>
</tr>
<tr class="row-even"><td><p>Return</p></td>
<td><p>None</p></td>
</tr>
</tbody>
</table>
</section>
<section id="mipi-dphy-init">
<h4>MIPI_DPHY_init<a class="headerlink" href="#mipi-dphy-init" title="Link to this heading"></a></h4>
<table class="docutils align-default" style="width: 100%">
<thead>
<tr class="row-odd"><th class="head"><p>Items</p></th>
<th class="head"><p>Description</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>Introduction</p></td>
<td><p>Initialize the MIPI_D-PHY register value with the <code class="docutils literal notranslate"><span class="pre">MIPI_InitTypeDef</span></code> struct value.</p></td>
</tr>
<tr class="row-odd"><td><p>Parameters</p></td>
<td><ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">MIPIx</span></code>: point to the MIPI register address.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">MIPI_InitStruct</span></code>: point to a <code class="docutils literal notranslate"><span class="pre">MIPI_InitTypeDef</span></code> structure which is initialized.</p></li>
</ul>
</td>
</tr>
<tr class="row-even"><td><p>Return</p></td>
<td><p>None</p></td>
</tr>
</tbody>
</table>
</section>
<section id="mipi-initstruct-config">
<h4>MIPI_InitStruct_Config<a class="headerlink" href="#mipi-initstruct-config" title="Link to this heading"></a></h4>
<table class="docutils align-default" style="width: 100%">
<thead>
<tr class="row-odd"><th class="head"><p>Items</p></th>
<th class="head"><p>Description</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>Introduction</p></td>
<td><p>Initialize the parameters in the <code class="docutils literal notranslate"><span class="pre">MIPI_InitTypeDef</span></code> with default values.</p></td>
</tr>
<tr class="row-odd"><td><p>Parameters</p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">MIPI_InitStruct</span></code>: point to a <code class="docutils literal notranslate"><span class="pre">MIPI_InitTypeDef</span></code> structure which is initialized.</p></td>
</tr>
<tr class="row-even"><td><p>Return</p></td>
<td><p>None</p></td>
</tr>
</tbody>
</table>
</section>
<section id="mipi-dsi-mode-switch">
<h4>MIPI_DSI_Mode_Switch<a class="headerlink" href="#mipi-dsi-mode-switch" title="Link to this heading"></a></h4>
<table class="docutils align-default" style="width: 100%">
<thead>
<tr class="row-odd"><th class="head"><p>Items</p></th>
<th class="head"><p>Description</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>Introduction</p></td>
<td><p>Initialize the MIPI_DSI register value with the <code class="docutils literal notranslate"><span class="pre">MIPI_InitTypeDef</span></code> struct value.</p></td>
</tr>
<tr class="row-odd"><td><p>Parameters</p></td>
<td><ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">MIPIx</span></code>: point to the MIPI register address.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">MIPI_VideoNCmdMode</span></code>: This parameter can be <code class="docutils literal notranslate"><span class="pre">ENABLE</span></code> or <code class="docutils literal notranslate"><span class="pre">DISABLE</span></code>.</p></li>
</ul>
</td>
</tr>
<tr class="row-even"><td><p>Return</p></td>
<td><p>None</p></td>
</tr>
</tbody>
</table>
</section>
<section id="mipi-dsi-cmd-send">
<h4>MIPI_DSI_CMD_Send<a class="headerlink" href="#mipi-dsi-cmd-send" title="Link to this heading"></a></h4>
<table class="docutils align-default" style="width: 100%">
<thead>
<tr class="row-odd"><th class="head"><p>Items</p></th>
<th class="head"><p>Description</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>Introduction</p></td>
<td><p>Send a short packet to the panel in command mode.</p></td>
</tr>
<tr class="row-odd"><td><p>Parameters</p></td>
<td><ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">MIPIx</span></code>: point to the MIPI register address</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">DataId</span></code>: MIPI DSI Processor-to-Peripheral transaction types</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">Byte0</span></code>: payload</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">Byte1</span></code>: payload</p></li>
</ul>
</td>
</tr>
<tr class="row-even"><td><p>Return</p></td>
<td><p>None</p></td>
</tr>
</tbody>
</table>
</section>
<section id="mipi-dsi-cmd-longpkt-memqwordrw">
<h4>MIPI_DSI_CMD_LongPkt_MemQWordRW<a class="headerlink" href="#mipi-dsi-cmd-longpkt-memqwordrw" title="Link to this heading"></a></h4>
<table class="docutils align-default" style="width: 100%">
<thead>
<tr class="row-odd"><th class="head"><p>Items</p></th>
<th class="head"><p>Description</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>Introduction</p></td>
<td><p>Send a long packet to the panel in command mode.</p></td>
</tr>
<tr class="row-odd"><td><p>Parameters</p></td>
<td><ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">MIPIx</span></code>: point to the MIPI register address.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">Addr</span></code>: address value of Command payload buffer in the MIPI DSI block</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">Word0</span></code>: word0 value</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">Word1</span></code>: word1 value</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">IsRead</span></code>: read flag, if set , will read value from address</p></li>
</ul>
</td>
</tr>
<tr class="row-even"><td><p>Return</p></td>
<td><p>None</p></td>
</tr>
</tbody>
</table>
</section>
<section id="mipi-dsi-cmd-rxcv-cmd">
<h4>MIPI_DSI_CMD_Rxcv_CMD<a class="headerlink" href="#mipi-dsi-cmd-rxcv-cmd" title="Link to this heading"></a></h4>
<table class="docutils align-default" style="width: 100%">
<thead>
<tr class="row-odd"><th class="head"><p>Items</p></th>
<th class="head"><p>Description</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>Introduction</p></td>
<td><p>Get status or packet from the panel in command mode</p></td>
</tr>
<tr class="row-odd"><td><p>Parameters</p></td>
<td><ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">MIPIx</span></code>: point to the MIPI register address.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">rcmd_idx</span></code>: Index which receive command register is read</p></li>
</ul>
</td>
</tr>
<tr class="row-even"><td><p>Return</p></td>
<td><p>The value of <code class="docutils literal notranslate"><span class="pre">RCMD_1</span></code>/<code class="docutils literal notranslate"><span class="pre">RCMD_2</span></code>/<code class="docutils literal notranslate"><span class="pre">RCMD_3</span></code> register</p></td>
</tr>
</tbody>
</table>
</section>
<section id="mipi-dsi-int-config">
<h4>MIPI_DSI_INT_Config<a class="headerlink" href="#mipi-dsi-int-config" title="Link to this heading"></a></h4>
<table class="docutils align-default" style="width: 100%">
<thead>
<tr class="row-odd"><th class="head"><p>Items</p></th>
<th class="head"><p>Description</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>Introduction</p></td>
<td><p>Configure IRQ for MIPI_DIS.</p></td>
</tr>
<tr class="row-odd"><td><p>Parameters</p></td>
<td><ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">MIPIx</span></code>: pointer to the register address.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">AcpuEn</span></code>: acpu interrupt enable</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">ScpuEN</span></code>: scpu interrupt enable</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">IntSelAnS</span></code>: which CPU select index, 0 is command Mode, 1 is Video Mode.</p></li>
</ul>
</td>
</tr>
<tr class="row-even"><td><p>Return</p></td>
<td><p>None</p></td>
</tr>
</tbody>
</table>
</section>
<section id="mipi-dsi-ints-get">
<h4>MIPI_DSI_INTS_Get<a class="headerlink" href="#mipi-dsi-ints-get" title="Link to this heading"></a></h4>
<table class="docutils align-default" style="width: 100%">
<thead>
<tr class="row-odd"><th class="head"><p>Items</p></th>
<th class="head"><p>Description</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>Introduction</p></td>
<td><p>Get The Command Mode interrupt status.</p></td>
</tr>
<tr class="row-odd"><td><p>Parameters</p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">MIPIx</span></code>: pointer to the register address.</p></td>
</tr>
<tr class="row-even"><td><p>Return</p></td>
<td><p>The Command Mode interrupt status</p></td>
</tr>
</tbody>
</table>
</section>
<section id="mipi-dsi-ints-clr">
<h4>MIPI_DSI_INTS_Clr<a class="headerlink" href="#mipi-dsi-ints-clr" title="Link to this heading"></a></h4>
<table class="docutils align-default" style="width: 100%">
<thead>
<tr class="row-odd"><th class="head"><p>Items</p></th>
<th class="head"><p>Description</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>Introduction</p></td>
<td><p>Clears The Command Mode interrupt pending bits.</p></td>
</tr>
<tr class="row-odd"><td><p>Parameters</p></td>
<td><ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">MIPIx</span></code>: pointer to the register address.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">DSI_INTS</span></code>: specifies the interrupt to be cleared.</p></li>
</ul>
</td>
</tr>
<tr class="row-even"><td><p>Return</p></td>
<td><p>None</p></td>
</tr>
</tbody>
</table>
</section>
<section id="mipi-dsi-ints-acpu-get">
<h4>MIPI_DSI_INTS_ACPU_Get<a class="headerlink" href="#mipi-dsi-ints-acpu-get" title="Link to this heading"></a></h4>
<table class="docutils align-default" style="width: 100%">
<thead>
<tr class="row-odd"><th class="head"><p>Items</p></th>
<th class="head"><p>Description</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>Introduction</p></td>
<td><p>Get The Video Mode interrupt status.</p></td>
</tr>
<tr class="row-odd"><td><p>Parameters</p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">MIPIx</span></code>: pointer to the register address.</p></td>
</tr>
<tr class="row-even"><td><p>Return</p></td>
<td><p>The Video Mode interrupt status, which is frame done interrupt.</p></td>
</tr>
</tbody>
</table>
</section>
<section id="mipi-dsi-ints-acpu-clr">
<h4>MIPI_DSI_INTS_ACPU_Clr<a class="headerlink" href="#mipi-dsi-ints-acpu-clr" title="Link to this heading"></a></h4>
<table class="docutils align-default" style="width: 100%">
<thead>
<tr class="row-odd"><th class="head"><p>Items</p></th>
<th class="head"><p>Description</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>Introduction</p></td>
<td><p>Clears The Video Mode interrupt pending bits.</p></td>
</tr>
<tr class="row-odd"><td><p>Parameters</p></td>
<td><ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">MIPIx</span></code>: pointer to the register address.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">DSI_INTS</span></code>: specifies the interrupt to be cleared.</p></li>
</ul>
</td>
</tr>
<tr class="row-even"><td><p>Return</p></td>
<td><p>None</p></td>
</tr>
</tbody>
</table>
</section>
</section>
</section>
</section>


           </div>
          </div>
          <footer><div class="rst-footer-buttons" role="navigation" aria-label="页脚">
        <a href="0_lcdc_index_cn.html" class="btn btn-neutral float-left" title="LCD控制器（LCDC）" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left" aria-hidden="true"></span> 上一页</a>
        <a href="../8_spi/0_spi_index_cn.html" class="btn btn-neutral float-right" title="Serial Peripheral Interface (SPI)" accesskey="n" rel="next">下一页 <span class="fa fa-arrow-circle-right" aria-hidden="true"></span></a>
    </div>

  <hr/>

  <div role="contentinfo">
    <p>&#169; 版权所有 2025, Realsil。</p>
  </div>

  利用 <a href="https://www.sphinx-doc.org/">Sphinx</a> 构建，使用的 
    <a href="https://github.com/readthedocs/sphinx_rtd_theme">主题</a>
    由 <a href="https://readthedocs.org">Read the Docs</a> 开发.
   

</footer>
        </div>

      </div>
    </section>
  </div>
  <script>
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script>
 



</body>
</html>